---
title: 硬件大小调整准则
seo-title: Hardware Sizing Guidelines
description: 这些大小调整准则提供了部署AEM项目所需硬件资源的大致情况。
seo-description: These sizing guidelines offer an approximation of the hardware resources required to deploy an AEM project.
uuid: 395f9869-17c4-4b9b-99f8-d35a44dd6256
contentOwner: msm-service
products: SG_EXPERIENCEMANAGER/6.5/MANAGING
topic-tags: managing
content-type: reference
discoiquuid: 8893306f-4bc0-48eb-8448-36d0214caddf
docset: aem65
exl-id: 5837ef4f-d4e0-49d7-a671-87d5547e0d98
source-git-commit: b220adf6fa3e9faf94389b9a9416b7fca2f89d9d
workflow-type: tm+mt
source-wordcount: '2816'
ht-degree: 0%

---

# 硬件大小调整准则{#hardware-sizing-guidelines}

这些大小调整准则提供了部署AEM项目所需硬件资源的大致情况。 规模估算取决于项目的体系结构、解决方案的复杂性、预期流量和项目要求。 本指南可帮助您确定特定解决方案的硬件需求，或查找对硬件需求的上下限估计。

要考虑的基本因素包括（按此顺序）：

* **网络速度**

   * 网络延迟
   * 可用带宽

* **计算速度**

   * 缓存效率
   * 预期流量
   * 模板、应用程序和组件的复杂性
   * 并发作者
   * 创作操作的复杂性（简单内容编辑、MSM转出等）

* **I/O性能**

   * 文件或数据库存储的性能和效率

* **硬盘**

   * 至少比存储库大小大两到三倍

* **内存**

   * 网站的大小（内容对象、页面和用户的数量）
   * 同时处于活动状态的用户/会话数

## 架构 {#architecture}

典型的AEM设置包括创作环境和发布环境。 这些环境对底层硬件大小和系统配置有不同的要求。 有关这两种环境的详细注意事项，请参见 [创作环境](/help/managing/hardware-sizing-guidelines.md#author-environment-specific-calculations) 和 [发布环境](/help/managing/hardware-sizing-guidelines.md#publish-environment-specific-calculations) 部分。

在典型项目设置中，您有多个环境可在其上暂存项目阶段：

* **开发环境**
开发新功能或进行重大更改。 最佳实践是为每位开发人员使用开发环境（通常是个人系统上的本地安装）。

* **创作测试环境**
验证更改。 测试环境的数量可能因项目要求而异（例如，QA、集成测试或用户验收测试不同）。

* **发布测试环境**
主要用于测试Social Collaboration用例和/或作者与多个发布实例之间的交互。

* **创作生产环境**
供作者编辑内容。

* **发布生产环境**
用于提供已发布的内容。

此外，环境可能有所不同，从运行AEM的单服务器系统和应用程序服务器，到高度扩展的多服务器、多CPU群集实例集。 我们建议您为每个生产系统使用单独的计算机，并且不要在这些计算机上运行其他应用程序。

## 一般硬件大小调整注意事项 {#generic-hardware-sizing-considerations}

以下各节提供了有关如何计算硬件需求的指导，其中考虑了各种考虑因素。 对于大型系统，我们建议您在参考配置上执行一组简单的内部基准测试。

性能优化是一项基本任务，在完成针对特定项目的基准测试之前需要执行这项任务。 请务必遵循 [性能优化文档](/help/sites-deploying/configuring-performance.md) 执行任何基准测试并将其结果用于任何硬件大小计算之前。

高级用例的硬件规模要求需要基于对项目的详细性能评估。 需要卓越硬件资源的高级用例的特性包括以下组合：

* 高内容有效负载/吞吐量
* 广泛使用自定义代码、自定义工作流或第三方软件库
* 与不受支持的外部系统集成

### 磁盘空间/硬盘 {#disk-space-hard-drive}

所需的磁盘空间在很大程度上取决于Web应用程序的卷和类型。 计算应考虑：

* 页面、资产和其他存储库存储的实体（如工作流、配置文件等）的数量和大小。
* 估计的内容更改频率，从而内容版本的创建频率
* 将生成的DAM资源演绎版数量
* 随着时间的推移，内容的总体增长

在“联机”和“脱机”版本清理期间，会持续监视磁盘空间。 如果可用磁盘空间下降到某个关键值以下，则将取消该过程。 该关键值是存储库当前磁盘占用空间的25%，并且不可配置。 建议磁盘大小至少比存储库大小（包括预计增长量）大两到三倍。

考虑设置独立磁盘冗余阵列（例如RAID10）以实现数据冗余。

>[!NOTE]
>
>生产实例的临时目录应至少具有6 GB的可用空间。

#### 虚拟化 {#virtualization}

AEM在虚拟化环境中运行良好，但可能存在CPU或I/O等无法直接等同于物理硬件的因素。 建议选择更高的I/O速度（一般而言），因为这是大多数情况下一个关键因素。 设定环境基准对于准确了解所需的资源是必要的。

#### AEM实例的并行化 {#parallelization-of-aem-instances}

**失败安全性**

在至少两个单独的系统上部署一个故障保护网站。 如果一个系统出现故障，另一个系统可以接管并补偿系统故障。

**系统资源可扩展性**

当所有系统都在运行时，可提供更高的计算性能。 额外性能不一定与群集节点数量成线性关系，因为这种关系在很大程度上取决于技术环境；请参阅 [群集文档](/help/sites-deploying/recommended-deploys.md) 了解更多信息。

需要多少集群节点是根据特定Web项目的基本要求和具体用例估计的：

* 从故障安全的角度来看，有必要根据群集节点恢复所需的时间来确定所有环境的严重故障程度以及故障补偿时间。
* 在可扩展性方面，写操作的数量基本上是最重要的因素；请参见 [作者并行工作](/help/managing/hardware-sizing-guidelines.md#authors-working-in-parallel) 创作环境和 [Social Collaboration](/help/managing/hardware-sizing-guidelines.md#socialcollaborationspecificconsiderations) （发布环境）。 可以为仅访问系统的操作建立负载平衡，以处理读取操作；请参阅 [调度程序](https://helpx.adobe.com/experience-manager/dispatcher/user-guide.html) 了解详细信息。

## 创作环境特定的计算 {#author-environment-specific-calculations}

为了进行基准测试，Adobe开发了一些用于独立创作实例的基准测试。

* **基准测试1**
计算加载配置文件的最大吞吐量，其中用户在300个具有类似性质的现有页面的基本负载上执行简单的创建页面练习。 所涉及的步骤包括登录网站、创建包含SWF和图像/文本的页面、添加标记云，然后激活该页面。

   * **结果**
发现上述简单页面创建操作（视为一个事务）的最大吞吐量为每小时1730个事务。

* **基准测试2**
当加载配置文件混有新页面创建(10%)、现有页面修改(80%)以及连续创建和修改页面(10%)时，计算最大吞吐量。 页面的复杂性与基准测试1的配置文件中相同。 通过添加图像和修改文本内容，可以对页面进行基本修改。 同样，该练习是在具有300个页面的基本负载之上执行的，这些页面的复杂性与基准测试1中定义的复杂性相同。

   * **结果**
发现此类混合操作方案的最大吞吐量为每小时3252个事务。

>[!NOTE]
>
>吞吐率不会区分加载配置文件中的事务类型。 用于测量吞吐量的方法确保每个事务类型的固定比例包含在工作负载中。

以上两个测试清楚地表明，吞吐量会因操作类型而异。 使用环境上的活动作为调整系统大小的基础。 通过修改（这也是更常见的情况）等不太密集的操作，可以获得更好的吞吐量。

### 缓存 {#caching}

在创作环境中，缓存效率通常要低得多，因为对网站的更改更频繁，并且内容具有高度交互性和个性化。 使用Dispatcher，您可以缓存AEM库、JavaScripts、CSS文件和布局图像。 这样可以加快创作过程的某些方面。 将Web服务器配置为在这些资源上额外设置浏览器缓存标头，将减少HTTP请求的数量，从而提高系统响应速度，与作者一样。

### 作者并行工作 {#authors-working-in-parallel}

在作者环境中，并行工作的作者的数量以及他们之间的交互作用给系统带来的负载是主要的限制因素。 因此，我们建议您根据共享数据吞吐量来扩展系统。

对于此类情况，Adobe在创作实例的双节点非共享集群上执行基准测试。

* **基准测试1a**
使用包含2个创作实例的active-active shared-nothing集群，使用负载配置文件计算最大吞吐量，其中用户在300个现有页面（具有类似性质）的基本负载上执行简单的创建页面练习。

   * **结果**
发现上述简单页面创建练习（视为一个事务）的最大吞吐量是2016事务/小时。 与同一基准测试的独立创作实例相比，大约增加了16%。

* **基准测试2b**
使用包含2个创作实例的active-active shared-nothing集群，计算当加载配置文件混合了以下操作时的最大吞吐量：新建页面(10%)、修改现有页面(80%)以及连续创建和修改页面(10%)。 页面的复杂性与基准测试1的配置文件中相同。 通过添加图像和修改文本内容，可以对页面进行基本修改。 同样，该练习是在具有300页复杂度的基本负载之上执行的，这些页面的复杂性与基准测试1中定义的复杂性相同。

   * **结果**
发现此类混合操作方案的最大吞吐量为每小时6288个事务。 与同一基准测试的独立创作实例相比，大约增加了93%。

>[!NOTE]
>
>吞吐率不会区分加载配置文件中的事务类型。 用于测量吞吐量的方法确保每个事务类型的固定比例包含在工作负载中。

以上两项测试清楚地表明，AEM非常适合使用AEM执行基本编辑操作的作者。 通常，AEM在缩放读取操作方面最有效。

在典型的网站上，大多数创作都是在项目阶段进行的。 网站上线后，并行工作的作者数量通常会降至较低（运营模式）的平均值。

您可以按如下方式计算创作环境所需的计算机（或CPU）数量：

`n = numberOfParallelAuthors / 30`

当作者使用AEM执行基本操作时，此公式可用作缩放CPU的通用准则。 它假定系统和应用程序已优化。 但是，公式对于MSM或Assets等高级功能不成立（请参阅以下部分）。

另请参阅以下附加评论： [并行化](/help/managing/hardware-sizing-guidelines.md#parallelization-of-aem-instances) 和 [性能优化](/help/sites-deploying/configuring-performance.md).

### 硬件Recommendations {#hardware-recommendations}

通常，您可以为创作环境使用与为发布环境推荐的相同的硬件。 通常，创作系统上的网站流量要低得多，但缓存效率也较低。 但是，这里的基本因素是并行工作的作者数量，以及对系统采取的操作类型。 通常，（创作环境的）AEM群集在缩放读取操作方面最有效；换句话说，AEM群集与执行基本编辑操作的作者一起缩放得较好。

Adobe基准测试是使用RedHat 5.5操作系统进行的，该操作系统运行于Hewlett-Packard ProLiant DL380 G5硬件平台，具有以下配置：

* 两个四核英特尔至强X5450 CPU，3.00GHz
* 8 GB RAM
* Broadcom NetXtreme II BCM5708千兆以太网
* HP Smart Array RAID控制器，256 MB高速缓存
* 两个146 GB 10,000 RPM SAS磁盘配置为RAID0条带集
* SPEC CINT2006费率基准分数为110

AEM实例以最小栈大小256M、最大栈大小1024M运行。

## 发布特定于环境的计算 {#publish-environment-specific-calculations}

### 缓存效率和流量 {#caching-efficiency-and-traffic}

缓存效率对网站运行速度至关重要。 下表显示了优化的AEM系统可以使用反向代理（例如Dispatcher）每秒可以处理的页面数：

| 缓存比率 | 页数/秒（峰值） | 每日100万页（平均） |
|---|---|---|
| 100% | 1000-2000 | 35-70 |
| 99% | 910 | 32 |
| 95% | 690 | 25 |
| 90% | 520 | 18 |
| 60% | 220 | 8 |
| 0% | 100 | 3.5 |

>[!CAUTION]
>
>免责声明：这些数字基于默认硬件配置，并且可能因使用的特定硬件而异。

缓存率是Dispatcher在无需访问AEM的情况下可以返回的页数的百分比。 100%表示Dispatcher应答所有请求，0%表示AEM计算每个页面。

### 模板和应用程序的复杂性 {#complexity-of-templates-and-applications}

如果您使用复杂的模板，AEM将需要更多时间来渲染页面。 从缓存中获取的页面不会受此影响，但在考虑整体响应时间时，页面大小仍然相关。 渲染复杂页面所花费的时间很容易比渲染简单页面多十倍。

### 公式 {#formula}

使用以下公式，您可以计算AEM解决方案总体复杂性的估计值：

`complexity = applicationComplexity + ((1-cacheRatio) * templateComplexity)`

根据复杂性，您可以确定发布环境所需的服务器（或CPU内核）数量，如下所示：

`n = (traffic * complexity / 1000 ) * activations`

该方程式中的变数如下：

<table>
 <tbody>
  <tr>
   <td>流量</td>
   <td>预计的每秒峰值流量。 您可以用每天页面点击数除以35,000来估计此值。</td>
  </tr>
  <tr>
   <td>应用程序复杂性</td>
   <td><p>使用1表示简单应用程序，使用2表示复杂应用程序，或使用介于以下值之间的值：</p>
    <ul>
     <li>1 — 完全匿名、面向内容的网站</li>
     <li>1.1 — 完全匿名、面向内容的站点，具有客户端/Target个性化</li>
     <li>1.5 — 面向内容的网站，包含匿名部分和登录部分，客户端/Target个性化</li>
     <li>1.7 — 面向内容的网站，包含匿名部分和登录部分、客户端/Target个性化和一些用户生成的内容</li>
     <li>2 — 整个站点需要登录，并且需要广泛使用用户生成的内容和各种个性化技术</li>
    </ul> </td>
  </tr>
  <tr>
   <td>cacheRatio</td>
   <td>从Dispatcher缓存中获取的页面的百分比。 如果所有页面都来自缓存，则使用1；如果每个页面都由AEM计算，则使用0。</td>
  </tr>
  <tr>
   <td>templateComplex</td>
   <td>使用介于1和10之间的值指示模板的复杂性。 数字越高表示模板越复杂，当网站平均每页包含10个组件时，值为1；当网站平均每页包含40个组件时，值为5；当网站平均包含100个组件时，值为10。</td>
  </tr>
  <tr>
   <td>激活</td>
   <td>每小时的平均激活次数（平均大小的页面和资产从创作层到发布层的复制）除以x，其中x是在系统上完成的激活次数，对由系统处理的其他任务没有性能负面影响。 您还可以预定义悲观的初始值，如x = 100。<br /> </td>
  </tr>
 </tbody>
</table>

如果您拥有更复杂的网站，则还需要功能更强大的Web服务器，以便AEM能够在可接受的时间内响应请求。

* 复杂性低于4：· 1024 MB JVM RAM&#42;
·中低性能CPU

* 复杂性介于4和8之间：· 2048 MB JVM RAM&#42;
·中高性能CPU

* 复杂性高于8：· 4096 MB JVM RAM&#42;
·高端到高端性能CPU

>[!NOTE]
>
>&#42; 除了JVM所需的内存外，还可为操作系统保留足够的RAM。

## 其他特定于用例的计算 {#additional-use-case-specific-calculations}

除了默认Web应用程序的计算之外，您可能需要考虑以下用例的特定因素。 计算值将添加到默认计算中。

### 特定于资产的注意事项 {#assets-specific-considerations}

数字资产的广泛处理需要优化的硬件资源，最相关的因素是图像大小和已处理图像的峰值吞吐量。

分配至少16GB的栈并配置 [!UICONTROL DAM更新资产] 使用的工作流 [Camera Raw包](/help/assets/camera-raw.md) 用于摄取原始图像。

>[!NOTE]
>
>较高的图像吞吐量意味着计算资源需要能够跟上系统I/O的速度，反之亦然。 例如，如果通过导入图像来启动工作流，则通过WebDAV上传许多图像可能会导致工作流积压。
>
>对TarPM、数据存储和搜索索引使用单独的磁盘可帮助优化系统I/O行为（但是，通常将搜索索引保留在本地是有意义的）。

>[!NOTE]
>
>另请参阅 [Assets性能指南](/help/sites-deploying/assets-performance-sizing.md).

### 多站点管理器 {#multi-site-manager}

在创作环境中使用AEM MSM时的资源消耗在很大程度上取决于特定用例。 基本因素包括：

* 活动副本数
* 转出的周期
* 要转出的内容树大小
* 转出操作的已连接功能

使用具有代表性的内容摘录测试计划的用例，可以帮助您更好地了解资源消耗。 如果使用计划吞吐量推断结果，则可以评估AEM MSM所需的其他资源。

另外还要考虑到，如果AEM MSM用例消耗的资源比计划的多，则并行工作的作者将感觉到性能方面的副作用。

### AEM Communities大小调整注意事项 {#aem-communities-sizing-considerations}

包含AEM Communities功能的AEM站点（社区站点）会在发布环境中与站点访客（成员）进行高级别的交互。

社区站点的规模调整考虑因素取决于社区成员预期的交互，以及页面内容的最佳性能是否更加重要。

用户生成的内容(UGC)提交的成员与页面内容分开存储。 虽然AEM平台使用一个节点存储区，将站点内容从创作复制到发布，但AEM Communities使用单个通用存储区来存储从不复制的UGC。

对于UGC存储，需要选择一个存储资源提供程序(SRP)，这会影响所选的部署。
请参阅

* [社区内容存储](/help/communities/working-with-srp.md)
* [推荐的社区拓扑](/help/communities/topologies.md)
