---
title: 硬件大小调整规范
seo-title: 硬件大小调整规范
description: 这些调整指南优惠部署AEM项目所需硬件资源的近似值。
seo-description: 这些调整指南优惠部署AEM项目所需硬件资源的近似值。
uuid: 395f9869-17c4-4b9b-99f8-d35a44dd6256
contentOwner: msm-service
products: SG_EXPERIENCEMANAGER/6.5/MANAGING
topic-tags: managing
content-type: reference
discoiquuid: 8893306f-4bc0-48eb-8448-36d0214caddf
docset: aem65
translation-type: tm+mt
source-git-commit: f24142064b15606a5706fe78bf56866f7f9a40ae
workflow-type: tm+mt
source-wordcount: '2835'
ht-degree: 0%

---


# 硬件大小调整规范{#hardware-sizing-guidelines}

这些调整指南优惠部署AEM项目所需硬件资源的近似值。 规模估计取决于项目的架构、解决方案的复杂性、预期流量和项目要求。 本指南帮助您确定特定解决方案的硬件需求，或查找硬件需求的上限和下限估计值。

要考虑的基本因素有：

* **网络速度**

   * 网络延迟
   * 可用带宽

* **计算速度**

   * 缓存效率
   * 预期流量
   * 模板、应用程序和组件的复杂性
   * 并发作者
   * 创作操作的复杂性（简单内容编辑、MSM转出等）

* **I/O性能**

   * 文件或数据库存储的性能和效率

* **硬盘**

   * 至少比存储库大两三倍

* **内存**

   * 网站大小（内容对象、页面和用户数）
   * 同时处于活动状态的用户／会话数

## 架构 {#architecture}

典型的AEM设置由作者和发布环境组成。 这些环境对基础硬件大小和系统配置有不同的要求。 [作者环境](/help/managing/hardware-sizing-guidelines.md#author-environment-specific-calculations)和[发布环境](/help/managing/hardware-sizing-guidelines.md#publish-environment-specific-calculations)各节中介绍了两种环境的详细注意事项。

在典型的项目设置中，您有几个环境可用于暂存项目阶段：

* **开发**
环境开发新功能或进行重大更改。最佳实践是为每个开发人员使用开发环境（通常是在他们的个人系统上本地安装）。

* **创作测试**
环境验证更改。测试环境的数量可能因项目要求而异（例如，QA、集成测试或用户接受测试各自独立）。

* **发布测试**
环境主要用于测试社交协作用例和／或作者与多个发布实例之间的交互。

* **创作生产**
环境供作者编辑内容。

* **发布生产**
环境用于提供已发布的内容。

此外，环境可能不同，从运行AEM和应用程序服务器的单服务器系统到高度扩展的多服务器、多CPU群集实例集。 我们建议您为每个生产系统使用一台单独的计算机，并且不要在这些计算机上运行其他应用程序。

## 一般硬件大小调整注意事项{#generic-hardware-sizing-considerations}

以下各节介绍了如何计算硬件要求，同时考虑到了各种因素。 对于大型系统，我们建议您对参考配置执行一组简单的内部基准测试。

性能优化是一个基本任务，需要先执行它，然后才能对特定项目进行基准测试。 在执行任何基准测试并将其结果用于任何硬件大小计算之前，请确保应用[性能优化文档](/help/sites-deploying/configuring-performance.md)中提供的建议。

高级用例的硬件规模要求需要基于项目的详细性能评估。 需要卓越硬件资源的高级使用案例的特点包括：

* 高内容有效负荷／吞吐量
* 广泛使用自定义代码、自定义工作流或第三方软件库
* 与不支持的外部系统集成

### 磁盘空间／硬盘{#disk-space-hard-drive}

所需的磁盘空间很大程度上取决于Web应用程序的卷和类型。 计算时应考虑：

* 页面、资产和其他存储库的实体(如工作流、用户档案等)的数量和大小。
* 估计的内容更改频率，因此创建内容版本
* 将生成的DAM资产演绎版的卷
* 随着时间推移，内容的整体增长

在“联机”和“脱机”、“修订清理”期间持续监视磁盘空间。 如果可用磁盘空间降至关键值以下，将取消该过程。 关键价值是存储库当前磁盘占用量的25%，并且不可配置。 建议磁盘的大小至少是存储库大小的二、三倍，包括估计的增长。

考虑独立磁盘冗余阵列（RAID，如RAID10）的设置，以实现数据冗余。

>[!NOTE]
>
>生产实例的临时目录应至少具有6 GB可用空间。

#### 虚拟化{#virtualization}

AEM在虚拟化环境中运行良好，但可能存在CPU或I/O等无法直接与物理硬件相等的因素。 建议选择更高的I/O速度（通常），因为这在大多数情况下都是关键因素。 对环境进行基准测试是准确了解所需资源的必要条件。

#### AEM实例{#parallelization-of-aem-instances}的并行化

**失败安全性**

在至少两个单独的系统上部署故障保护网站。 如果一个系统发生故障，另一个系统可以接管并因此补偿系统故障。

**系统资源可伸缩性**

当所有系统都在运行时，可以提高的计算性能。 这种附加性能不一定与群集节点数呈线性关系，因为这种关系高度依赖于技术环境;有关详细信息，请参阅[群集文档](/help/sites-deploying/recommended-deploys.md)。

根据特定Web项目的基本要求和具体用例来估计需要多少个群集节点：

* 从故障安全性的角度来看，对于所有环境，必须根据群集节点恢复所需的时间来确定关键故障的严重程度和故障补偿时间。
* 在可扩展性方面，写操作的数量基本上是最重要的因素；请参阅[作者在并行](/help/managing/hardware-sizing-guidelines.md#authors-working-in-parallel)中工作(对于作者环境)和[社交协作](/help/managing/hardware-sizing-guidelines.md#socialcollaborationspecificconsiderations)(对于发布环境)。 可以为仅访问系统以处理读取操作的操作建立负载平衡；有关详细信息，请参阅[Dispatcher](https://helpx.adobe.com/experience-manager/dispatcher/user-guide.html)。

## 创作环境特定计算{#author-environment-specific-calculations}

为了进行基准测试，Adobe为独立作者实例开发了一些基准测试。

* **基准测试1**
计算负载用户档案的最大吞吐量，用户在基本负载300个现有页面的基础上执行简单的创建页面练习，所有这些页面性质都相似。所涉及的步骤包括登录到站点、创建包含SWF和图像／文本的页面、添加标记云，然后激活页面。

   * **结**
果发现上述（视为一个事务）简单页面创建练习的最大吞吐量为1730个事务／小时。

* **基准测试2**
当加载用户档案包含新建页面(10%)、修改现有页面(80%)和创建，然后连续修改页面(10%)，时计算最大吞吐量。页面的复杂性与基准测试1的用户档案相同。 通过添加图像和修改文本内容，可以对页面进行基本修改。 同样，该练习是在300页的基本负载上执行的，该负载与基准测试1中定义的相同复杂性。

   * **结**
果此类混合操作方案的最大吞吐量为每小时3252个事务。

>[!NOTE]
>
>吞吐量速率不区分负载用户档案中的事务类型。 用于测量吞吐量的方法确保在工作负载中包括每种类型事务的固定比例。

以上两个测试清楚地强调吞吐量根据操作类型而有所不同。 将环境上的活动用作调整系统大小的基础。 通过修改等较低密集度的操作（这也更常见），您将获得更好的吞吐量。

### 缓存{#caching}

在创作环境中，缓存效率通常要低得多，因为对网站的更改更频繁，而且内容具有高度交互性和个性化。 使用调度程序，您可以缓存AEM库、JavaScript、CSS文件和布局图像。 这加快了创作过程的某些方面。 将Web服务器配置为额外设置在这些资源上进行浏览器缓存的标头将减少HTTP请求的数量，从而改善系统响应性，作者可以体验到这些请求。

### 并行{#authors-working-in-parallel}的作者

在作者环境中，并行工作的作者人数和系统的交互增加的负载是主要的限制因素。 因此，我们建议您根据数据的共享吞吐量来调整系统。

对于此类情况，Adobe在创作实例的两个节点无共享群集上执行基准测试。

* **基准测试1**
a使用由2个作者实例组成的活动——活动——无共享群集，通过负载用户档案计算最大吞吐量，用户在基本负载300个现有页面的基础上执行简单的创建页面练习，所有性质都相似。

   * **结**
果简单的页面创建练习（如上文，视为一个事务）的最大吞吐量为2016个事务／小时。与同一基准测试的独立作者实例相比，这大约增加了16%。

* **基准测试2**
b对于由2个作者实例组成的活动——活动——无共享群集，当加载用户档案混合创建新页面(10%)、修改现有页面(80%)以及连续创建和修改页面(10%)时，计算最大吞吐量。页面的复杂性与基准测试1的用户档案相同。 通过添加图像和修改文本内容，可以对页面进行基本修改。 同样，该练习是在300页复杂度的基础负载上执行的，与基准测试1中定义的相同。

   * **结**
果此类混合操作方案的最大吞吐量为6288个事务／小时。与同一基准测试的独立作者实例相比，这大约增加了93%。

>[!NOTE]
>
>吞吐量速率不区分负载用户档案中的事务类型。 用于测量吞吐量的方法确保在工作负载中包括每种类型事务的固定比例。

以上两个测试清楚地强调了AEM对于使用AEM执行基本编辑操作的作者的缩放效果。 通常，AEM在扩展读取操作方面最有效。

在典型网站上，大多数创作都发生在项目阶段。 网站上线后，并行工作的作者数通常会下降到较低（操作模式）的平均值。

您可以按如下方式计算创作环境所需的计算机（或CPU）数：

`n = numberOfParallelAuthors / 30`

当作者使用AEM执行基本操作时，此公式可作为扩展CPU的一般准则。 假定系统和应用程序已优化。 但是，对于MSM或资产等高级功能，此公式不成立（请参阅以下各节）。

另请参见有关[并行化](/help/managing/hardware-sizing-guidelines.md#parallelization-of-aem-instances)和[性能优化](/help/sites-deploying/configuring-performance.md)的附加注释。

### 硬件Recommendations{#hardware-recommendations}

通常，您可以为创作环境使用与发布环境建议的相同硬件。 通常，创作系统上的网站流量要低得多，但缓存效率也较低。 但是，这里的基本因素是，并行工作的作者人数，以及对系统采取的行动类型。 一般而言，AEM群集(作者环境)在缩放读取操作方面最为有效；换言之，AEM群集可以与正在执行基本编辑操作的作者进行良好的缩放。

Adobe的基准测试使用RedHat 5.5操作系统执行，该操作系统在Hewlett-Packard ProLiant DL380 G5硬件平台上运行，其配置如下：

* 两个3.00GHz四核英特尔至强X5450 CPU
* 8 GB RAM
* Broadcom NetXtreme II BCM5708千兆以太网
* HP智能阵列RAID控制器，256 MB高速缓存
* 两个146 GB 10,000 RPM SAS磁盘配置为RAID0条带集
* SPEC CINT2006利率基准得分为110

AEM实例运行时的堆大小最小为256M，最大为1024M。

## 发布环境特定计算{#publish-environment-specific-calculations}

### 缓存效率和流量{#caching-efficiency-and-traffic}

缓存效率对于网站速度至关重要。 下表显示优化的AEM系统使用反向代理（如调度程序）每秒可以处理多少页：

| 高速缓存比率 | 页面／秒（峰值） | 百万页／日（平均） |
|---|---|---|
| 100% | 1000-2000 | 35-70 |
| 99% | 910 | 32 |
| 95% | 690 | 25 |
| 90% | 520 | 18 |
| 60% | 220 | 8 |
| 0% | 100 | 3.5 |

>[!CAUTION]
>
>免责声明：这些数字基于默认硬件配置，并可能因所使用的特定硬件而异。

缓存比率是调度程序无需访问AEM即可返回的页的百分比。 100%表示调度程序回答所有请求，0%表示AEM计算每一页。

### 模板和应用程序{#complexity-of-templates-and-applications}的复杂性

如果您使用复杂模板，AEM需要更多时间来渲染页面。 从缓存中提取的页面不受此影响，但在考虑总体响应时间时，页面大小仍是相关的。 渲染复杂页面可能比渲染简单页面轻松花费十倍时间。

### 公式{#formula}

使用以下公式，您可以计算AEM解决方案的整体复杂性的估计值：

`complexity = applicationComplexity + ((1-cacheRatio) * templateComplexity)`

根据复杂性，您可以确定发布环境所需的服务器（或CPU核心）数量，如下所示：

`n = (traffic * complexity / 1000 ) * activations`

公式中的变量如下：

<table>
 <tbody>
  <tr>
   <td>交通</td>
   <td>每秒的预期峰值流量。 您可以将其估计为每天的页面点击次数除以35000。</td>
  </tr>
  <tr>
   <td>applicationComplexic</td>
   <td><p>对于简单应用程序，使用1；对于复杂应用程序，使用2；或者使用中间值：</p>
    <ul>
     <li>1 —— 完全匿名、面向内容的站点</li>
     <li>1.1 —— 一个完全匿名、面向内容的站点，其客户端/目标个性化</li>
     <li>1.5 —— 一个面向内容的网站，包含匿名和登录部分，客户端/目标个性化</li>
     <li>1.7 —— 适用于同时具有匿名和登录部分的面向内容的网站、客户端/目标个性化以及一些用户生成的内容</li>
     <li>2 —— 整个站点需要登录的地方，可广泛使用用户生成的内容和各种个性化技术</li>
    </ul> </td>
  </tr>
  <tr>
   <td>cacheRatio</td>
   <td>调度程序缓存中的页面百分比。 如果所有页都来自缓存，则使用1；如果每页都由AEM计算，则使用0。</td>
  </tr>
  <tr>
   <td>templateComplexicy</td>
   <td>使用1到10之间的值表示模板的复杂性。 数字越大，表示的模板越复杂，每页平均组件数为10的站点使用值1，每页平均组件数为40的站点使用值5，每页平均组件数为10，每页平均组件数为10。</td>
  </tr>
  <tr>
   <td>激活</td>
   <td>每小时平均激活数（将平均大小的页面和资产从作者复制到发布层）除以x，其中x是在系统上对系统处理的其他任务执行的激活数，没有性能副作用。 您还可以预定义悲观的初始值，如x = 100。<br /> </td>
  </tr>
 </tbody>
</table>

如果您有更复杂的网站，您还需要更强大的Web服务器，这样AEM可以在可接受的时间内回答请求。

* 低于4的复杂性：
· 1024 MB JVM内存*
·中低性能CPU

* 复杂性介于4和8之间：
· 2048 MB JVM内存*
·中高性能CPU

* 高于8的复杂性：
· 4096 MB JVM内存*
·高端到高端性能CPU

>[!NOTE]
>
>*除了JVM所需的内存外，还为操作系统保留足够的内存。

## 其他特定用例的计算{#additional-use-case-specific-calculations}

除了计算默认Web应用程序外，您可能需要考虑以下用例的特定因素。 计算值将添加到默认计算中。

### 特定于资产的注意事项{#assets-specific-considerations}

对数字资产的广泛处理需要优化硬件资源，最相关的因素是图像大小和处理后图像的峰值吞吐量。

分配至少16GB堆并配置[!UICONTROL DAM更新资产]工作流，以使用[Camera Raw包](/help/assets/camera-raw.md)获取原始图像。

>[!NOTE]
图像吞吐量越高意味着计算资源需要能够与系统I/O保持同步，反之亦然。 例如，如果工作流是通过导入图像来启动的，则通过WebDAV上传许多图像可能会导致积压工作流。
对TarPM、数据存储和搜索索引使用单独的磁盘有助于优化系统I/O行为（但是，通常将搜索索引保留在本地是合理的）。

>[!NOTE]
另请参阅[资产性能指南](/help/sites-deploying/assets-performance-sizing.md)。

### 多站点管理器{#multi-site-manager}

在创作环境上使用AEM MSM时，资源消耗量主要取决于特定用例。 基本因素有：

* Live-Copy数
* 推出周期
* 要转出的内容树大小
* 转出操作的连接功能

使用具有代表性的内容摘录测试计划的用例可帮助您更好地了解资源消耗情况。 如果用计划的吞吐量推断结果，则可以评估AEM MSM所需的额外资源。

还请考虑，如果AEM MSM使用案例占用的资源比计划的多，并行工作的作者将发现性能副作用。

### AEM Communities规模调整注意事项{#aem-communities-sizing-considerations}

包含AEM Communities功能（社区站点）的AEM站点在发布环境下体验到来自站点访客（成员）的高级交互。

社区站点的大小调整注意事项取决于社区成员的预期交互以及页面内容的最佳性能是否更重要。

用户生成的内容(UGC)提交的成员与页面内容分开存储。 虽然AEM平台使用一个将站点内容从作者复制到发布的节点存储，但AEM Communities却为从未复制过的UGC使用一个通用存储。

对于UGC存储，必须选择影响所选部署的存储资源提供程序(SRP)。
请参阅

* [社区内容存储](/help/communities/working-with-srp.md)
* [社区的推荐拓扑](/help/communities/topologies.md)

