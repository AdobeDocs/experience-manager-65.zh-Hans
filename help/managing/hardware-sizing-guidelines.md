---
title: 硬件大小调整规范
seo-title: 硬件大小调整规范
description: 这些调整大小准则优惠了部署AEM项目所需硬件资源的近似值。
seo-description: 这些调整大小准则优惠了部署AEM项目所需硬件资源的近似值。
uuid: 395f9869-17c4-4b9b-99f8-d35a44dd6256
contentOwner: msm-service
products: SG_EXPERIENCEMANAGER/6.5/MANAGING
topic-tags: managing
content-type: reference
discoiquuid: 8893306f-4bc0-48eb-8448-36d0214caddf
docset: aem65
translation-type: tm+mt
source-git-commit: f24142064b15606a5706fe78bf56866f7f9a40ae

---


# 硬件大小调整规范{#hardware-sizing-guidelines}

这些调整大小准则优惠了部署AEM项目所需硬件资源的近似值。 规模估计取决于项目的架构、解决方案的复杂性、预期流量和项目要求。 本指南可帮助您确定特定解决方案的硬件需求，或查找硬件需求的上限和下限估计值。

要考虑的基本因素如下：

* **网络速度**

   * 网络延迟
   * 可用带宽

* **计算速度**

   * 缓存效率
   * 预期流量
   * 模板、应用程序和组件的复杂性
   * 并发作者
   * 创作操作的复杂性（简单内容编辑、MSM转出等）

* **I/O性能**

   * 文件或数据库存储的性能和效率

* **硬盘**

   * 至少比存储库大两三倍

* **内存**

   * 网站的大小（内容对象、页面和用户数）
   * 同时处于活动状态的用户／会话数

## 架构 {#architecture}

典型的AEM设置由作者和发布环境组成。 这些环境对底层硬件大小和系统配置有不同的要求。 有关这两个环境的详细注意事项，请参阅作 [者环境和](/help/managing/hardware-sizing-guidelines.md#author-environment-specific-calculations) 发 [布环境部分](/help/managing/hardware-sizing-guidelines.md#publish-environment-specific-calculations) 。

在典型的项目设置中，您有几个环境可用于暂存项目阶段：

* **开发环境**&#x200B;开发新功能或进行重大更改。 最佳实践是为每个开发人员使用开发环境（通常是在他们的个人系统上本地安装）。

* **创作测试环境**&#x200B;验证更改。 测试环境的数量可能因项目要求而异（例如，QA、集成测试或用户接受测试各不相同）。

* **发布测试环境**&#x200B;主要用于测试社交协作用例和／或作者与多个发布实例之间的交互。

* **创作生产环境**&#x200B;供作者编辑内容。

* **发布生产环境**-提供已发布的内容。

此外，环境可能不同，从运行AEM的单服务器系统和应用程序服务器到高度缩放的多服务器、多CPU群集实例集。 我们建议您为每个生产系统使用单独的计算机，并且不要在这些计算机上运行其他应用程序。

## 一般硬件大小调整注意事项 {#generic-hardware-sizing-considerations}

以下各节介绍了如何在考虑各种因素的情况下计算硬件要求。 对于大型系统，我们建议您对参考配置执行一组简单的内部基准测试。

性能优化是一个基本任务，需要在为特定项目执行任何基准测试之前执行。 在执行任何基准测试并使用其结果进行任何硬件 [大小调整计算之前](/help/sites-deploying/configuring-performance.md) ，请确保应用性能优化文档中提供的建议。

高级用例的硬件尺寸调整要求需要基于项目的详细性能评估。 需要特殊硬件资源的高级使用案例的特征包括：

* 高内容有效负荷／吞吐量
* 大量使用自定义代码、自定义工作流或第三方软件库
* 与不支持的外部系统集成

### 磁盘空间／硬盘 {#disk-space-hard-drive}

所需的磁盘空间在很大程度上取决于Web应用程序的卷和类型。 计算时应考虑：

* 页面、资产和其他存储库的实体(如工作流、用户档案等)的数量和大小。
* 估计的内容更改频率，因此创建内容版本
* 将生成的DAM资产演绎版的数量
* 随着时间推移，内容的总体增长

在“联机”和“脱机”、“修订清理”期间，磁盘空间会持续受到监视。 如果可用磁盘空间降至关键值以下，则将取消该过程。 关键值是存储库当前磁盘占用量的25%，且无法配置。 建议磁盘的大小至少比存储库大两三倍，包括估计的增长。

考虑为数据冗余设置独立磁盘冗余阵列（RAID，例如RAID10）。

>[!NOTE]
>
>生产实例的临时目录应至少具有6 GB的可用空间。

#### 虚拟化 {#virtualization}

AEM在虚拟化环境中运行良好，但可能存在CPU或I/O等无法直接与物理硬件相等的因素。 建议选择更高的I/O速度（通常），因为这在大多数情况下都是一个关键因素。 要准确了解需要哪些资源，必须对环境进行基准测试。

#### AEM实例的并行化 {#parallelization-of-aem-instances}

**失败安全性**

在至少两个单独的系统上部署故障保护网站。 如果一个系统发生故障，另一个系统可以接管并因此补偿系统故障。

**系统资源可伸缩性**

当所有系统都在运行时，可以提高计算性能。 这种附加性能不一定与簇节点数成线性关系，因为这种关系高度依赖于技术环境;有关详细信息，请 [参阅群集文档](/help/sites-deploying/recommended-deploys.md) 。

根据具体Web项目的基本要求和具体使用案例，估计需要多少个群集节点：

* 从故障安全性的角度，必须根据群集节点恢复所需的时间，确定所有环境的关键故障的严重程度和故障补偿时间。
* 在可伸缩性方面，写操作的数量基本上是最重要的因素；请参 [阅作者并行工作](/help/managing/hardware-sizing-guidelines.md#authors-working-in-parallel) ，以获取作者环境, [](/help/managing/hardware-sizing-guidelines.md#socialcollaborationspecificconsiderations) 并参阅发布环境的社交协作。 可以为仅访问系统以处理读取操作的操作建立负载平衡；有关详 [细信息](https://helpx.adobe.com/experience-manager/dispatcher/user-guide.html) ，请参阅Dispatcher。

## 创作环境特定计算 {#author-environment-specific-calculations}

为了进行基准测试，Adobe为独立作者实例开发了一些基准测试。

* **基准测试1**&#x200B;计算负载用户档案的最大吞吐量，用户在300个现有页面的基本负载上执行简单的创建页面练习，而所有这些页面都具有相似的性质。 所涉及的步骤包括登录到站点、创建包含SWF和图像／文本的页面、添加标记云，然后激活页面。

   * **结果**&#x200B;发现，对于上述简单页面创建练习（视为一个事务），最大吞吐量为1730个事务／小时。

* **基准测试2**&#x200B;当加载用户档案包含新建页面(10%)、修改现有页面(80%)和创建，然后连续修改页面(10%)的组合时，计算最大吞吐量。 页面的复杂性与基准测试1的用户档案一样。 通过添加图像和修改文本内容，可以对页面进行基本修改。 同样，在300页的基本负载（与基准测试1中定义的相同复杂性）的基础上执行了该练习。

   * **结果**&#x200B;此类混合操作方案的最大吞吐量为每小时3252次事务。

>[!NOTE]
>
>吞吐量率不区分负载用户档案中的事务类型。 用于测量吞吐量的方法确保在工作负载中包括每种类型的事务的固定比例。

以上两个测试清楚地突出显示，吞吐量会因操作类型而异。 将环境上的活动用作调整系统大小的基础。 通过修改（这也更常见）等较低密集度的操作，您可以获得更好的吞吐量。

### 缓存 {#caching}

在创作环境中，缓存效率通常要低得多，因为对网站的更改更频繁，而且内容具有高度交互性和个性化。 使用调度程序，您可以缓存AEM库、JavaScript、CSS文件和布局图像。 这加快了创作过程的某些方面。 将Web服务器配置为额外设置在这些资源上的浏览器缓存的标题将减少HTTP请求的数量，从而改善系统响应性，作者可以体验到这些请求。

### 并行工作的作者 {#authors-working-in-parallel}

在作者环境中，并行工作的作者数量及其交互对系统的加载是主要限制因素。 因此，我们建议您根据数据的共享吞吐量来缩放系统。

对于这种情况，Adobe在创作实例的两个节点无共享群集上执行基准测试。

* **基准测试1a**&#x200B;使用由2个作者实例组成的活动——活动——无共享群集，计算最大吞吐量，该负载用户档案中的用户在300个现有页面的基本负载上执行简单的创建页面练习，所有这些操作都具有类似的性质。

   * **结果**&#x200B;对于简单的页面创建练习（如上文，视为一个事务），最大吞吐量为2016事务／小时。 与同一基准测试的独立作者实例相比，这大约增加了16%。

* **基准测试2b**&#x200B;使用由2个作者实例组成的活动——活动——无共享群集，当加载用户档案混合创建新页面(10%)、修改现有页面(80%)和连续创建和修改页面(10%)时，计算最大吞吐量。 页面的复杂性与基准测试1的用户档案中相同。 通过添加图像和修改文本内容，可以对页面进行基本修改。 同样，在300页的基本负载（与基准测试1中定义的相同）上执行了该练习。

   * **结果**&#x200B;发现此类混合操作场景的最大吞吐量为6288个事务／小时。 与同一基准测试的独立作者实例相比，这大约增加了93%。

>[!NOTE]
>
>吞吐量率不区分负载用户档案中的事务类型。 用于测量吞吐量的方法确保在工作负载中包括每种类型的事务的固定比例。

以上两个测试清楚地突出显示，AEM可以很好地对使用AEM执行基本编辑操作的作者进行缩放。 通常，AEM在缩放读取操作方面最有效。

在典型的网站上，大多数创作都发生在项目阶段。 网站上线后，并行工作的作者数量通常会下降到较低的（操作模式）平均数。

您可以按如下方式计算创作环境所需的计算机（或CPU）数：

`n = numberOfParallelAuthors / 30`

当作者使用AEM执行基本操作时，此公式可用作缩放CPU的一般准则。 假定系统和应用程序已优化。 但是，对于MSM或资产等高级功能，此公式将不成立（请参阅以下各节）。

另请参阅有关并行化和性能优 [化的](/help/managing/hardware-sizing-guidelines.md#parallelization-of-aem-instances) 其 [他注释](/help/sites-deploying/configuring-performance.md)。

### 硬件推荐 {#hardware-recommendations}

通常，您可以为创作环境使用与发布环境建议的相同硬件。 通常，创作系统上的网站流量要低得多，但缓存效率也较低。 然而，这里的基本因素是，同时工作的作者人数以及对系统采取的操作类型。 一般而言，AEM聚类(作者环境)在缩放读取操作方面最有效；换句话说，AEM群集可以与执行基本编辑操作的作者进行良好的缩放。

Adobe的基准测试是使用RedHat 5.5操作系统执行的，该操作系统在Hewlett-Packard ProLiant DL380 G5硬件平台上运行，具有以下配置：

* 两个Intel Xeon X5450四核CPU,3.00GHz
* 8 GB RAM
* Broadcom NetXtreme II BCM5708千兆位以太网
* HP智能阵列RAID控制器，256 MB高速缓存
* 两个146 GB 10,000 RPM SAS磁盘，配置为RAID0条带集
* SPEC CINT2006利率基准得分为110

AEM实例运行时的堆大小最小为256M，最大为1024M。

## 发布环境特定计算 {#publish-environment-specific-calculations}

### 缓存效率和流量 {#caching-efficiency-and-traffic}

缓存效率对网站速度至关重要。 下表显示了优化的AEM系统使用反向代理（如调度程序）每秒可以处理多少页：

| 缓存比 | 页面／秒（峰值） | 百万页／日（平均） |
|---|---|---|
| 100% | 1000-2000 | 35-70 |
| 99% | 910 | 32 |
| 95% | 690 | 25 |
| 90% | 520 | 18 |
| 60% | 220 | 8 |
| 0% | 100 | 3.5 |

>[!CAUTION]
>
>免责声明：这些数字基于默认硬件配置，并可能因所使用的特定硬件而异。

缓存比率是调度程序无需访问AEM即可返回的页面百分比。 100%表示调度程序回答所有请求，0%表示AEM计算每一页。

### 模板和应用程序的复杂性 {#complexity-of-templates-and-applications}

如果您使用复杂模板，AEM将需要更多时间来渲染页面。 从缓存中提取的页面不受此影响，但在考虑总体响应时间时，页面大小仍然相关。 渲染复杂页面比渲染简单页面轻松花费十倍的时间。

### 公式 {#formula}

使用以下公式，您可以计算AEM解决方案的整体复杂度的估计值：

`complexity = applicationComplexity + ((1-cacheRatio) * templateComplexity)`

根据复杂性，您可以确定发布环境所需的服务器（或CPU核心）数量，如下所示：

`n = (traffic * complexity / 1000 ) * activations`

公式中的变量如下：

<table>
 <tbody>
  <tr>
   <td>流量</td>
   <td>预期的每秒峰值流量。 您可以将其估计为每天的页面点击数除以35000。</td>
  </tr>
  <tr>
   <td>applicationComplexity</td>
   <td><p>对于简单的应用程序，使用1；对于复杂的应用程序，使用2；或者使用中间值：</p>
    <ul>
     <li>1 —— 一个完全匿名、面向内容的网站</li>
     <li>1.1 —— 一个完全匿名的、面向内容的站点，其客户端/目标个性化</li>
     <li>1.5 —— 一个面向内容的网站，其中包含匿名和登录部分，客户端/目标个性化</li>
     <li>1.7 —— 适用于同时具有匿名和登录章节的内容导向型网站、客户端/目标个性化以及一些用户生成的内容</li>
     <li>2 —— 整个站点需要登录的地方，并广泛使用用户生成的内容和各种个性化技术</li>
    </ul> </td>
  </tr>
  <tr>
   <td>cacheRatio</td>
   <td>调度程序缓存中出现的页面百分比。 如果所有页面都来自缓存，则使用1；如果每个页面都由AEM计算，则使用0。</td>
  </tr>
  <tr>
   <td>templateComplecy</td>
   <td>使用1到10之间的值表示模板的复杂性。 数字越高，表示模板越复杂，每页平均组件数为10的站点的值1、平均页面数为40的组件数为5的值10，平均100个以上的组件数为10。</td>
  </tr>
  <tr>
   <td>激活</td>
   <td>每小时平均激活数（将平均大小的页面和资产从作者复制到发布层）除以x，其中x是在系统上对系统处理的其他任务执行的激活数，而没有性能副作用。 您还可以预定义一个悲观的初始值，如x = 100。<br /> </td>
  </tr>
 </tbody>
</table>

如果您有更复杂的网站，您还需要更强大的Web服务器，这样AEM可以在可接受的时间内回答请求。

* 复杂性低于4:· 1024 MB JVM RAM*·中低性能CPU

* 复杂性介于4到8之间：· 2048 MB JVM RAM*·中到高性能CPU

* 高于8的复杂性：· 4096 MB JVM RAM*·高端到高端性能CPU

>[!NOTE]
>
>*除了JVM所需的内存外，还为操作系统保留足够的内存。

## 其他特定用例计算 {#additional-use-case-specific-calculations}

除了计算默认Web应用程序外，您可能需要考虑以下用例的特定因素。 计算值将添加到默认计算中。

### 特定于资产的注意事项 {#assets-specific-considerations}

对数字资产的广泛处理需要优化硬件资源，最相关的因素是图像大小和处理后图像的峰值吞吐量。

分配至少16GB堆并配置 [!UICONTROL DAM更新资产工作流程] ，以使用 [](/help/assets/camera-raw.md) Camera Raw包获取原始图像。

>[!NOTE]
图像的更高吞吐量意味着计算资源需要能够与系统I/O同步，反之亦然。 例如，如果通过导入图像启动工作流，则通过WebDAV上传许多图像可能会导致积压工作流。
对TarPM、数据存储和搜索索引使用单独的磁盘有助于优化系统I/O行为（但是，通常将搜索索引保留在本地是合理的）。

>[!NOTE]
另请参阅《资产 [性能指南》](/help/sites-deploying/assets-performance-sizing.md)。

### 多站点管理器 {#multi-site-manager}

在创作环境上使用AEM MSM时，资源消耗量主要取决于特定的用例。 基本因素包括：

* Live Copy数
* 推广周期
* 要转出的内容树大小
* 转出操作的连接功能

使用代表性内容摘录测试计划的用例可以帮助您提高对资源消耗的了解。 如果您使用计划的吞吐量推断结果，则可以评估AEM MSM所需的额外资源。

还请考虑，如果AEM MSM使用案例占用的资源比计划多，并行工作的作者将发现性能副作用。

### AEM Communities大小调整注意事项 {#aem-communities-sizing-considerations}

包含AEM Communities功能（社区站点）的AEM站点在发布环境中体验到来自站点访客（成员）的高级交互。

社区站点的大小调整注意事项取决于社区成员的预期交互以及页面内容的最佳性能是否更重要。

用户生成的内容(UGC)提交的成员与页面内容分开存储。 虽然AEM平台使用一个将站点内容从作者复制到发布的节点存储，但AEM Communities却为从不复制的UGC使用一个通用存储。

对于UGC存储，必须选择影响所选部署的存储资源提供者(SRP)。
请参阅

* [社区内容存储](/help/communities/working-with-srp.md)
* [推荐的社区拓扑](/help/communities/topologies.md)

