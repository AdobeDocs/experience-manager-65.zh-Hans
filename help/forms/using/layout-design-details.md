---
title: 布局设计
seo-title: 布局设计
description: 布局设计详细信息介绍如何创建用于您的字母或交互式通信的布局。
seo-description: 布局设计详细信息介绍如何创建用于您的字母或交互式通信的布局。
uuid: 469a8a71-88f7-4102-bb02-38ed05390f6c
content-type: reference
topic-tags: correspondence-management, interactive-communications
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: 683809ac-089b-49bf-a72c-67d32439081f
docset: aem65
feature: Correspondence Management
translation-type: tm+mt
source-git-commit: 48726639e93696f32fa368fad2630e6fca50640e
workflow-type: tm+mt
source-wordcount: '2192'
ht-degree: 0%

---


# 布局设计{#layout-design}

XFA表单模板或XDP是用于：

* [书信](/help/forms/using/create-letter.md)
* [交互](/help/forms/using/web-channel-print-channel.md#printchannel) 通信 [的打印渠道](/help/forms/using/interactive-communications-overview.md)

* 布局片段

XDP是在Adobe Forms Designer中设计的。 本文详细介绍了如何设计XDP以创建有效的通信/交互通信，如在何处使用表单域或目标区域以及何时使用布局片段。

## 为字母或Interactive Communications的打印渠道创建布局{#creating-a-layout-for-letters-or-for-interactive-communications-print-channel}

布局定义交互通信的字母/打印渠道的图形布局。 布局可包含“地址”和“引用编号”等典型表单字段。 它还包含表示目标区域的空子表单。 在表单设计器中创建布局，当应用程序专家将其上载到AEM服务器时。 在此处，您可以在创建通信模板或打印交互通信渠道时选择布局。

![设计人员：创建布局](assets/claimsubrogationlayout.png)

按照以下步骤创建用于交互通信的字母/打印渠道的布局：

1. 分析布局并确定在所有页面中重复的内容；通常，页眉和页脚适合此类别。 此内容放置在主控的版面页面上。 其余内容将转到布局的正文页面。 在策略夹克中，徽标和公司地址可以添加到主控的页眉和页脚。 例如，取消通知使用相同的布局。
1. 在设计正文页面时，将页面内容分为多个部分。 每个部分设计为嵌入在布局本身中的子表单或作为片段布局。 如果节包含表，则将节建模为布局片段。
1. 布局的设计方式如下：

   1. 将每个节作为包含该节的所有元素的单独子表单。
   1. 使每个节子表单子表单子表单子表单子表单父子表单。 父子表单的布局设置为“流”，以便在大数据合并到前几节时，允许这些节在下方移动。
   1. 章节主要居住地也可以跨其他版面重复使用。 创建为片段布局。
   1. 章节其他兴趣详细信息仅包含两个放置在另一个下方的元素，可以包含大数据，并设计为流。
   1. 其他部分在特定位置包含元素，因此它们设计为定位布局。
   1. 如果节包含特定位置的元素，并且这些元素包含大量数据，则将节分为子表单。 然后排列子表单以实现所需的行为。
   1. 对于“主要居住区”部分，添加占位符目标区。 此占位符绑定到在字母/交互通信设计时分段主要居住位置。
   1. 将布局(以及使用布局的片段（如果有）)上传到AEM Forms服务器。

### 在XDP模板{#usesubformxdp}中使用子表单

分析创建交互式通信所需的布局后，即可使用Forms Designer在XDP模板中创建子表单。 XDP模板中使用的空白子表单组件导致在交互通信的“打印”渠道中显示目标区域。

>[!NOTE]
>
>将内容添加到交互通信的打印渠道，而不是将内容添加到XDP模板中的子表单组件。 使用[文档片段、图表、图像](create-interactive-communication.md#step2)和布局片段将内容添加到“打印”渠道的目标区域。

执行以下步骤以在XDP模板中使用子表单：

1. 打开Forms设计器，选择&#x200B;**文件** > **新建** > **使用空白表单**，点按&#x200B;**下一步**，然后点按&#x200B;**完成**&#x200B;打开表单以创建模板。

   确保从&#x200B;**Window**&#x200B;菜单中选择&#x200B;**对象库**&#x200B;和&#x200B;**对象**&#x200B;选项。

1. 将&#x200B;**子表单**&#x200B;组件从&#x200B;**对象库**&#x200B;拖放到表单。

   ![组件设计器](assets/subform_component_designer_new.png)

1. 选择子表单，在右侧窗格的&#x200B;**Object**&#x200B;窗口中显示子表单的选项。
1. 选择&#x200B;**子表单**&#x200B;选项卡，然后从&#x200B;**内容**&#x200B;下拉列表中选择&#x200B;**Frued**。 拖动子表单的左端点以调整长度。

   ![流子表单](assets/object_subform_flowed_new.png)

1. 在&#x200B;**绑定**&#x200B;选项卡中：

   1. 在&#x200B;**名称**&#x200B;字段中指定子表单的名称。
   1. 从&#x200B;**数据绑定**&#x200B;下拉列表中选择&#x200B;**无数据绑定**。

1. 同样，从左窗格中选择根子表单。

   ![根子表单](assets/root_subform_designer_new.png)

1. 选择&#x200B;**子表单**&#x200B;选项卡，然后从&#x200B;**内容**&#x200B;下拉列表中选择&#x200B;**Frued**。 在&#x200B;**绑定**&#x200B;选项卡中：

   1. 在&#x200B;**名称**&#x200B;字段中指定子表单的名称。
   1. 从&#x200B;**数据绑定**&#x200B;下拉列表中选择&#x200B;**无数据绑定**。

   重复步骤2到5，向XDP模板添加更多子表单。 仅在创作交互通信时，将[文本、文档片段、图像和图表](create-interactive-communication.md#step2)添加到目标区域。

1. 选择&#x200B;**文件** > **另存为**&#x200B;以将文件保存到本地文件系统中：

   1. 导览至要保存文件的位置，并指定XDP模板的名称。
   1. 从&#x200B;**另存为类型**&#x200B;下拉列表中选择&#x200B;**.xdp**。

   1. 点按&#x200B;**保存**。

### 在XDP模板{#use-image-field-component-in-an-xdp-template}中使用图像字段组件

使用XDP模板中的图像字段或子表单组件，在创作交互通信时添加图像。

>[!NOTE]
>
>将图像添加到交互通信的打印渠道，而不是将图像添加到XDP模板中的图像字段或子表单组件。 有关详细信息，请参阅[向交互通信添加内容](../../forms/using/create-interactive-communication.md#step2)。

执行以下步骤以在XDP模板中使用图像字段组件：

1. 将&#x200B;**图像字段**&#x200B;组件从&#x200B;**对象库**&#x200B;拖放到表单中。
1. 选择子表单，在右侧窗格的&#x200B;**Object**&#x200B;窗口中显示子表单的选项。
1. 在&#x200B;**绑定**&#x200B;选项卡中：

   1. 在&#x200B;**名称**&#x200B;字段中指定图像字段的名称。
   1. 从&#x200B;**数据绑定**&#x200B;下拉列表中选择&#x200B;**无数据绑定**。

### 为布局片段{#xdplayoutfragments}创建XDP模板

使用Forms Designer中的表组件创建布局片段，然后在创作交互通信的打印渠道时使用它们创建表。 使用布局片段创建表可确保在使用打印渠道自动生成Web渠道时，表内容保留结构。

>[!NOTE]
>
>在表单元格中输入文本，或仅在创作交互通信时创建与表单数据模型对象](create-interactive-communication.md#step2)的绑定。[

要使用Forms Designer在XDP模板中使用表组件，请执行以下步骤：

1. 将&#x200B;**Table**&#x200B;组件从&#x200B;**对象库**&#x200B;拖放到表单中。
1. 在&#x200B;**插入表**&#x200B;对话框中：

   1. 指定表的行数和列数。
   1. 选中&#x200B;**在表**&#x200B;中包含表头行复选框，以包含表头的行。
   1. 点按&#x200B;**确定**。

1. 点按表名称旁边左侧窗格中的&#x200B;**+**，右键单击标题和其他行中包含的单元格名称，然后选择&#x200B;**重命名对象**&#x200B;以重命名表单元格。
1. 单击&#x200B;**设计视图**&#x200B;中的表标题文本字段，并对其重命名。
1. 将&#x200B;**文本字段**&#x200B;组件从&#x200B;**对象库**&#x200B;拖放到&#x200B;**设计视图**&#x200B;中的每个表单元格。 执行此步骤，以便在创作交互通信时能够将表单元格与表单数据模型对象绑定。

   ![表中的文本字段](assets/text_fields_table_new.png)

1. 从左窗格中选择行的名称，然后选择&#x200B;**Object** > **Binding** > **Repeat Row for Each Data Item**。 执行此步骤可确保，如果在此行的表单元格之间创建了具有集合类型的表单数据模型对象的绑定，则会自动为数据库中可用的每个数据项重复表行。

   在表单元格中输入文本，或仅在创作交互通信时创建与表单数据模型对象](create-interactive-communication.md#step2)的绑定。[

1. 选择&#x200B;**文件** > **另存为**&#x200B;以将文件保存到本地文件系统中：

   1. 导览至要保存文件的位置，并指定XDP模板的名称。
   1. 从&#x200B;**另存为类型**&#x200B;下拉列表中选择&#x200B;**.xdp**。

   1. 点按&#x200B;**保存**。

### 将XDP模板上传到AEM Forms服务器{#uploadxdptemplate}

使用Forms Designer创建XDP模板后，必须将其上传到AEM Forms服务器，以便该模板在创建交互通信时可用。

1. 选择&#x200B;**Forms** > **Forms和文档**。
1. 点按&#x200B;**创建** > **文件上载**。
1. 导航到XDP模板在本地文件系统上的位置，然后点按&#x200B;**打开**&#x200B;将XDP模板导入AEM Forms服务器。

## 使用模式{#using-schema}

您可以在布局或布局片段中使用模式，但它不是必需的。 如果您使用模式，请确保：

1. 布局和字母/交互式通信中使用的所有片段布局与字母/交互式通信使用相同的模式。
1. 填充数据所需的所有字段都绑定到模式。

## 创建可重复域{#creating-relatable-fields}

默认情况下，所有字段都被视为可与各种其他数据源相关。 如果您的布局包含任何不能与数据源相关的字段，请用“_int”（内部）后缀命名该字段；例如，pageCount_int。

可重复字段必须：

* 是XFA &lt;field>或&lt;exclGroup>
* 具有XFA绑定引用
* 如果是&lt;exclGroup>，则它必须至少具有一个子单选按钮字段；否则，无法确定其值类型

可重复字段必须：

* 有名字

可重复字段不得：

* 在其名称中包含“_int”后缀
* 具有设置为“none”的绑定
* 是&lt;exclGroup>元素的子项

只要可靠字段符合上述条件，它就可以位于布局的任何位置和任何嵌套深度。 您可以在主控页面中使用可发布的字段。

字段的布局配置比目标区域子表单更灵活；但是，它们与单个值类型绑定。 您可以使字段变大，或将其设置为固定的宽度和高度，依此类推。 解析的模块或规则结果将推入字段。

## 决定何时使用子表单和文本字段{#deciding-when-to-use-subforms-and-text-nbsp-fields}

如果要在自上而下的垂直流布局（多个段落或图像）中捕获多个模块内容，请使用子表单。 您的布局必须处理子表单的高度增长以容纳其内容这一事实。 如果您无法确定与子表单/目标关联的内容的长度永远不会超出布局中为子表单保留的空间，请在流子表单容器中将子表单创建为子表单。 此过程可确保子表单下方的布局对象随着子表单的增长而向下流动。

如果要将模块数据或数据字典元素数据捕获到布局的模式中（因为字段绑定到数据），或在主控页面上显示模块内容，请使用字段。 请记住，主控页面中的内容不能与正文页面内容一起流动，因此您必须确保将图像字段用作标题徽标。 此表提供了更多用于决定何时在布局中使用子表单或字段的标准。

<table>
 <tbody>
  <tr>
   <td><p><strong>在</strong></p> </td>
   <td><p><strong>在</strong></p> </td>
  </tr>
  <tr>
   <td><p>它包含元素的组合，如姓和名</p> </td>
   <td><p>它包含一个元素，如策略编号。</p> </td>
  </tr>
  <tr>
   <td><p>它包含多个段落</p> </td>
   <td><p>文本换行并对齐</p> </td>
  </tr>
  <tr>
   <td><p>重复、可选和条件数据组绑定到子表单，以降低使用脚本实现相同结果时可能发生的设计错误风险</p> </td>
   <td><p>您的组织的徽标和地址等元素显示在信件/交互通信的所有页面上。 在这种情况下，请为这些元素创建表单域，并将其放置到主控页面。 如果将字段绑定设置为“无数据绑定”，则无字段在字母/交互式通信编辑器中显示为可重复字段。 如果要将某些类型的内容与这些字段关联，则它们必须具有绑定。</p> <p>如果您的公司地址包含多行数据，请使用带有“允许多行”选项的文本字段来表示版面上的地址。</p> <p>如果将文本字段的数据类型设置为纯文本，则使用模块输出的纯文本版本代替富文本版本（将放弃所有格式）。 要保留格式，请将文本字段的数据类型设置为富文本。</p> </td>
  </tr>
  <tr>
   <td><p>文本已排列</p> </td>
   <td><p>文本字段和图像字段用于主控页面。 主控页面不能将子表单用作目标区域。</p> </td>
  </tr>
  <tr>
   <td><p>对象进行分组和组织，无需将子表单绑定到数据元素</p> </td>
   <td><p> </p> </td>
  </tr>
  <tr>
   <td><p>子表单中有一个文本字段。 子表单可以扩展，但不会覆盖布局上子表单下的其他对象。</p> </td>
   <td><p>您需要在后期流程中轻松访问其数据。</p> </td>
  </tr>
 </tbody>
</table>

## 设置重复元素{#setting-up-repetitive-elements}

当您的组织的徽标和地址等元素出现在信件/交互通信的所有页面上时，请为这些元素创建表单域并将其放置到主控页面。 为这些字段使用名称（字段名称）绑定。

## 指定服务器渲染格式{#specify-the-server-nbsp-render-format}

将布局的服务器渲染格式用于动态XML表单；否则，任何基于此布局的字母/交互通信都无法正确呈现。 默认情况下，Forms Designer中的服务器渲染格式设置为“动态XML表单”。 要确保使用正确的格式：

* 在“设计器”中，单击&#x200B;**文件** > **表单属性** > **默认值**，并确保将“PDF渲染/格式”设置设置为“动态XML表单”。

