---
title: 布局设计
seo-title: Layout Design
description: 布局设计详细信息说明如何创建用于信件或交互式通信的布局。
seo-description: Layout Design Details explains how you can create layouts to be used for your letters or Interactive Communications.
uuid: 469a8a71-88f7-4102-bb02-38ed05390f6c
content-type: reference
topic-tags: correspondence-management, interactive-communications
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: 683809ac-089b-49bf-a72c-67d32439081f
docset: aem65
feature: Correspondence Management
exl-id: 9e1b0067-c7dc-4bbb-a209-d674592be858
source-git-commit: 9d142ce9e25e048512440310beb05d762468f6a2
workflow-type: tm+mt
source-wordcount: '2170'
ht-degree: 0%

---

# 布局设计{#layout-design}

XFA表单模板或XDP是用于以下项的模板：

* [书信](/help/forms/using/create-letter.md)
* [打印渠道](/help/forms/using/web-channel-print-channel.md#printchannel) 之 [交互式通信](/help/forms/using/interactive-communications-overview.md)

* 布局片段

在AdobeForms Designer中设计了XDP。 本文详细介绍了如何设计您的XDP以创建有效的对应/交互式通信，例如使用表单字段或目标区域的位置以及何时使用布局片段。

## 为信件或交互式通信的打印渠道创建布局 {#creating-a-layout-for-letters-or-for-interactive-communications-print-channel}

布局定义交互式通信的信件/打印渠道的图形布局。 布局可包含典型表单字段，如“Address”和“Reference Number”。 它还包含表示目标区域的空子表单。 在表单设计器中创建布局，完成后，应用程序专员会将其上传到AEM服务器。 从那里，您可以在创建交互式通信的通信模板或打印渠道时选择布局。

![设计器：创建布局](assets/claimsubrogationlayout.png)

按照以下步骤为交互式通信的书信/打印渠道创建布局：

1. 分析布局并确定所有页面中重复的内容；通常页眉和页脚适合此类别。 此内容放置在布局的主控页面上。 其余内容将转到布局的正文页面。 在保单夹克中，可以将徽标和公司地址添加到主控页眉和页脚。 例如，取消通知使用相同的布局。
1. 设计正文页面时，将页面内容划分为多个部分。 每个部分都设计为嵌入到布局本身的子表单或片段布局。 如果节包含表，则将节建模为布局片段。
1. 布局可按如下方式设计：

   1. 将每个节设置为包含该节所有元素的单独子表单。
   1. 将每个部分子表单设为相同父子表单的子表单。 父子表单的布局设置为“流”，以便在前面的部分中合并大数据时允许部分下移。
   1. 区段主要居住地也可以跨其他布局重复使用。 将其创建为片段布局。
   1. “其他感兴趣详细信息”部分仅包含两个元素，它们彼此放在下方，可以包含大型数据，并且按流程设计。
   1. 其他部分包含位于特定位置的元素，因此它们被设计为定位布局。
   1. 如果分区包含位于特定位置的元素，并且这些元素包含大量数据，则将分区划分为子表单。 然后排列子表单以实现所需的行为。
   1. 对于“主要居所”部分，请添加占位符目标区域。 在设计信件/交互式通信时，此占位符绑定到片段主要居所。
   1. 将布局（以及使用该布局的片段，如果有）上传到AEM Forms服务器。

### 在XDP模板中使用子表单 {#usesubformxdp}

分析创建交互式通信所需的布局后，您可以使用Forms Designer在XDP模板中创建子表单。 XDP模板中使用的空白子表单组件导致在交互式通信的打印渠道中显示目标区域。

>[!NOTE]
>
>将内容添加到交互式通信的打印渠道，而不是将内容添加到XDP模板中的子表单组件。 使用以下方式将内容添加到打印渠道的目标区域 [文档片段、图表、图像](create-interactive-communication.md#step2)和布局片段。

执行以下步骤以在XDP模板中使用子表单：

1. 打开Forms Designer，选择 **文件** > **新** > **使用空白表单**，点按 **下一个**，然后点按 **完成** 打开表单以创建模板。

   确保 **对象库** 和 **对象** 从以下位置选择选项 **窗口** 菜单。

1. 拖放 **子表单** 组件来自 **对象库** 到窗体。

   ![组件设计器](assets/subform_component_designer_new.png)

1. 选择子表单，以在中显示子表单的选项 **对象** 窗口。
1. 选择 **子表单** 选项卡并选择 **已流动** 从 **内容** 下拉列表。 拖动子表单的左端点可调整长度。

   ![已流转的子表单](assets/object_subform_flowed_new.png)

1. 在 **绑定** 选项卡：

   1. 在中指定子表单的名称 **名称** 字段。
   1. 选择 **无数据绑定** 从 **数据绑定** 下拉列表。

1. 同样，从左窗格中选择根子表单。

   ![根子表单](assets/root_subform_designer_new.png)

1. 选择 **子表单** 选项卡并选择 **已流动** 从 **内容** 下拉列表。 在 **绑定** 选项卡：

   1. 在中指定子表单的名称 **名称** 字段。
   1. 选择 **无数据绑定** 从 **数据绑定** 下拉列表。

   重复步骤2至5以向XDP模板添加更多子表单。 添加 [文本、文档片段、图像和图表](create-interactive-communication.md#step2) 仅在创作交互式通信时到达目标区域。

1. 选择 **文件** > **另存为** 将文件保存在本地文件系统中：

   1. 导航到保存文件的位置，并指定XDP模板的名称。
   1. 选择 **.xdp** 从 **另存为类型** 下拉列表。

   1. 点按&#x200B;**保存**。

### 在XDP模板中使用图像字段组件 {#use-image-field-component-in-an-xdp-template}

在创作交互式通信时，使用XDP模板中的图像字段或子表单组件并添加图像。

>[!NOTE]
>
>将图像添加到交互式通信的“打印”渠道，而不是将图像添加到XDP模板中的“图像字段”或“子表单”组件。 有关更多信息，请参阅 [向交互式通信添加内容](../../forms/using/create-interactive-communication.md#step2).

执行以下步骤以在XDP模板中使用图像字段组件：

1. 拖放 **图像字段** 组件来自 **对象库** 到窗体。
1. 选择子表单，以在中显示子表单的选项 **对象** 窗口。
1. 在 **绑定** 选项卡：

   1. 在中指定图像字段的名称 **名称** 字段。
   1. 选择 **无数据绑定** 从 **数据绑定** 下拉列表。

### 为布局片段创建XDP模板 {#xdplayoutfragments}

使用Forms Designer中的表组件创建布局片段，然后在创作交互式通信的打印渠道时使用这些片段创建表。 使用布局片段创建表可确保在使用打印渠道自动生成Web渠道时，表内容保持结构。

>[!NOTE]
>
>在表单元格中输入文本或 [创建与表单数据模型对象的绑定](create-interactive-communication.md#step2) 仅在创作交互式通信时。

执行以下步骤，使用Forms Designer在XDP模板中使用表组件：

1. 拖放 **表** 组件来自 **对象库** 到窗体。
1. 在 **插入表** 对话框：

   1. 指定表的行数和列数。
   1. 选择 **在表中包含标题行** 用于包含表格标题的行的复选框。
   1. 点按 **确定**.

1. 点按 **+** 在表名称旁边的左窗格中，右键单击标题和其他行中包含的单元格名称，然后选择 **重命名对象** 重命名表单元格。
1. 单击中的表头文本字段 **设计视图** 并为其重新命名。
1. 拖放 **文本字段** 组件来自 **对象库** 至中的每个表单元格 **设计视图**. 执行此步骤，以便在创作交互式通信时能够将表格单元格与表单数据模型对象绑定。

   ![表格中的文本字段](assets/text_fields_table_new.png)

1. 从左窗格中选择行的名称，然后选择 **对象** > **绑定** > **对每个数据项重复一行**. 执行此步骤以确保如果在此行的表单元格与集合类型的表单数据模型对象之间创建了绑定，则对于数据库中可用的每个数据项，表行都会自动重复。

   在表单元格中输入文本或 [创建与表单数据模型对象的绑定](create-interactive-communication.md#step2) 仅在创作交互式通信时。

1. 选择 **文件** > **另存为** 将文件保存在本地文件系统中：

   1. 导航到保存文件的位置，并指定XDP模板的名称。
   1. 选择 **.xdp** 从 **另存为类型** 下拉列表。

   1. 点按&#x200B;**保存**。

### 将XDP模板上传到AEM Forms服务器 {#uploadxdptemplate}

使用Forms Designer创建XDP模板后，必须将其上传到AEM Forms服务器，以便该模板在创建交互式通信时可用。

1. 选择 **Forms** > **Forms和文档**.
1. 点按 **创建** > **文件上传**.
1. 导航到XDP模板在本地文件系统中的位置，然后点按 **打开** 以将XDP模板导入AEM Forms服务器。

## 使用架构 {#using-schema}

您可以在布局或布局片段中使用架构，但不是必需的。 如果使用架构，请确保满足以下条件：

1. 信件/交互式通信中使用的布局和所有片段布局使用与信件/交互式通信相同的架构。
1. 需要使用数据填充的所有字段都将绑定到架构。

## 创建可关联字段 {#creating-relatable-fields}

默认情况下，所有字段都被视为可与其他各种数据源相关联。 如果您的布局包含任何与数据源不可相关的字段，请将该字段命名为“_int”（内部）后缀；例如pageCount_int。

可关联字段必须：

* 是XFA &lt;field> 或 &lt;exclgroup>
* 具有XFA绑定引用
* 如果它是 &lt;exclgroup>，必须至少有一个子单选按钮字段；否则，无法确定其值类型

可关联字段必须：

* 有一个名称

可关联字段不得：

* 在其名称中包含“_int”后缀
* 已将绑定设置为“none”
* 是某人的孩子 &lt;exclgroup> 元素

只要可相关字段满足上述标准，它就可以在布局中的任何位置和任何嵌套深度。 您可以在主控的页面中使用可关联的字段。

字段的布局配置比目标区域子表单更灵活；但是，它们与单个值类型相关联。 您可以使字段变大，或将其设置为固定的宽度和高度，等等。 已解析的模块或规则结果将被推送到字段中。

## 决定何时使用子表单和文本字段 {#deciding-when-to-use-subforms-and-text-nbsp-fields}

如果要以自上而下的垂直流布局捕获多个模块内容（多个段落或图像），请使用子表单。 您的布局必须处理子表单高度增大以适应其内容的事实。 如果无法确定与子表单/目标关联的内容长度永远不会超过为版面中的子表单保留的空间，请创建子表单作为流式子表单容器中的子表单。 此过程可确保子表单下的布局对象随着子表单的增长向下流动。

如果要将模块数据或数据字典元素数据捕获到布局的架构中（因为字段已绑定到数据），或者要在主控页面上显示模块内容，请使用字段。 请记住，主控页面中的内容不能与正文页面内容一起流动，因此您必须确保将图像字段用作页眉徽标。 此表提供了更多用于确定何时在布局中使用子表单或字段的标准。

<table>
 <tbody>
  <tr>
   <td><p><strong>在以下情况下使用子表单：</strong></p> </td>
   <td><p><strong>在以下情况下使用文本字段：</strong></p> </td>
  </tr>
  <tr>
   <td><p>它包含元素的组合，如姓氏和名字</p> </td>
   <td><p>它包含单个元素，如策略编号。</p> </td>
  </tr>
  <tr>
   <td><p>它包括多个段落</p> </td>
   <td><p>文本将换行和对齐</p> </td>
  </tr>
  <tr>
   <td><p>重复、可选和条件数据组绑定到子表单，以降低在使用脚本获得相同结果时可能发生设计错误的风险</p> </td>
   <td><p>组织徽标和地址等元素会显示在信件/交互式通信的所有页面上。 在这种情况下，请为这些元素创建表单字段，并将其放置在主控页面上。 如果将字段绑定设置为“无数据绑定”，则无字段在信件/交互式通信编辑器中显示为可关联字段。 如果要将某些类型的内容与这些字段相关联，这些字段必须具有绑定。</p> <p>如果您的公司地址包含多行数据，请使用包含“允许多行”选项的文本字段来表示布局上的地址。</p> <p>如果文本字段的数据类型设置为纯文本，则会使用模块输出的纯文本版本，而不是富文本版本（丢弃所有格式）。 要保留格式，请将文本字段的数据类型设置为富文本。</p> </td>
  </tr>
  <tr>
   <td><p>文本已排出</p> </td>
   <td><p>文本字段和图像字段在主控页面上使用。 主控页面不能使用子表单作为目标区域。</p> </td>
  </tr>
  <tr>
   <td><p>对对象进行分组和组织，而无需将子表单绑定到数据元素</p> </td>
   <td><p> </p> </td>
  </tr>
  <tr>
   <td><p>子表单内有一个文本字段。 子表单可以增大，并且不会覆盖版面中该子表单下的其他对象。</p> </td>
   <td><p>在发布过程中，您需要轻松访问其数据。</p> </td>
  </tr>
 </tbody>
</table>

## 设置重复要素 {#setting-up-repetitive-elements}

当信件/交互式通信的所有页面上出现诸如贵组织的徽标和地址等元素时，请为这些元素创建表单字段，并将其放置在主控页面上。 为这些字段使用名称（字段名称）绑定。

## 指定服务器渲染格式 {#specify-the-server-nbsp-render-format}

使用布局的服务器渲染格式生成动态XML表单；否则，任何基于此布局的字母/交互式通信都将无法正确渲染。 默认情况下，Forms Designer中的服务器渲染格式设置为“动态XML表单”。 要确保使用正确的格式，请执行以下操作：

* 在Designer中单击 **文件** > **表单属性** > **默认值**，并确保PDF渲染/格式设置已设置为动态XML表单。
