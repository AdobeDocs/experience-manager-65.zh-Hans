---
title: 交互通信中的文本
seo-title: 交互通信中的文本
description: '创建和编辑要在交互通信中使用的文本文档片段 — 文本是用于构建交互通信的四种类型文档片段之一。 另外三个是条件、列表和布局片段。  '
seo-description: 创建和编辑要在Interactive Communications中使用的文本文档片段
uuid: fdac3dd8-c6d0-418e-b969-fc791b7bd509
topic-tags: interactive-communications
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: f04050f8-42de-4ef0-b6ed-145d59bbffce
docset: aem65
feature: 交互式通信
translation-type: tm+mt
source-git-commit: 48726639e93696f32fa368fad2630e6fca50640e
workflow-type: tm+mt
source-wordcount: '2495'
ht-degree: 0%

---


# 交互通信中的文本{#texts-in-interactive-communications}

## 概述 {#overview}

文本文档片段由一个或多个文本段落组成。 段落可以是静态的或动态的。 动态段落可能包含表单数据模型属性和变量。 您还可以应用规则并在文本文档片段内重复。 例如，问候中的客户名称可以是表单数据模型(FDM)属性，其值在运行时可用。 通过更改这些值，可以使用相同的交互式通信为使用代理UI的不同客户准备交互式通信。

Interactive Communication中的文本文档片段支持以下类型的动态数据：

* **数据模型对象**:数据属性使用后端数据源。
* **基于规则的内容**:文本中根据规则显示或隐藏的部分内容。规则也可以基于表单数据模型属性和变量。
* **变量**:在文本文档片段中，变量不绑定到后端数据源。代理在准备交互式通信以将其提交到帖子进程时填充/选择变量中的值或将变量绑定到数据源。
* **重复**:您的交互式通信中可能包含动态信息，例如信用卡对帐单中的交易记录，其发生次数可能会随每个生成的交互式通信而不断变化。使用重复，您可以格式化和构造此类动态信息。 有关详细信息，请参阅[内联条件和重复](https://helpx.adobe.com/experience-manager/6-3/forms/using/cm-inline-condition.html)。

## 创建文本{#createtext}

1. 选择&#x200B;**[!UICONTROL Forms]** > **[!UICONTROL 文档片段]**。
1. 选择&#x200B;**[!UICONTROL 创建]** > **[!UICONTROL 文本]**。
1. 指定以下信息：

   * **[!UICONTROL 标题]**:（可选）输入文本文档片段的标题。标题不需要唯一，并且可以包含特殊字符和非英语字符。 文本由其标题（如果可用）引用，如缩览图和属性中。
   * **[!UICONTROL 名称]**:文本在文件夹中的唯一名称。任何状态中都不能存在两个文档片段(文本、条件或列表)，并且文件夹中的名称相同。 在“名称”字段中，您只能输入英语字符、数字和连字符。 系统会根据标题字段自动填充名称字段。 在“标题”字段中输入的特殊字符、空格、数字和非英文字符将替换为“名称”字段中的连字符。 尽管“标题”字段中的值会自动复制到“名称”中，但您可以编辑该值。

   * **[!UICONTROL 描述]**:键入文本的描述。
   * **[!UICONTROL 表单数据模型]**:（可选）选择“表单数据模型”单选按钮以基于表单数据模型创建文本。选择“表单数据模型”单选按钮时，将显示&#x200B;**[!UICONTROL 表单数据模型]**&#x200B;字段。 浏览并选择表单数据模型。 在为交互式通信创建文本和条件时，请确保您使用的数据模型与要在交互式通信中使用的数据模型相同。 有关表单数据模型的详细信息，请参阅[数据集成](/help/forms/using/data-integration.md)。

   * **[!UICONTROL 标记]**:（可选）要创建自定义标记，请在文本字段中输入值，然后按Enter。保存此文本时，将创建新添加的标记。

1. 点按&#x200B;**[!UICONTROL 下一步]**。

   创建文本页面。 如果您选择创建基于表单数据模型的文本，则表单数据模型属性将显示在左窗格中。

1. 在文本中键入内容，然后使用以下选项在文本中设置格式、设置条件并插入表单数据模型属性和变量：

   * [表单数据模型](#formdatamodel)
   * [变量](#variables)
   * [规则编辑器](#rules)
   * [格式选项](#formatting)

      * [从其他应用程序复制粘贴格式文本](#paste)

      * [高亮部分文本](#highlight)
   * [重复](/help/forms/using/cm-inline-condition.md)
   * [特殊字符](#special)
   * [搜索和替换文本](#searching)
   * [键盘快捷键](/help/forms/using/keyboard-shortcuts.md)

   >[!NOTE]
   >
   >您可以在文本编辑器中使用@符号添加表单数据模型元素、数据字典元素和变量。 在文本编辑器中输入一个以@开头的字符串时，将搜索所有“数据模型”元素、“数据字典”元素和变量，并显示包含搜索的字符串的元素或变量。 您可以在搜索结果中导航并选择元素或变量。 如果没有匹配结果，则显示&#x200B;*找不到匹配结果*&#x200B;消息。

1. 点按&#x200B;**[!UICONTROL 保存]**。

   将创建文本。 现在，您可以在创建交互式通信时继续将文本用作构建块。

## 编辑文本 {#edittext}

您可以使用以下步骤编辑现有文本文档片段。 您还可以选择在交互式通信编辑器中编辑文本文档片段。

1. 选择&#x200B;**[!UICONTROL Forms]** > **[!UICONTROL 文档片段]**。
1. 导航到文本文档片段并选择它。
1. 点按&#x200B;**[!UICONTROL 编辑]**。
1. 进行所需的更改。 有关文本中选项的详细信息，请参阅[创建文本](#createtext)。
1. 点按&#x200B;**[!UICONTROL 保存]**，然后点按&#x200B;**[!UICONTROL 关闭]**。

## 使用表单文档模型属性{#formdatamodel}个性化文本数据片段

您可以通过插入表单文档模型属性来个性化文本数据片段。 通过将表单收件人模型属性插入文本中，您可以在预览交互式通信时从关联的数据源中提取和填充特定于交互的数据。 有关表单数据模型的详细信息，请参阅[AEM Forms Data Integration](/help/forms/using/data-integration.md)。

如果在创建文本时指定了表单数据模型，则表单数据模型中的属性将显示在文本编辑器的左侧窗格中。 对于文本文档片段以及包含该片段的交互通信，指定的表单数据模型应相同。

![insertfdmelettext](assets/insertfdmelementtext.png)

* 要将表单数据模型属性插入文本中，请将光标放在要插入该属性的位置，然后点按左窗格中的&#x200B;**[A]**&#x200B;属性，然后点按&#x200B;**[!UICONTROL [B]添加选定的]**。 您也只需多次点按属性，即可在&#x200B;**[C]**&#x200B;光标位置插入该属性。 表单数据模型属性以褐色背景颜色突出显示。

或者，也可以使用文本编辑器中的@符号搜索和添加表单数据模型属性。 将光标放在要插入属性的位置。 键入@，后跟搜索字符串。 对文档片段中可用的所有表单数据模型属性和变量执行搜索操作。 将检索包含搜索字符串的属性或变量，并将其显示为下拉列表。 在搜索结果中导航，然后单击要在光标位置插入的属性。 按Esc可隐藏搜索结果。

* 要允许代理在[使用代理UI准备和发送交互式通信](/help/forms/using/prepare-send-interactive-communication.md)时编辑代理UI中表单数据模型属性的值，请点按该属性的&#x200B;**[D]**&#x200B;锁定图标，并确保该属性处于未锁定状态。 属性的默认状态已锁定，代理无法在代理UI中编辑属性。

您还可以使用表单数据模型属性来构建用于显示或隐藏部分内容的规则。 有关详细信息，请参阅[在文本](#rules)中创建规则。

## 在文本文档片段{#variables}中创建和使用变量

变量是可在创建交互式通信时绑定的占位符。 变量可以绑定到表单数据模型属性或文本片段。 也可以保留变量供代理填充。

在以下情况下，可以使用变量代替表单数据模型属性：

* 文本文档片段将用于多个交互式通信，其中不同的交互式通信需要不同的绑定。
* 文本文档片段创建时没有表单数据模型。 您可以插入变量，然后在创建交互通信时将它们绑定到表单数据模型属性。
* 您需要绑定和检索文本文档片段中的文本。 只有那些文本文档片段可以绑定到变量中，不应具有其中没有变量。

在创建或编辑文本文档片段时，您可以创建和插入变量。 您创建的变量会显示在代理UI的“数据”选项卡中。 代理在[使用代理UI](/help/forms/using/prepare-send-interactive-communication.md)准备和发送交互式通信时指定变量的值。

### 创建变量{#createvariables}

1. 在左窗格中，点按&#x200B;**[!UICONTROL 变量]**。

   将出现“变量”窗格。

   ![变量窗格](assets/variablespane.png)

1. 点按&#x200B;**[!UICONTROL 创建]**。

   此时将显示“创建变量”窗格。

1. 输入以下信息，然后点按&#x200B;**[!UICONTROL 创建]**:

   * **[!UICONTROL 名称]** :变量的名称。
   * **[!UICONTROL 描述]** :（可选）输入有关变量的说明。
   * **[!UICONTROL 类型]** :选择变量的类型：字符串、数字、布尔值或日期。
   * **[!UICONTROL 仅允许特定值]** :对于字符串和数字变量，您可以确保代理从代理UI中占位符的特定值集中进行选择。要指定值集，请选择此选项，然后指定在&#x200B;**[!UICONTROL Values]**&#x200B;字段中允许的以逗号分隔的值。

1. 点按&#x200B;**[!UICONTROL 创建]**。

   变量将创建并列在“变量”窗格中。

1. 要在文本中插入变量，请将光标放在适当的位置，选择变量，然后点按&#x200B;**[!UICONTROL 添加选定项]**。

   ![变量已插入](assets/variableinserted.png)

   变量以淡蓝色背景色高亮显示，而表单数据模型属性以棕色高亮显示。

   或者，也可以使用文本编辑器中的@符号搜索和添加变量。 将光标放在要插入变量的位置。 键入@，后跟搜索字符串。 对文档片段中可用的所有表单数据模型属性和变量执行搜索操作。 将检索包含搜索字符串的属性和变量，并将其显示为下拉列表。 在搜索结果中导航，然后单击要在光标位置插入的变量。 按Esc可隐藏搜索结果。

1. 点按&#x200B;**[!UICONTROL 保存]**。

## 在文本{#rules}中创建规则

使用文本中的规则编辑器，您可以创建规则，以根据&#x200B;**预设条件**&#x200B;显示或隐藏文本或内容片段的字符串。 这些条件可以基于：

* 字符串
* 数字
* 数学表达式
* 日期
* 关联表单数据模型的属性
* 在文本中创建的任何变量

### 在文本{#create-rules-in-text}中创建规则

1. 在创建或编辑文本时，选择要使用规则进行条件化的文本字符串、段落或内容。

   ![selectcontentapplyrule](assets/selectcontentapplyrule.png)

1. 点按&#x200B;**[!UICONTROL 创建规则]**。

   此时将显示创建规则对话框。 除了字符串、数字、数学表达式和日期之外，规则编辑器中还提供以下内容，用于创建规则语句：

   * 关联表单数据模型的属性
   * 您可能已创建的任何变量

   选择要评估的相应选项。

   ![](assets/ruleeditor.png) ![规则编辑器规则编辑器fdm](assets/ruleeditorfdm.png)

   >[!NOTE]
   >
   >不支持创建规则以条件化和显示文本的集合属性。

1. 选择相应的运算符以计算规则，如“等于”、“包含”和“开始为”。

   ![ruleeditorfdm-1](assets/ruleeditorfdm-1.png)

1. 插入评估表达式、值、数据模型属性或变量。

   ![根据FDM的源收件人，如果文本的位置为US，则显示所选文本的规则](assets/ruleeditorfdm-1-1.png)

   根据FDM的源收件人，如果文本的位置为US，则显示所选文本的规则

   * 在创建或编辑规则时，您还可以点按![icon_resize](assets/icon_resize.png)(Resize)以展开“创建规则/编辑规则”对话框。 扩展的全窗口对话框允许您拖放表单数据模型属性和变量以构建规则。 再次点按调整大小以返回“创建规则”对话框。
   * 您还可以在规则中创建多个条件。
   * 您还可以创建重叠规则，在重叠规则中，规则将应用于已应用规则的内容的一部分。

1. 点按&#x200B;**[!UICONTROL 完成]**。

   将应用规则。 应用规则的文本或内容将以绿色突出显示。 当您将鼠标悬停在高亮的左手柄上时，将显示应用的规则。

   ![appliedruletext](assets/appliedruletext.png)

   单击所应用规则的左侧句柄后，您将获得编辑或删除规则的选项。

## 设置文本格式{#formatting}

在创建或编辑文本时，工具栏会根据您选择要进行的编辑类型而改变：段落、对齐方式或列表：

![选择工具栏类型](do-not-localize/toolbarselection.png)

选择工具栏类型：段落、对齐方式或列表

![字体编辑工具栏](do-not-localize/paragraphtoolbar.png)

字体编辑工具栏

![对齐工具栏](assets/alignmenttoolbar.png)

对齐工具栏

![列表工具栏](do-not-localize/listingtoolbar.png)

列表工具栏

### 突出显示/强调部分文本{#highlight}

要高亮\强调可编辑的文档片段中的部分文本，请选择文本并点按高亮颜色。

![textbackgroundcolorappled-1](assets/textbackgroundcolorapplied-1.png)

您可以直接点按“基本颜色”调板中显示的基本颜色`**[A]**`，或使用滑块`**[B]**`选择&#x200B;**后点按**&#x200B;以选择相应的颜色阴影。

或者，您也可以转到“高级”选项卡，选择适当的“色相”、“亮度”和“饱和度”`**[C]**`以创建精确的颜色，然后点按“选择”`**[D]**`以应用颜色以高亮显示文本。

![textbackgroundcolor-2](assets/textbackgroundcolor-2.png)

### 粘贴格式化文本{#paste}

要重复使用其他应用程序中存在的多个文本段落之一（如从Microsoft® Word或HTML页面），请将文本复制并粘贴到文本编辑器中。 复制的文本的格式将保留在文本编辑器中。

您可以在可编辑的文本文档片段中复制和粘贴一个或多个文本段落。 例如，您的Microsoft® Word文档可能具有可接受居住验证的项目符号列表，如下所示：

![pastetextmsword-2](assets/pastetextmsword-2.png)

您可以直接将文本从Microsoft® Word文档复制并粘贴到可编辑的文本文档片段。 项目符号列表、字体和文本颜色等格式将保留在文本文档片段中。

![pastetexteditablemodule-1](assets/pastetexteditablemodule-1.png)

>[!NOTE]
>
>但是，粘贴文本的格式设置有一些[限制](https://helpx.adobe.com/aem-forms/kb/cm-copy-paste-text-limitations.html)。

## 在文本{#special}中插入特殊字符

如果需要，请在文档片段中插入特殊字符。 例如，可以使用“特殊字符”调板插入：

* 货币符号，如€、¥和英镑
* 数学符号，如∑、√、∂和^
* 标点符号，如&quot;和&quot;

![specialcharacters-2](assets/specialcharacters-2.png)

文本编辑器内置了210个特殊字符。 管理员可以通过自定义](/help/forms/using/custom-special-characters.md)添加对更多/自定义特殊字符的支持。[

## 搜索并替换文本{#searching}

处理包含大量文本的文本文档片段时，需要搜索特定文本字符串。 您可能还需要将特定文本字符串替换为替代字符串。

“查找并替换”功能允许您搜索（和替换）文本文档片段中的任何文本字符串。 该功能还包括强大的常规表达式搜索。

1. 打开用于[编辑](#edittext)的文本文档片段。
1. 点按&#x200B;**[!UICONTROL 查找并替换]**。

1. 在&#x200B;**[!UICONTROL 查找]**&#x200B;文本框中输入要搜索的文本，在&#x200B;**[!UICONTROL 替换]**&#x200B;文本框中输入新文本（替换文本），然后点按&#x200B;**[!UICONTROL 替换]**。

1. 如果找到搜索的文本，则替换文本。

   * 如果找到搜索文本的另一个实例，则该实例会在文本文档片段中高亮显示。 如果再次点按&#x200B;**[!UICONTROL 替换]**，则会替换高亮显示的实例，并且如果找到第三个实例，光标将向前移动。
   * 如果找不到其他实例，“查找并替换”对话框将显示一条消息：到达模块的末尾。

   您也可以点按全部替换，一次性替换所有匹配项。

   “查找并替换”还包含强大的常规表达式搜索功能。 要在搜索中使用正则表达式，请选择&#x200B;**[!UICONTROL Reg ex]**，然后点按&#x200B;**[!UICONTROL 查找]**&#x200B;或&#x200B;**[!UICONTROL 替换]**。

