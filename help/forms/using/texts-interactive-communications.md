---
title: 交互通信中的文本
seo-title: 交互通信中的文本
description: '创建和编辑要在交互式通信中使用的文本文档片段——文本是构建交互式通信所使用的四种文档片段之一。 另外三个是条件、列表和布局片段。  '
seo-description: 创建和编辑要在交互通信中使用的文本文档片段
uuid: fdac3dd8-c6d0-418e-b969-fc791b7bd509
topic-tags: interactive-communications
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: f04050f8-42de-4ef0-b6ed-145d59bbffce
docset: aem65
translation-type: tm+mt
source-git-commit: a326e508a781b3afaba8b5e371aa862a30536740

---


# 交互通信中的文本{#texts-in-interactive-communications}

## 概述 {#overview}

文本文档片段由一个或多个文本段落组成。 段落可以是静态的或动态的。 动态段落可能包含表单数据模型属性和变量。 您还可以应用规则并在文本文档片段内重复。 例如，问候语中的客户名称可以是表单数据模型(FDM)属性，其值在运行时可用。 通过更改这些值，可以使用相同的交互式通信为使用代理UI的不同客户准备交互式通信。

Interactive Communication中的文本文档片段支持以下类型的动态数据：

* **数据模型对象**:数据属性使用后端数据源。
* **基于规则的内容**:根据规则显示或隐藏文本中的部分内容。 规则也可以基于表单数据模型属性和变量。
* **变量**:在文本文档片段中，变量不绑定到后端数据源。 代理在准备将交互式通信提交到帖子进程时，会填写／选择变量中的值，或将变量绑定到数据源。
* **重复**:您的交互式通信中可能包含动态信息，例如信用卡对帐单中的事务处理，其发生次数可能会随每个生成的交互式通信而不断变化。 使用重复，您可以格式化和构造此类动态信息。 有关详细信息，请参阅 [内联条件和重复](https://helpx.adobe.com/experience-manager/6-3/forms/using/cm-inline-condition.html)。

## Create text {#createtext}

1. 选择“ **[!UICONTROL 表单]** ”>“ **[!UICONTROL 文档片段”]**。
1. 选择 **[!UICONTROL 创建]** > **[!UICONTROL 文本]**。
1. 指定以下信息：

   * **[!UICONTROL 标题]**:（可选）输入文本文档片段的标题。 标题不必是唯一的，并且可以具有特殊字符和非英语字符。 文本由其标题（如果可用）引用，例如在缩览图和属性中。
   * **[!UICONTROL 名称]**:文本在文件夹中的唯一名称。 任何状态中都不能存在两个文档片段（文本、条件或列表），并且文件夹中的名称相同。 在“名称”字段中，只能输入英语字符、数字和连字符。 名称字段会根据标题字段自动填充。 在“标题”字段中输入的特殊字符、空格、数字和非英语字符将替换为“名称”字段中的连字符。 尽管“标题”字段中的值会自动复制到“名称”中，但您可以编辑该值。

   * **[!UICONTROL 说明]**:键入文本的说明。
   * **[!UICONTROL 表单数据模型]**:（可选）选择“表单数据模型”单选按钮，以基于表单数据模型创建文本。 选择“表单数据模型”单选按钮时，将显 **[!UICONTROL 示“表单数据模型]** ”字段。 浏览并选择表单数据模型。 在为交互式通信创建文本和条件时，请确保您使用的数据模型与要在交互式通信中使用的数据模型相同。 有关表单数据模型的详细信息，请参阅 [数据集成](/help/forms/using/data-integration.md)。

   * **[!UICONTROL 标记]**:（可选）要创建自定义标记，请在文本字段中输入值，然后按Enter。 保存此文本时，将创建新添加的标记。

1. 点按下 **[!UICONTROL 一步]**。

   创建文本页面。 如果已选择创建基于表单数据模型的文本，则表单数据模型属性显示在左窗格中。

1. 在文本中键入内容，并使用以下选项在文本中设置格式、设置条件和插入表单数据模型属性和变量：

   * [表单数据模型](#formdatamodel)
   * [变量](#variables)
   * [规则编辑器](#rules)
   * [格式选项](#formatting)

      * [从其他应用程序复制粘贴格式文本](#paste)

      * [高亮显示部分文本](#highlight)
   * [重复](/help/forms/using/cm-inline-condition.md)
   * [特殊字符](#special)
   * [搜索和替换文本](#searching)
   * [键盘快捷键](/help/forms/using/keyboard-shortcuts.md)
   >[!NOTE]
   >
   >您可以在文本编辑器中使用@符号添加表单数据模型元素、数据字典元素和变量。 在文本编辑器中输入以@开头的字符串时，将搜索所有“数据模型”元素、“数据字典”元素和变量，并显示包含搜索到的字符串的元素或变量。 您可以在搜索结果中导航并选择元素或变量。 如果没有匹配结果，则显示“找 *不到匹配结果* ”消息。

1. 点按&#x200B;**[!UICONTROL 保存]**。

   将创建文本。 现在，您可以在创建交互式通信时继续将文本用作构建块。

## 编辑文本 {#edittext}

您可以使用以下步骤编辑现有文本文档片段。 您还可以选择在交互式通信编辑器中编辑文本文档片段。

1. 选择“ **[!UICONTROL 表单]** ”>“ **[!UICONTROL 文档片段”]**。
1. 导航到文本文档片段并将其选中。
1. 点按 **[!UICONTROL 编辑]**。
1. 进行所需的更改。 有关文本中选项的详细信息，请参阅 [创建文本](#createtext)。
1. 点按 **[!UICONTROL 保存]** ，然后点按 **[!UICONTROL 关闭]**。

## 使用表单数据模型属性个性化文本文档片段 {#formdatamodel}

您可以通过插入表单数据模型属性来个性化文本文档片段。 通过在文本中插入表单数据模型属性，您可以在预览交互式通信时从关联的数据源中提取和填充收件人特定的数据。 有关表单数据模型的详细信息，请参阅 [AEM表单数据集成](/help/forms/using/data-integration.md)。

如果在创建文本时指定了表单数据模型，则表单数据模型中的属性将显示在文本编辑器的左窗格中。 指定的表单数据模型应与文本文档片段以及包含该片段的交互式通信相同。

![插入fdmelementtext](assets/insertfdmelementtext.png)

* 要将表单数据模型属性插入文本，请将光标放在要插入属性的位置，然后点按左窗格中的 **[A]** 属性，然后点按 **[!UICONTROL [B]Add Selected]**。 您也只需点按两下属性，即可在**[ C光标位置插入&#x200B;]**它。 表单数据模型属性以褐色背景色突出显示。

或者，您也可以使用文本编辑器中的@符号搜索和添加表单数据模型属性。 将光标放在要插入属性的位置。 键入@，后跟搜索字符串。 对文档片段中可用的所有表单数据模型属性和变量执行搜索操作。 将检索包含搜索字符串的属性或变量，并将其显示为下拉列表。 在搜索结果中导航，然后单击要插入光标位置的属性。 按Esc可隐藏搜索结果。

* 要允许代理在使用代理UI准备和发送交互式通信时编辑代理UI中的表单数据模型属性值，请点按该属性的 [D](/help/forms/using/prepare-send-interactive-communication.md)**[]** lock图标，并确保它处于已解锁状态。 属性的默认状态已锁定，且代理无法在代理UI中编辑该属性。

您还可以使用表单数据模型属性来构建用于显示或隐藏部分内容的规则。 有关详细信息，请参 [阅以文本形式创建规则](#rules)。

## 在文本文档片段中创建和使用变量 {#variables}

变量是在创建交互式通信时可以绑定的占位符。 变量可以绑定到表单数据模型属性或文本片段。 还可以保留变量供代理填充。

在以下情况下，可以使用变量代替表单数据模型属性：

* 文本文档片段将用于多个交互式通信，其中不同的交互式通信需要不同的绑定。
* 文本文档片段创建时没有表单数据模型。 您可以插入变量，稍后在创建交互通信时将其绑定到表单数据模型属性。
* 您需要绑定和检索文本文档片段中的文本。 只有那些文本文档片段可以绑定到变量，而不应该包含其中没有变量。

在创建或编辑文本文档片段时，可以创建和插入变量。 您创建的变量会显示在代理UI的“数据”选项卡中。 代理在使用代理UI准备和发 [送交互式通信时指定变量的值](/help/forms/using/prepare-send-interactive-communication.md)。

### 创建变量 {#createvariables}

1. 在左窗格中，点按变 **[!UICONTROL 量]**。

   此时会出现“变量”窗格。

   ![变量窗格](assets/variablespane.png)

1. 点按&#x200B;**[!UICONTROL 创建]**。

   此时会显示“创建变量”窗格。

1. 输入以下信息，然后点按 **[!UICONTROL 创建]**:

   * **[!UICONTROL 名称]** :变量的名称。
   * **[!UICONTROL 说明]** :（可选）输入有关变量的说明。
   * **[!UICONTROL 类型]** :选择变量类型：字符串、数字、布尔值或日期。
   * **[!UICONTROL 仅允许特定值]** :对于字符串和数字变量，您可以确保代理在代理UI中从特定的一组值中选择占位符。 要指定值集，请选择此选项，然后指定值字段中允许的以逗号分隔的 **[!UICONTROL 值]** 。

1. 点按&#x200B;**[!UICONTROL 创建]**。

   变量将创建并列在“变量”窗格中。

1. 要在文本中插入变量，请将光标放在相应的位置，选择该变量，然后点按添 **[!UICONTROL 加选定]**。

   ![变量已插入](assets/variableinserted.png)

   变量以浅蓝色背景色高亮显示，而表单数据模型属性以棕色高亮显示。

   或者，您也可以使用文本编辑器中的@符号搜索和添加变量。 将光标放在要插入变量的位置。 键入@，后跟搜索字符串。 对文档片段中可用的所有表单数据模型属性和变量执行搜索操作。 将检索包含搜索字符串的属性和变量，并将其显示为下拉列表。 在搜索结果中导航，然后单击要插入光标位置的变量。 按Esc可隐藏搜索结果。

1. 点按&#x200B;**[!UICONTROL 保存]**。

## 以文本形式创建规则 {#rules}

使用文本中的规则编辑器，您可以创建规则以根据预设条件显示或隐藏文本字符串或 **内容段**。 这些条件可以基于以下条件构建：

* 字符串
* 数字
* 数学表达
* 日期
* 关联表单数据模型的属性
* 您可能已在文本中创建的任何变量

### 以文本形式创建规则 {#create-rules-in-text}

1. 在创建或编辑文本时，选择要使用规则条件化的文本字符串、段落或内容。

   ![selectcontentapplyrule](assets/selectcontentapplyrule.png)

1. 点按 **[!UICONTROL 创建规则]**。

   此时将显示创建规则对话框。 除了字符串、数字、数学表达式和日期之外，规则编辑器中还提供以下内容，用于创建规则的语句：

   * 关联表单数据模型的属性
   * 您可能已创建的任何变量
   选择要评估的相应选项。

   ![规则编辑器](assets/ruleeditor.png)![规则编辑器fdm](assets/ruleeditorfdm.png)

   >[!NOTE]
   >
   >创建用于条件化和显示文本的规则不支持集合属性。

1. 选择相应的运算符以评估规则，如“等于”、“包含”和“开头为”。

   ![规则编辑器fdm-1](assets/ruleeditorfdm-1.png)

1. 插入评估表达式、值、数据模型属性或变量。

   ![根据FDM的源数据，如果收件人的位置为美国，则显示选定文本的规则](assets/ruleeditorfdm-1-1.png)

   根据FDM的源数据，如果收件人的位置为美国，则显示选定文本的规则

   * 在创建或编辑规则时，您还可以点按 ![icon_resize](assets/icon_resize.png) (Resize)以展开“创建规则／编辑规则”对话框。 扩展的全窗口对话框允许您拖放表单数据模型属性和变量以构建规则。 再次点按调整大小以返回“创建规则”对话框。
   * 您还可以在规则中创建多个条件。
   * 您还可以创建重叠规则，在重叠规则中，规则将应用于已应用规则的内容的一部分。

1. 点按&#x200B;**[!UICONTROL 完成]**。

   将应用规则。 应用规则的文本或内容以绿色突出显示。 当您将鼠标悬停在高亮显示的左手柄上时，将显示应用的规则。

   ![应用规则文本](assets/appliedruletext.png)

   单击所应用规则的左侧句柄后，您将获得编辑或删除规则的选项。

## 设置文本格式 {#formatting}

在创建或编辑文本时，工具栏会根据您选择的编辑类型而改变：段落、对齐方式或列表：[选 ![择工具栏类型](do-not-localize/toolbarselection.png)

选择工具栏类型：段落、对齐方式或列表

](assets/toolbarselection.png)字体编 ![辑工具栏](do-not-localize/paragraphtoolbar.png)

字体编辑工具栏

![对齐工具栏](assets/alignmenttoolbar.png)

对齐工具栏

![列表工具栏](do-not-localize/listingtoolbar.png)

列表工具栏

### 突出显示／强调部分文本 {#highlight}

要高亮显示可编辑文档片段中的部分文本，请选择文本，然后点按高亮颜色。

![textbackgroundcolorapplied-1](assets/textbackgroundcolorapplied-1.png)

您可以直接点按“基本颜色”调板中存在的基本颜色 **[A]** ，或在使用滑块 **B后点按“选择”****[]** ，以选择相应的颜色阴影。

或者，您也可以转到高级选项卡以选择适当的色相、亮度和饱和度 **[C]** ，以创建精确的颜色，然后点按选择 **[D]** 以应用颜色以高亮显示文本。

![textbackgroundcolor-2](assets/textbackgroundcolor-2.png)

### 粘贴格式化文本 {#paste}

要重复使用其他应用程序中存在的多个文本段落之一（如从Microsoft® word或HTML页面），请将文本复制并粘贴到文本编辑器中。 复制的文本的格式将保留在文本编辑器中。

您可以复制并粘贴可编辑文本文档片段中一个或多个文本段落。 例如，您的Microsoft® word文档可能包含可接受的居住校样的项目符号列表，如下所示：

![pastetextmsword-2](assets/pastetextmsword-2.png)

您可以直接将Microsoft® word文档中的文本复制并粘贴到可编辑的文本文档片段。 项目符号列表、字体和文本颜色等格式将保留在文本文档片段中。

![pastetexteditablemodule 1](assets/pastetexteditablemodule-1.png)

>[!NOTE]
>
>但是，粘贴文本的格式有一些 [限制](https://helpx.adobe.com/aem-forms/kb/cm-copy-paste-text-limitations.html)。

## 在文本中插入特殊字符 {#special}

如果需要，请在文档片段中插入特殊字符。 例如，您可以使用“特殊字符”调板插入：

* 货币符号，如€、¥和英镑
* 诸如∑、√、gratab和^等数学符号
* 标点符号，‟如和

![specialcharacters-2](assets/specialcharacters-2.png)

文本编辑器内置了对210个特殊字符的支持。 管理员可以 [通过自定义添加对更多／自定义特殊字符的支持](/help/forms/using/custom-special-characters.md)。

## 搜索和替换文本 {#searching}

处理包含大量文本的文本文档片段时，您需要搜索特定的文本字符串。 您可能还需要将特定文本字符串替换为替代字符串。

“查找并替换”功能允许您搜索（并替换）文本文档片段中的任何文本字符串。 该功能还包括强大的正则表达式搜索功能。

1. 打开文本文档片段进行 [编辑](#edittext)。
1. 点按 **[!UICONTROL 查找并替换]**。

1. 在“查找”文本框中输入要搜索的 **[!UICONTROL 文本]** ，在“替换”文本框中输入新文本（替换文本），然后点按“替换” ********。

1. 如果找到搜索到的文本，则文本将替换为替换文本。

   * 如果找到搜索文本的另一个实例，则该实例会在文本文档片段中高亮显示。 如果再次点 **[!UICONTROL 击“替换]** ”(Replace)，则高亮显示的实例将被替换，并且光标将向前移动（如果找到第三个实例）。
   * 如果找不到其他实例，“查找并替换”对话框将显示一条消息：到达模块末尾。
   您也可以点按全部替换，以一次性替换所有匹配项。

   “查找并替换”还包括功能强大的正则表达式搜索。 要在搜索中使用正则表达式，请选择“ **[!UICONTROL Reg ex]** ”，然后点按“查找 **[!UICONTROL ”或“]** 替换 **[!UICONTROL ”]**。

