---
title: 为自适应表单生成记录文档
seo-title: 为自适应表单生成记录文档
description: 解释如何为记录文档(DoR)生成自适应表单的模板。
seo-description: 解释如何为记录文档(DoR)生成自适应表单的模板。
uuid: 2dc7e0de-fff9-43fa-9426-e9b047eb2595
content-type: reference
topic-tags: develop
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: ce65cb5f-94ec-4423-9fa9-d617e9703091
docset: aem65
translation-type: tm+mt
source-git-commit: 14975f409a0e17183b3da6bdc5a42c8073080108

---


# 为自适应表单生成记录文档{#generate-document-of-record-for-adaptive-forms}

## 概述 {#overview}

在提交表单后，客户通常希望以打印或文档格式记录他们在表单中填写的信息，以供将来参考。 这称为记录文档。

本文介绍如何为自适应表单生成记录文档。

>[!NOTE]
>
>基于XFA的自适应表单不支持自动生成记录文档。 但是，您可以使用用于创建自适应表单的XDP作为记录文档。

## 自适应表单类型及其记录文档 {#adaptive-form-types-and-their-documents-of-record}

创建自适应表单时，可以选择表单模型。 您的选择包括：

* [表单模](../../forms/using/creating-adaptive-form.md#create-an-adaptive-form-based-on-an-xfa-form-template)板允许您为自适应表单选择XFA模板。 选择XFA模板时，可以如上所述将关联的XDP文件用于记录文档。

* [XML架构](../../forms/using/creating-adaptive-form.md#create-an-adaptive-form-based-on-xml-or-json-schema)允许您为自适应表单选择XML架构定义。 为自适应表单选择XML架构时，您可以：

   * 将XFA模板关联到记录文档。 确保关联的XFA模板使用与自适应表单相同的XML架构
   * 自动生成记录文档

* 无允许您创建不带表单模型的自适应表单。 记录文档将自动为您的自适应表单生成。

选择表单模型时，请使用记录文档模板配置下的可用选项配置记录文档。 See [Document of Record Template Configuration](#document-of-record-template-configuration).

## 自动生成的记录文档 {#automatically-generated-document-of-record}

记录文档可让客户保留已提交表单的副本以用于打印目的。 自动生成记录文档时，每次更改表单时，其记录文档都会立即更新。 例如，您删除了选择“美国”作为其国家／地区的客户的年龄字段。 当这些客户生成记录文档时，记录文档中的年龄字段不可见。

自动生成的记录文档具有以下优点：

* 它负责数据绑定。
* 它会在提交时自动隐藏标记为从记录文档排除的字段。 无需额外努力。
* 它为记录模板的文档设计节省了时间。
* 它允许您使用不同的基本模板尝试不同的样式和外观，并为记录文档选择最佳样式和外观。 样式外观是可选的，如果不指定样式，则系统样式将设置为默认样式。
* 它可确保表单的任何更改立即反映在记录文档中。

## 自动生成记录文档的组件 {#components-to-automatically-generate-a-document-of-record}

要为自适应表单生成记录文档，您需要以下组件：

**自适应表单** ：要为其生成记录文档的自适应表单。

**在AEM Designer中创建的基本模板（推荐）** XFA模板（XDP文件）。 基本模板用于为记录模板的文档指定样式和品牌信息。

请参 [阅记录文档的基本模板](#base-template-of-a-document-of-record)

>[!NOTE]
>
>记录文档的基本模板也称为记录文档的元模板。

**从自适应表单生成的记录模板文档** XFA模板（XDP文件）。

See [Document of Record Template Configuration](#document-of-record-template-configuration).

**表单数据** ：用户在自适应表单中填写的信息。 它与记录文档模板合并以生成记录文档。

## 自适应表单元素的映射 {#mapping-of-adaptive-form-elements}

以下各节介绍了自适应表单元素在记录文档中的显示方式。

### 字段 {#fields}

<table>
 <tbody>
  <tr>
   <th>自适应表单组件</th>
   <th>相应的XFA组件</th>
   <th>默认包含在记录文档模板中？</th>
   <th>注释</th>
  </tr>
  <tr>
   <td>按钮</td>
   <td>按钮</td>
   <td>false</td>
   <td> </td>
  </tr>
  <tr>
   <td>复选框</td>
   <td>复选框</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>日期选取器</td>
   <td>日期／时间字段</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>下拉列表</td>
   <td>下拉列表</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>潦草签名</td>
   <td>签名涂鸦</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>数值框</td>
   <td>数字字段</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>密码框</td>
   <td>密码字段</td>
   <td>false</td>
   <td> </td>
  </tr>
  <tr>
   <td>单选按钮</td>
   <td>单选按钮</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>文本框</td>
   <td>文本字段</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>重置按钮</td>
   <td>重置按钮</td>
   <td>false</td>
   <td> </td>
  </tr>
  <tr>
   <td>提交按钮</td>
   <td><p>“电子邮件提交”按钮</p> <p>HTTP提交按钮</p> </td>
   <td>false</td>
   <td> </td>
  </tr>
  <tr>
   <td>条款和条件</td>
   <td> </td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>文件附件</td>
   <td> </td>
   <td>false</td>
   <td>记录文档模板中不可用。 仅限通过附件在记录文档中可用。</td>
  </tr>
 </tbody>
</table>

### 容器 {#containers}

<table>
 <tbody>
  <tr>
   <th>自适应表单组件</th>
   <th>相应的XFA组件</th>
   <th>注释</th>
  </tr>
  <tr>
   <td>面板<br /> </td>
   <td>子表单<br /> </td>
   <td>可重复面板映射到可重复的子表单。</td>
  </tr>
 </tbody>
</table>

### 静态组件 {#static-components}

| 自适应表单组件 | 相应的XFA组件 | 注释 |
|---|---|---|
| 图像 | 图像 | TextDraw和Image组件（无论绑定还是未绑定）始终显示在基于XSD的自适应表单的记录文档中，除非使用记录设置文档排除。 |
| 文本 | 文本 |

>[!NOTE]
>
>在经典UI中，您会获得用于编辑字段属性的不同选项卡。

### 表 {#tables}

自适应表单表组件（如页眉、页脚和行）映射到相应的XFA组件。 您可以将可重复面板映射到记录文档中的表。

## 记录文档的基本模板 {#base-template-of-a-document-of-record}

基本模板为记录文档提供样式和外观信息。 它允许您自定义自动生成的记录文档的默认外观。 例如，您要在记录文档的页眉和页脚中添加公司徽标和版权信息。 基本模板中的主页用作记录文档模板的主页。 主页可以包含可应用于记录文档的信息，如页眉、页脚和页码。 您可以使用基本模板将此类信息应用于记录文档，以自动生成记录文档。 使用基本模板可以更改字段的默认属性。

在设计基 [本模板时](#base-template-conventions) ，请遵循基本模板惯例。

## 基本模板惯例 {#base-template-conventions}

基本模板用于定义记录文档的页眉、页脚、样式和外观。 页眉和页脚可以包含公司徽标和版权文本等信息。 基本模板中的第一个主页将被复制并用作记录文档的主页，其中包含页眉、页脚、页码或记录文档中所有页面中应显示的任何其他信息。 如果您使用的基本模板不符合基本模板惯例，则记录模板文档中仍使用基本模板中的第一个主页。 强烈建议您根据基本模板的惯例设计基本模板，并将其用于自动生成记录文档。

**主页惯例**

* 在基本模板中，您应将根子表单命名为， `AF_METATEMPLATE` 将主页命名为 `AF_MASTERPAGE`。

* 主页的名称位于根子表 `AF_MASTERPAGE` 单下方，它 `AF_METATEMPLATE` 为提取页眉、页脚和样式信息提供了首选项。

* 如果 `AF_MASTERPAGE` 不存在，则使用基本模板中存在的第一个主页。

**字段的样式约定**

* 要对记录文档中的字段应用样式，基本模板会提供位于根子表单下 `AF_FIELDSSUBFORM` 的子表单中 `AF_METATEMPLATE` 的字段。

* 这些字段的属性将应用于记录文档中的字段。 这些字段应遵循命 `AF_<name of field in all caps>_XFO` 名约定。 例如，复选框的字段名称应为 `AF_CHECKBOX_XFO`。

要创建基本模板，请在AEM Designer中执行以下操作。

1. 单击“ **文件”>“新建**”。
1. 选择“ **基于模板** ”选项。

1. 选择“ **表单——记录文档”类** 。
1. 选择 **DoR基本模板**。
1. 单击 **下一步** ，然后提供所需的信息。

1. （可选）修改要应用于记录文档中字段的字段的样式和外观。
1. 保存表单。

您现在可以将保存的表单用作记录文档的基本模板。
请勿修改或删除基本模板中存在的任何脚本。

**修改基本模板**

* 如果不对基本模板中的字段应用任何样式，则建议从基本模板中删除这些字段，以便自动获取对基本模板的任何升级。
* 修改基本模板时，请勿删除、添加或修改脚本。

>[!NOTE]
>
>使用惯例设计基础模板，并严格遵循上述步骤。

## 记录文档模板配置 {#document-of-record-template-configuration}

配置表单的记录文档模板，让客户下载已提交表单的打印友好副本。 XDP文件用作记录模板的文档。 客户下载的记录文档根据XDP文件中指定的布局格式化。

请执行以下步骤以配置自适应表单的记录文档：

1. 在AEM作者实例中，单击“表 **单”>“表单和文档”。**
1. 选择一个表单，然后单击“查 **看属性”**。
1. 在“属性”窗口中，点按表 **单模型**。
在创建表单时，也可以选择表单模型。

   >[!NOTE]
   >
   >在表单模型选项卡中，确保从选 **择自下拉框中选** 择架构或无 ******** 。 **[!UICONTROL 基于XFA的表单或将表单模板作为表单模型的自适应表单不支持记录文档。]**

1. 在“表单模型”选项卡的“记录模板配置文档”部分，选择以下选项之一。

   **无** 如果不想为表单配置记录文档，请选择此选项。

   **将表单模板与记录文档模板关联** 如果您有要用作记录文档模板的XDP文件，请选择此选项。 选择此选项后，将显示AEM Forms存储库中可用的所有XDP文件。 选择相应的文件。

   所选XDP文件将与自适应表单相关联。

   **生成记录文档** 选择此选项可将XDP文件用作记录文档的样式和外观的基本模板。 选择此选项后，将显示AEM Forms存储库中可用的所有XDP文件。 选择相应的文件。

   **[!UICONTROL 选择此选项可将XDP文件用作记录文档的样式和外观的基本模板。 选择此选项后，将显示AEM Forms存储库中可用的所有XDP文件。 选择相应的文件。]**

   **选择“表单模板”作为基本模板以生成记录文档** 。选择此选项可将XDP文件用作记录文档的样式和外观的基本模板。 选择此选项后，将显示AEM Forms存储库中可用的所有XDP文件。 选择相应的文件。

   >[!NOTE]
   >
   >在以下情况下，确保用于创建XFA表单的自适应表单和架构（数据架构）的架构相同：
   >
   >
   >
   >    * 自适应表单基于架构
   >    * 您正在将“关 **联表单模板”用作记录文档的“记录文档模板** ”选项


1. Click **Done.**

## 自定义记录文档中的品牌信息 {#customize-the-branding-information-in-document-of-record}

在生成记录文档时，您可以在“记录文档”选项卡上更改记录文档的品牌信息。 “记录文档”选项卡包括徽标、外观、布局、页眉和页脚、免责声明等选项，以及您是否希望包括未选中的复选框和单选按钮选项。

要本地化您在记录文档选项卡中输入的品牌信息，您需要确保正确设置浏览器的区域设置。 要自定义记录文档的品牌信息，请完成以下步骤：

1. 在记录文档中选择一个面板（根面板），然后点按 ![配置](assets/configure.png)。
1. 点按 ![dortab](assets/dortab.png)。 此时将显示“记录文档”选项卡。
1. 选择用于渲染记录文档的默认模板或自定义模板。 如果选择默认模板，则记录文档的缩略图预览会显示在“模板”下拉框的下方。

   ![品牌模板](assets/brandingtemplate.png)

   如果选择选择自定义模板，请在AEM Forms服务器上浏览选择XDP。 如果要使用AEM Forms服务器上尚未提供的模板，则需要先将XDP上传到AEM Forms服务器。

1. 根据您选择的是默认模板还是自定义模板，以下部分属性或全部属性将显示在“记录文档”选项卡中。 请相应地指定以下各项：

   * **徽标图像**:您可以选择使用自适应表单中的徽标图像，从DAM中选择一个图像，或从计算机上传一个图像。
   * **表单标题**
   * **标题文本**
   * **免责声明标签**
   * **免责声明**
   * **免责声明文本**
   * **重音颜色**:在文档或记录PDF中呈现标题文本和分隔线的颜色
   * **字体系列**:记录PDF文档中文本的字体系列
   * **对于复选框和单选按钮组件，仅显示选定的值**
   * **用于多个选定值的分隔符**
   * **包括未绑定到数据模型的表单对象**
   * **从记录文档中排除隐藏字段**
   * **隐藏面板描述**
   >[!NOTE]
   >
   >如果您使用的是使用6.3之前由设计人员版本创建的自适应表单模板，为了使“重音颜色”和“字体系列”属性正常工作，请确保根子表单下的自适应表单模板中存在以下内容：

   ```xml
   <proto>
   <font typeface="Arial"/>
   <fill>
   <color value="4,166,203"/>
   </fill>
   <edge>
   <color value="4,166,203"/>
   </edge>
   </proto>
   ```

1. 要保存品牌更改，请点按完成。

## 记录文档中面板的表和列布局 {#table-and-column-layouts-for-panels-in-document-of-record}

您的自适应表单可能是一个包含多个表单字段的长表单。 您可能不希望将记录文档另存为自适应表单的精确副本。 现在，您可以选择表格或列布局，以将一个或多个自适应表单面板保存在记录PDF文档中。

在生成记录文档之前，在面板的设置中，选择“表”或“列”作为该面板的“记录文档布局”。 面板中的字段将在记录文档中相应地进行组织。

![记录文档的表布局中呈现的面板中的字段](assets/dortablelayout.png)

记录文档的表布局中呈现的面板中的字段

![记录文档中以列布局呈现的面板中的字段](assets/dorcolumnlayout.png)

记录文档中以列布局呈现的面板中的字段

## 记录文档设置 {#document-of-record-settings}

记录文档设置允许您选择要包含在记录文档中的选项。 例如，银行在表单中接受姓名、年龄、社会保险号和电话号码。 表单生成银行帐号和分支详细信息。 您可以选择仅在记录文档中显示姓名、社会保险号、银行帐户和分支详细信息。

组件的记录设置文档位于其属性下。 要访问某个组件的属性，请选择该组件，然后在叠 ![加中](assets/cmppr.png) 单击cmppr。 这些属性列在提要栏中，您可以在其中找到以下设置。

**字段级别设置**

* **从记录文档排除**:将属性设置为true会从记录文档中排除字段。 这是名为的可脚本属性 `excludeFromDoR`。 其行为取决于隐藏 **的表单级别属性时** ，从DoR中排除字段。

* **** 将面板显示为表：如果面板中的字段少于6个，则设置属性会将面板显示为记录文档中的表。 仅适用于面板。
* **** 从记录文档中排除标题：设置该属性将不包括记录文档中的面板／表的标题。 仅适用于面板和表。
* **** 从记录文档排除说明：设置属性不包括记录文档中对面板／表的说明。 仅适用于面板和表。

**表单级别设置**

* **** 在DoR中包含未绑定字段：设置属性时，记录文档中包含基于架构的自适应表单中未绑定的字段。 默认情况下为true。
* **** 如果隐藏，则从DoR中排除字段：如果不是，设置该属性将覆盖“从记录文档排除”字段级别属性的行为。 如果字段在提交表单时处于隐藏状态，则如果属性设置为true，则这些字段将从记录文档中排除，但前提是未设置“从记录文档排除”属性。

## 处理记录文档时的主要注意事项 {#key-considerations-when-working-with-document-of-record}

处理自适应表单的记录文档时请记住以下注意事项和限制。

* 记录文档模板不支持富文本。 因此，静态自适应表单中或最终用户填写的信息中的任何富文本在记录文档中显示为纯文本。
* 自适应表单中的文档片段不显示在记录文档中。 但是，支持自适应表单片段。
* 记录文档仅用于打印目的。
* 不支持在记录文档中为基于XML Schema的自适应表单生成的内容绑定。
* 不支持在记录文档中为基于XML Schema的自适应表单生成的内容绑定。
* 当用户请求渲染记录文档时，将根据区域设置的要求创建记录文档的本地化版本。 记录文档的本地化与自适应表单的本地化同时发生。 有关记录文档和自适应表单的本地化的更多信息，请参 [阅使用AEM翻译工作流程本地化自适应表单和记录文档](/help/forms/using/using-aem-translation-workflow-to-localize-adaptive-forms.md)。

