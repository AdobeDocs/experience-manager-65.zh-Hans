---
title: 配置电子邮件端点
seo-title: 配置电子邮件端点
description: 了解如何配置电子邮件端点。
seo-description: 了解如何配置电子邮件端点。
uuid: d47bb45b-0e0e-43ca-9e25-e347d0e60206
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/managing_endpoints
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: dcf15c42-9ec6-4d1c-ad41-083aa0b8c7ae
translation-type: tm+mt
source-git-commit: 317fadfe48724270e59644d2ed9a90fbee95cf9f
workflow-type: tm+mt
source-wordcount: '3766'
ht-degree: 0%

---


# 配置电子邮件端点{#configuring-email-endpoints}

电子邮件端点允许用户通过向指定的电子邮件帐户发送一个或多个文档（作为电子邮件附件）来调用服务。 电子邮件收件箱充当附件的收集点。 该服务监视收件箱并处理附件。 转换结果被转发到在端点中定义的用户。

对于电子邮件端点，授权用户可以通过将文件通过电子邮件发送到相应的帐户来调用进程。 结果将返回给提交用户（默认情况下）或在端点设置中定义的用户。

在配置电子邮件端点之前，请创建一个POP3或IMAP电子邮件帐户供端点使用。 为每种转换类型设置单独的帐户。 例如，一个帐户可以配置为从传入的文件附件生成标准PDF文档，另一个帐户可以配置为生成安全PDF文档。

>[!NOTE]
>
>每个电子邮件地址必须只映射到一个电子邮件端点。 您无法将多个电子邮件端点配置为单个电子邮件地址，即使禁用了其他电子邮件端点也是如此。

所有电子邮件端点都配置了电子邮件收件箱的授权用户名和密码，在调用服务时需要这些用户名和密码。 电子邮件帐户受其配置的邮件服务器系统保护。

如果用户在文件和转换路径名称中发送带有西欧语言字符的文档，则必须使用支持所需编码类型（Latin1 [ISO-8859-1]、西欧语言[Windows]或UTF-8）的电子邮件应用程序。 有关详细信息，请参阅&#x200B;*安装和部署AEM forms*&#x200B;文档。

配置电子邮件端点之前，请配置电子邮件服务。 （请参阅[配置默认电子邮件端点设置](configuring-email-endpoints.md#configure-default-email-endpoint-settings)。） 电子邮件服务的配置参数有两个用途：

* 配置所有电子邮件端点的通用属性
* 为所有电子邮件端点提供默认值

## 为电子邮件端点{#configure-ssl-for-an-email-endpoint}配置SSL

可以将POP3、IMAP或SMTP配置为对电子邮件端点使用安全套接字层(SSL)。

1. 根据制造商的文档，在电子邮件服务器上为POP3、IMAP或SMTP启用SSL。
1. 从电子邮件服务器导出客户端证书。
1. 使用keytool项目将客户端证书文件导入应用程序服务器的Java虚拟机(JVM)证书存储。 此步骤的过程取决于JVM和客户端安装路径。

   例如，如果您使用默认的OracleWebLogic Server安装，并在Microsoft Windows Server® 2003上使用JDK 1.5.0，请在命令提示符下键入以下文本：

   `keytool -import -file client_certificate -alias myalias -keystore BEA_HOME\jdk150_04\jre\security\cacerts`

1. 出现提示时，输入密码（对于Java，默认密码为`changeit`）。 您将收到一条消息，指明证书已成功导入。
1. 使用管理控制台将电子邮件端点添加到服务。
1. 在管理控制台中创建电子邮件端点。 配置端点设置时，为传入邮件选择“POP3/IMAP SSL Enabled”（启用POP3/IMAP SSL），为传出邮件选择“SMTP SSL Enabled”（启用SMTP SSL），并相应地更改端口属性。

>[!NOTE]
>
>提示：如果您在使用SSL时遇到问题，请使用电子邮件客户端（如Microsoft Outlook）检查它是否可以使用SSL访问电子邮件服务器。 如果电子邮件客户端无法访问电子邮件服务器，则此问题与证书或电子邮件服务器的配置相关。

## 配置默认电子邮件端点设置{#configure-default-email-endpoint-settings}

您可以使用“服务管理”页配置所有电子邮件端点的通用属性，并为所有电子邮件端点提供默认值。

要使表单工作流能够接收和处理用户传入的电子邮件，您需要为完整任务服务创建电子邮件端点。 此电子邮件端点需要其他设置，如[创建完整任务服务的电子邮件端点](configuring-email-endpoints.md#create-an-email-endpoint-for-the-complete-task-service)中所述。

### 更改电子邮件端点的默认值{#change-the-default-values-for-email-endpoints}

1. 在管理控制台中，单击“服务”>“应用程序和服务”>“服务管理”。
1. 在“服务管理”页面上，单击“电子邮件：1.0（组件ID为com.adobe.idp.dsc.provider.service.email.Email）。
1. 在“配置”选项卡上，指定默认的电子邮件端点设置，然后单击“保存”。

### 默认电子邮件端点设置{#default-email-endpoint-settings}

**Cron表达式:** 石英用来计划输入目录的轮询的cron表达式。

**重复间** 隔：重复目录轮询的次数。如果端点配置中未指定此值，则默认重复间隔以秒为单位。 默认值为 10。此值不能小于10。

**重复计** 数：轮询输入目录的次数。如果端点配置中未指定此值，则使用的默认重复计数。 值-1表示对目录进行不定期扫描。 默认值为-1。

**作业开始时延迟：** 在作业开始扫描端点之前的延迟的默认值（以秒为单位）。默认值为 0。

**批处理大** 小：接收者每次扫描处理的电子邮件数，以获得最佳性能。值-1表示所有电子邮件。 默认值为 2。

**异步：** 将调用类型标识为异步或同步。瞬态和同步进程只能同步调用。 默认值为异步。

**域模式：** 用于过滤传入电子邮件的域名模式。例如，如果使用adobe.com，则只会处理adobe.com发送的电子邮件；忽略来自其他域的电子邮件。

**文件模式：** 提供程序接受的传入文件附件模式。这包括具有特定扩展名(&amp;ast;.dat、&amp;ast;.xml)、特定名称（数据）以及名称和扩展名()中的复合表达式的文件。[D][aA]&#39;port&#39;)。默认值为&amp;ast;。&amp;ast;。

**成功作业的收件人:** 一个或多个电子邮件地址，用于发送电子邮件以指示成功作业。默认情况下，成功的作业消息始终发送给初始作业的发送者。 最多支持100个收件人。 要关闭此设置，请将此字段留空。

**失败作业的收件人符：** 一个或多个电子邮件地址，用于发送电子邮件以指示失败作业。默认情况下，失败的作业消息始终发送给发送初始作业的发件人。 最多支持100个收件人。 要关闭此设置，请将此字段留空。

**收件箱主** 机：要扫描的电子邮件提供者的收件箱主机名或IP地址。

**收件箱端** 口：电子邮件提供者要扫描的收件箱端口号。如果值为0，则使用默认的IMAP或POP3端口。

**收件箱协** 议：用于扫描收件箱的电子邮件端点的电子邮件协议。选项为IMAP或POP3。 收件箱主机邮件服务器必须支持这些协议。

**收件箱超时：** 指定端点在尝试连接到收件箱时在取消之前将等待的时间。如果在到达超时值之前未获得连接，则不会轮询收件箱。

**收件箱用** 户：登录电子邮件帐户所需的用户名。根据电子邮件服务器和配置的不同，此名称可能只是电子邮件的用户名部分，也可能是完整的电子邮件地址。

**收件箱密** 码：收件箱用户的密码。

**启用POP3/IMAP SSL：选** 择后，启用SSL。

**SMTP主机：** 电子邮件提供者用来发送结果和错误消息的邮件服务器的主机名。例如，mail.corp.example.com。

**SMTP端** 口：用于连接到邮件服务器的端口。默认值为 25。

**SMTP用户：** 电子邮件提供者在发送电子邮件以查看结果和错误时要使用的用户帐户。

**SMTP口** 令：SMTP帐户的口令。某些邮件服务器不需要SMTP密码。

**发送方：** 用于发送结果和错误的电子邮件通知的电子邮件地址(例如user@company.com)。如果未指定“发送方”值，则电子邮件服务器将尝试通过将“SMTP用户”设置中指定的值与电子邮件服务器上配置的默认域相结合来确定电子邮件地址。 如果电子邮件服务器没有默认域，并且您没有为“发送方”指定值，则可能会发生错误。 要确保电子邮件的发件人地址正确，请为“发件人”设置指定一个值。

**启用SMTP SSL：选** 择后，通过SMTP启用SSL。

**将原始电子邮件正文作为附** 件包含：默认情况下，当您向表单服务器发送电子邮件时，邮件的原始文本将包含在邮件正文中。要将文本作为附件包含，请选择此选项。

**对结果电子邮件使用原始主题行：默** 认情况下，Forms服务器在发送结果电子邮件时使用“成功电子邮件主题”和“错误电子邮件主题”设置中指定的值作为主题行。要改用与发送到服务器的原始电子邮件相同的主题行，请选择此选项。

**成功电子邮件主** 题：在向电子邮件端点发送电子邮件至开始或继续处理后，您会收到AEM表单服务器发送的返回电子邮件。如果电子邮件成功，您会收到成功的电子邮件。 如果电子邮件失败，您将收到一封失败的电子邮件，告知其失败的原因。 此设置允许您指定为此端点发送的成功电子邮件主题行。

**成功电子邮件正文：** 允许您指定为此端点发送的成功电子邮件正文文本。

**错误电子邮件主** 题前缀：允许您指定在为此端点发送的失败电子邮件主题行开始时使用的文本。

**错误电子邮件主** 题：允许您指定为此端点发送的失败电子邮件主题行。此文本显示在“错误电子邮件主题前缀”之后。

**错误电子邮件正** 文：允许您在为此端点发送的失败电子邮件正文中指定第一行。

**电子邮件摘要信** 息：每条成功或失败消息都包含一个部分，其中包含您发送给表单服务器的原始电子邮件文本。此设置指定显示在该部分上方的文本。

**创建／更新此端点之前验证收** 件箱：选择此选项后，表单服务器会在创建端点之前检查您的SMTP/POP3设置是否正确。单击“添加”时，将显示一条消息，说明收件箱帐户是否有效。 如果未选择此选项，AEM forms服务器将创建端点，而不验证收件箱。

**字符集编码：** 用于电子邮件的编码格式。默认为UTF-8，大多数日本以外的用户将使用它。 日语环境的用户可以选择ISO2022-JP。

**失败的电子邮件发** 送文件夹：指定在SMTP邮件服务器不工作时存储结果的目录。

## 电子邮件端点设置{#email-endpoint-settings}

使用以下设置配置电子邮件端点。

**名称：** 标识端点的必需设置。不要包含&lt;字符，因为它会截断Workspace中显示的名称。 如果要输入URL作为端点的名称，请确保它符合RFC1738中指定的语法规则。

**描述：** 端点的描述。不要包含&lt;字符，因为它会截断Workspace中显示的描述。

**Cron表达式:** 如果必须使用cron表达式来计划电子邮件，请输入cron表达式。

**重复计数：** 电子邮件端点扫描文件夹或目录的次数。值-1表示扫描不确定。 默认值为-1。

**重复间隔：** 接收器用于检查传入邮件的扫描速率。

**作业开始时延迟：** 在调度程序开始后等待扫描的时间。

**批处理大** 小：接收者每次扫描处理的电子邮件数，以获得最佳性能。值-1表示所有电子邮件。 默认值为 2。

**用户名：** 强制设置，即从电子邮件调用目标服务时使用的用户名。默认值为SuperAdmin。

**域名：** 强制设置，即用户的域。默认值为DefaultDom。

**域模式：** 指定提供者接受的传入电子邮件的域模式。例如，如果使用adobe.com，则只处理adobe.com的电子邮件；忽略来自其他域的电子邮件。

**文件模式：** 指定提供程序接受的传入文件附件模式。这包括具有特定扩展名(&amp;ast;.dat、&amp;ast;.xml)、特定名称（数据）或名称和扩展名(&amp;ast;)中的复合表达式的文件。[D][aA]&#39;port&#39;)。

**成功作业的收件人符：发** 送消息以指示成功作业的电子邮件地址。默认情况下，成功的作业消息始终发送给发送者。 如果键入“发送者”，则电子邮件结果将发送给发送者。 最多支持100个收件人。 指定其他收件人，电子邮件地址以逗号分隔(,)。

要关闭此设置，请将设置留空。 在某些情况下，您希望触发进程，而不希望收到结果的电子邮件通知。

**失败作业的收件人符：发** 送消息以指示失败作业的电子邮件地址。默认情况下，失败的作业消息始终发送给发送者。 如果键入“发送者”，则电子邮件结果将发送给发送者。 最多支持100个收件人。 指定其他收件人，电子邮件地址以逗号分隔(,)。

要关闭此设置，请将设置留空。 在某些情况下，您希望触发进程，而不希望收到结果的电子邮件通知。

**收件箱主** 机：要扫描的电子邮件提供者的收件箱主机名或IP地址。

**收件箱端** 口：电子邮件服务器使用的端口。POP3的默认值为110,IMAP的默认值为143。 如果启用SSL，则POP3的默认值为995,IMAP的默认值为993。

**收件箱协** 议：用于扫描收件箱的电子邮件端点的电子邮件协议。值为IMAP或POP3。 收件箱主机邮件服务器必须支持这些协议。

**收件箱超时** ：电子邮件提供者等待收件箱响应的超时（以秒为单位）。

**收件箱用** 户：登录电子邮件帐户所需的用户名。根据电子邮件服务器和配置的不同，此值可能仅是电子邮件的用户名部分，也可能是完整的电子邮件地址。

**收件箱密** 码：收件箱用户的密码。

**启用POP3/IMAP SSL：选** 择此设置可强制电子邮件提供者使用SSL扫描收件箱。确保邮件服务器支持SSL。

**SMTP主机：电** 子邮件提供者用来发送结果和错误消息的邮件服务器的主机名。

**SMTP端口：** SMTP端口的默认值为25。

**SMTP用户：** 电子邮件提供者在发送结果和错误的电子邮件通知时要使用的用户帐户。

**SMTP口** 令：SMTP帐户的口令。某些邮件服务器不需要SMTP密码。

**发送方：** 用于发送结果和错误的电子邮件通知的电子邮件地址(例如user@company.com)。如果未指定“发送方”值，则电子邮件服务器将尝试通过将“SMTP用户”设置中指定的值与电子邮件服务器上配置的默认域相结合来确定电子邮件地址。 如果电子邮件服务器没有默认域，并且您没有为“发送方”指定值，则可能会发生错误。 要确保电子邮件的发件人地址正确，请为“发件人”设置指定一个值。

**启用SMTP SSL：选** 择此设置可强制电子邮件提供者使用SSL扫描收件箱。确保邮件服务器支持SSL。

**失败的电子邮件发** 送文件夹：指定在SMTP邮件服务器不工作时存储结果的目录。

**异步：** 设置为同步时，将处理所有输入文档并返回单个响应。设置为异步时，将为每个被处理的文档发送响应。

例如，为采用单个Word文档并将该文档作为PDF文件返回的服务创建电子邮件端点。 可以向端点的收件箱发送电子邮件，该收件箱中包含多个(3)Word文档。 处理所有三个文档后，如果端点配置为同步，则会发送一封单一响应电子邮件，并附加所有三个文档。 如果端点是异步的，则在将每个Word文档转换为PDF后，会发送一封响应电子邮件。 结果是发送了三封电子邮件，每封都带有一个PDF附件。

默认值为异步。

**将原始电子邮件正文作为附** 件包含：默认情况下，当您向表单服务器发送电子邮件时，邮件的原始文本将包含在邮件正文中。要将文本作为附件包含，请选择此选项。

**将原始主题行用于结果电子邮件：默** 认情况下，Forms服务器在发送结果电子邮件时使用“成功电子邮件主题”和“错误电子邮件主题”设置中指定的值作为主题行。要改用与发送到服务器的原始电子邮件相同的主题行，请选择此选项。

**成功电子邮件主** 题：在向电子邮件端点发送电子邮件至开始或继续处理后，您会收到AEM表单服务器发送的返回电子邮件。如果电子邮件成功，您会收到成功的电子邮件。 如果电子邮件失败，您将收到一封失败的电子邮件，告知其失败的原因。 此设置允许您指定为此端点发送的成功电子邮件主题行。

**成功电子邮件正文：** 允许您指定为此端点发送的成功电子邮件正文文本。

**错误电子邮件主** 题前缀：允许您指定在为此端点发送的失败电子邮件主题行开始时使用的文本。

**错误电子邮件主** 题：允许您指定为此端点发送的失败电子邮件主题行。此文本显示在“错误电子邮件主题前缀”之后。

**错误电子邮件正** 文：允许您在为此端点发送的失败电子邮件正文中指定第一行。

**电子邮件摘要信** 息：每条成功或失败消息都包含一个部分，其中包含您发送给表单服务器的原始电子邮件文本。此设置指定显示在该部分上方的文本。

**在创建／更新此端点之前验证收** 件箱：选择此选项后，表单服务器会在创建端点之前检查您的SMTP/POP3设置是否正确。单击“添加”时，将显示一条消息，说明收件箱帐户是否有效。 如果未选择此选项，AEM forms服务器将创建端点，而不验证收件箱。

**操作名称：** 此设置为必填项。可分配给电子邮件端点的操作列表。 您在此处选择的操作将决定在“输入参数映射”和“输出参数映射”部分中显示哪些字段。

**输入参数映** 射：用于配置处理服务和操作所需的输入。输入的两种类型是文本和变量：

**文字：** 电子邮件使用显示时在字段中输入的值。

**变量：** 您可以映射电子邮件主题、正文、标题或发件人电子邮件地址中的字符串。为此，请使用以下关键字之一：%SUBJECT%、%BODY%、%HEADER%或%SENDER%。 例如，如果您使用%SUBJECT%，则电子邮件主题内容将用作输入参数。 要选取附件，请输入电子邮件端点可用来选择附加文档的文件模式。 例如，输入&amp;ast;.pdf会选择任何附加的文件扩展名为。pdf的文档。 进入&amp;ast;选择任何附加的文档。 输入example.pdf将选择名为example.pdf的任何附加文档。

**输出参数映** 射：用于配置服务和操作的输出。输出参数映射值中的以下字符在附件文件名中展开：

**%** FR显示源文件的文件名（不包括扩展名）。

**%** ER显示源文件的扩展名。

反斜杠(\)的任何匹配项都替换为%%。

***注&#x200B;**:如果服务请求消息包括多个文件附件，则不能将%F和%E参数用于端点的“输出参数映射”属性。如果服务响应返回多个文件附件，则不能为多个附件指定相同的文件名。 如果不遵循这些建议，则调用的服务将为返回的文件创建名称，并且这些名称是不可预测的。*

以下值可用：

**单个对象：** 电子邮件提供者没有源文件夹目标；结果作为附件返回。该模式为Result/%F.ps并返回Result%%sourcefilename.ps作为文件名附件。

**列表:** 该模式为Result/%F/，并返回Result%%sourcefilename%%file1作为文件名附件。

**映射：** 模式为Result/%F/，源目标为Result%%sourcefilename%%file1和Result%%sourcefilename%%file2。如果映射包含多个对象，且模式为Result/%F.ps，则响应文件附件为Result%%sourcefilename1.ps(output 1)和Result%%sourcefilename2.ps(output 2)。

## 为完整任务服务{#create-an-email-endpoint-for-the-complete-task-service}创建电子邮件端点

要使表单工作流能够接收和处理用户传入的电子邮件，您需要为完整任务服务创建电子邮件端点。

1. 在管理控制台中，单击“服务”>“应用程序和服务”>“服务管理”。
1. 在“服务管理”页面上，单击“完成任务”服务。
1. 在“端点”选项卡上，从下拉列表卡中选择“电子邮件”，然后单击“添加”。
1. 在“收件箱主机”框中，键入邮件服务器的主机名或IP地址。
1. 在“收件箱用户”框中，键入登录您为处理表单提交而创建的电子邮件帐户所需的用户名。 根据电子邮件服务器和配置的不同，此名称可能只是电子邮件的用户名部分，也可能是完整的电子邮件地址。
1. 在“收件箱密码”框中，键入“收件箱用户”的密码。
1. 在“SMTP主机”框中，键入电子邮件提供者从中发送结果和错误消息的邮件服务器的主机名或IP地址。
1. 在“SMTP用户”框中，键入电子邮件提供者在发出电子邮件以查看结果和错误时要使用的用户帐户。 此用户帐户可以与用于收件箱用户的值相同。
1. 在“SMTP口令”框中，键入SMTP帐户的口令。
1. 在“操作名称”列表中，选择“调用”。
1. 在attachmentMap列表中，选择“变量”，并在相邻的框中键入`*.*`。 这会将入站邮件中的所有附件发送到“完整”任务流程的映射变量。
1. 在mailBody列表中，选择变量，并在相邻的框中键入`%BODY%`。
1. 在mailFrom列表中，选择Variable（变量），并在相邻的框中键入`%SENDER%`。 这会将发送者地址映射到完整任务流程数据。
1. 在结果框中，键入`results`。 这会导致完整任务或开始进程返回结果字符串。
1. 单击添加。

