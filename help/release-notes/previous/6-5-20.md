---
title: ' [!DNL Adobe Experience Manager] 6.5 发行说明'
description: 查找  [!DNL Adobe Experience Manager] 6.5 的版本信息、新增功能、安装操作方法和详细更改列表。
mini-toc-levels: 4
solution: Experience Manager
feature: Release Information
role: User,Admin,Architect,Developer
exl-id: 9eceb459-e346-4e07-8481-311c2b1bd2bb
source-git-commit: c3fbd25245f970865354b7c6d8e782832a694138
workflow-type: ht
source-wordcount: '4158'
ht-degree: 100%

---

# [!DNL Adobe Experience Manager] 6.5.20.0 {#aem-service-pack-release-notes}

<!-- For an itemized list of all issues found in this release information, see the following spreadsheet: https://adobe-my.sharepoint.com/:x:/r/personal/anujkapo_adobe_com/_layouts/15/Doc.aspx?sourcedoc=%7B3ea81ae4-e605-4153-b132-f2698c86f84e%7D&action=edit&wdinitialsession=d8c7b903-87fc-4f2d-9ef2-542a82169570&wdrldsc=3&wdrldc=1&wdrldr=SessionMemoryQuotaExceededDuringSession -->

<!-- DO NOT DELETE THIS HIDDEN NOTE      DO NOT DELETE THIS HIDDEN NOTE
>[!NOTE]
>
>Fixes in [!DNL Experience Manager] Forms are delivered through a separate add-on package one week after the scheduled [!DNL Experience Manager] Service Pack release date. In this case, the add-on packages release Thursday, November 30, 2023. In addition, a list of Forms fixes and enhancements is added to this section. -->

## 发行版信息 {#release-information}

| 产品 | [!DNL Adobe Experience Manager] 6.5 |
| -------- | ---------------------------- |
| 版本号 | 6.5.20.0 <!-- UPDATE FOR EACH NEW RELEASE --> |
| 类型 | 服务包发行 |
| 日期 | 2024 年 2 月 22 日星期四 <!-- UPDATE FOR EACH NEW RELEASE --> |
| 下载 URL | [软件分发](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/servicepack/aem-service-pkg-6.5.20.0.zip) <!-- UPDATE FOR EACH NEW RELEASE --> |

## [!DNL Experience Manager] 6.5.20.0 的内容 {#what-is-included-in-aem-6520}

自 2019 年 4 月 6.5 首次发布以来，[!DNL Experience Manager] 6.5.20.0 陆续发布了新增功能、客户重点请求的增强功能、错误修复，以及在性能、稳定性与安全性方面的改进。[在 [!DNL Experience Manager] 6.5 上安装此服务包](#install)。

<!-- UPDATE FOR EACH NEW RELEASE -->

## 主要功能和增强功能

<!-- * _6.5.20.0 REVIEWERS: WHAT ARE THE KEY FEATURES AND ENHANCEMENTS THAT YOU WANT TO HIGHLIGHT IN THIS RELEASE?_ -->

本次版本中的部分主要功能和增强功能包括：

* Dynamic Media 现已支持 Apple iOS/iPadOS 的无损 HEIC 图像格式。请参阅 Dynamic Media 图像服务与渲染 API 中的 [fmt](https://experienceleague.adobe.com/zh-hans/docs/dynamic-media-developer-resources/image-serving-api/image-serving-api/http-protocol-reference/command-reference/r-is-http-fmt)。
* 多网站管理器（MSM）现已支持体验片段的结构，其中包括文件夹和子文件夹，可高效地将体验片段批量转出至 Live Copy。

### [!DNL Forms]

* **AEM Forms on JEE 的事务报告**：JEE 上的 AEM Forms 新增事务报告功能，可全面记录文档事务，例如转化、演绎版和提交操作。此增强功能可提升工作效率，并有助于改进记录管理。该功能默认处于禁用状态。您可以在管理员 UI 中启用。
* **通过 ECDSA 支持增强安全性**：AEM Forms 现已在 JEE 和 OSGi 技术栈中全面支持椭圆曲线数字签名算法（ECDSA）。用户现在可以对 PDF 文档进行签名、认证和验证，从而显著提升安全性。支持的 EC 曲线算法包括：
   * ECDSA 椭圆曲线 P256 搭配 SHA256 摘要算法
   * ECDSA 椭圆曲线 P384 搭配 SHA384 摘要算法
   * ECDSA 椭圆曲线 P512 搭配 SHA512 摘要算法
* **Forms Designer 与 Windows 11 的无缝兼容性**：AEM Forms Designer 现已支持 Windows 11，确保顺利安装以及顺畅运行。用户可放心升级至 Windows 11，而无需重新安装 Forms Designer，也无需担心兼容性问题，从而保证工作流不受中断。
* **通过在 AEM Forms Designer 中使用自定义“字幕”角色来提升无障碍性**：AEM Forms Designer 现已支持一个名为“字幕”的自定义无障碍角色，使用户能够在 XDP 中创建个性化的字幕元素。该功能通过允许用户将自定义字幕集成到文档设计中，进一步提升了无障碍性，从而改善包容性和用户体验。

<!-- ### [!DNL Forms]

* text -->

<!-- UPDATE BELOW FOR EACH NEW RELEASE -->

## 服务包 20 中已修复的问题 {#fixed-issues}

### [!DNL Sites]{#sites-6520}

<!--#### Accessibility{#sites-accessibility-6520}

* text -->

#### 管理员用户界面{#sites-adminui-6520}

* `Workflow Title` 字段被标记为必填项（`*`），但未进行验证。（SITES-16491）

<!--#### Classic UI{#sites-classicui-6520}

* text -->

#### [!DNL Content Fragments]{#sites-contentfragments-6520}

* 在升级至 AEM 6.5.18 或 AEM 6.5.19 后，嵌套配置文件夹不再受支持，内容片段模型文件夹也不再可见。（SITES-18110）
* 部分子文件夹无法继承内容片段模型。它必须支持没有 `jcr:content` 属性的文件夹，即使通过用户界面创建的 DAM 文件夹具备此类节点。（SITES-17943）

#### [!DNL Content Fragments] - GraphQL API {#sites-graphql-api-6520}

<!-- REMOVED AS PER EMAIL FROM SAMEER DHAWAN FEBRUARY 19, 2024 * When upgrading AEM from 6.5.19.0 to 6.5.20.0, the path `/libs/cq/graphql/sites/graphiql` was getting deleted. (SITES-19530) CRITICAL -->
* 在执行 GraphQL 查询以[筛选结果](/help/sites-developing/headless/graphql-api/graphql-api-content-fragments.md#filtering)时，如果&#x200B;**未**&#x200B;为可选变量提供具体值，则该变量会在筛选评估中被忽略。（SITES-17051）

<!--#### [!DNL Content Fragments] - GraphQL Query Editor{#sites-graphql-query-editor-6520}

* text -->

#### [!DNL Content Fragments] - REST API{#sites-restapi-6520}

* 在升级 `org.json` 库后，小数反序列化方式发生了变化。之前它们默认会转化为 Double，而现在转化为 BigDecimal。相反，通过 REST API 存储的元数据属性值应从 BigDecimal 转化为 Double。（SITES-16857）

#### 核心后端{#sites-core-backend-6520}

* 在使用内容片段的快速发布时，系统会一直处于加载状态且未能发布。也就是说，在从 AEM 6.5.7 升级至 AEM 6.5.17 的服务包后，内容片段的快速发布功能无法正常工作。而当用户尝试使用托管发布时则可成功。但在尝试快速发布时，内容未能发布。具体原因是，`com.day.cq.wcm.core.impl.reference.ActivationReferenceSearchBuilder` 导致系统崩溃。（SITES-17311）
* 内容片段无法通过 Jackson 导出器进行序列化：当页面中引用了内容片段（使用 Jackson 导出器代码）且为该内容片段添加了标记时，页面加载会失败。（SITES-18096）

#### 核心组件{#sites-core-components-6520}

* 在 AEM 上安装 CIF 核心组件包会导致现有组件的 `:type` 值发生变化。该变化意味着这些组件在其已添加的页面中将无法再正常渲染。（SITES-17601）

#### 营销活动集成{#sites-campaign-integration-6520}

* 由于漏洞报告，AEM 使用了允许列表（也称为 `whitelist`）。但该允许列表阻止了客户使用所需的功能。（SITES-16822）

#### 体验片段{#sites-experiencefragments-6520}

* 体验片段的 MSM 现已支持批量转出到包含文件夹和子文件夹的体验片段内容结构。（SITES-16004）

<!--#### Foundation Components (Legacy){#sites-foundation-components-legacy-6520}

* text

#### Launches{#sites-launches-6520}

* text -->

#### MSM - Live Copy {#sites-msm-live-copies-6520}

* 在转出组件时会抛出 &quot;`Is not modifiable`&quot; 异常。具体来说，在响应处理过程中会出现 `org.apache.sling.servlets.post.impl.operations.ModifyOperation` 异常。（SITES-18809）
* 无法将更改转出到体验片段的特定 Live Copy。（SITES-17930）
* 当用户在 Blueprint 页面的组件上添加注释并转出后，Live Copy 中的注释数量显示不正确。（SITES-17099）
* 在触控图形用户界面中，从父页面到子页面的 MSM 转出按钮无法使用；选择该按钮时会显示以下错误：`Uncaught TypeError: _g.shared is undefined`。（SITES-16991）

#### 页面编辑器{#sites-pageeditor-6520}

* Forms 主题编辑器的预览功能损坏。选择“预览”时，仅会显示加载图标。（SITES-17164）

### [!DNL Assets]{#assets-6520}

* 在元数据编辑器助手中无法验证基于规则的字段，并显示错误消息“缺少必填字段”。（ASSETS-31396）
* 当 PDF 被移动到其他位置后，**[!UICONTROL 查看页面]**&#x200B;选项消失。（ASSETS-30538）
* 无法选择具有读取权限的图像。（ASSETS-32199）
* 无法在视图设置中更改卡片大小。（ASSETS-31667）
* 上传 .oft 文件类型时上传失败。（ASSETS-30109）
* 尝试将自定义元数据字段作为附加列添加到报告时，复选框未被选中。（ASSETS-31671）
* 在 Experience Manager 服务包 16 中，资产移动操作无法正常工作。（ASSETS-30598）

#### [!DNL Dynamic Media]{#assets-dm-6520}

* 自 2024 年 5 月 1 日起，Adobe Dynamic Media 将终止对以下内容的支持：

   * SSL（安全套接字层）2.0
   * SSL 3.0
   * TLS（传输层安全性）1.0 和 1.1
   * TLS 1.2 中的以下弱密码：
      * `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`
      * `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`
      * `TLS_RSA_WITH_AES_256_GCM_SHA384`
      * `TLS_RSA_WITH_AES_256_CBC_SHA256`
      * `TLS_RSA_WITH_AES_256_CBC_SHA`
      * `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`
      * `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`
      * `TLS_RSA_WITH_AES_128_GCM_SHA256`
      * `TLS_RSA_WITH_AES_128_CBC_SHA256`
      * `TLS_RSA_WITH_AES_128_CBC_SHA`
      * `TLS_RSA_WITH_CAMELLIA_256_CBC_SHA`
      * `TLS_RSA_WITH_CAMELLIA_128_CBC_SHA`
      * `TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA`
      * `TLS_RSA_WITH_SDES_EDE_CBC_SHA`

  另请参阅 [Dynamic Media 限制](/help/assets/limitations.md)。
* 当资产上传至 AEM 时，会触发 `Update_asset` 工作流。但该工作流从未完成。工作流仅会执行到产品上传步骤。下一步应为 Scene7 批量上传，但该过程未被拉取至 AEM。（ASSETS-30443）
* 在 Dynamic Media 组件中需要更好的方式来妥善处理非 Dynamic Media 视频。此问题在实例化 `dynamicmedia_sly.js` 时抛出异常。（ASSETS-31301）
* 预览功能适用于所有资产、自适应视频集和视频。但在处理 `.m3u8` 文件时会抛出 403 错误（尽管这些文件通过公共链接仍可正常使用）。（ASSETS-31882）
* `scene7SmartCropProcessingStatus` 状态已修正。此前即使智能裁剪视频元数据处理成功，状态仍显示为失败。（ASSETS-31255）

### [!DNL Forms]{#forms-6520}

<!--Fixes in [!DNL Experience Manager] Forms are delivered through a separate add-on package one week after the scheduled [!DNL Experience Manager] Service Pack release date. In this case, the AEM 6.5.20.0 Forms add-on package release is scheduled for Thursday, February 29, 2024. A list of Forms fixes and enhancements is added to this section post the release.-->

#### [!DNL Adaptive Forms]

* 当用户尝试使用 AEM 发布的 URL 将 AEM Forms 集成到邮件平台时，AEM Forms 在渲染页面时未添加 `method=post`。即使在提交操作中已将 URL 设置为 `POST`，仍会出现此问题。因此，邮件平台无法将其识别为表单。（FORMS-12614）
* 在 AEM Form 服务包 6.5.18.0 中，当用户选择具有显示模式的日期字段时，无法通过键盘选择当前日期。（FORMS-12736）
* 在 AEM Forms 服务包 6.5.17.0 和服务包 6.5.18.0 中，当用户在日程表小组件中切换月份时，日期选择器组件会显示额外的一行。（FORMS-11869）
* 当用户在 iOS 设备上的附件组件中使用“拍照”功能点击图片时，所有图像都会添加到同名文件夹中。（FORMS-12224）
* 当用户更新单选按钮组中的现有选项时，会发布错误的翻译值。（FORMS-12575）
* 当用户在 Android™ 设备上的自适应表单中添加字符时，聚焦离开文本字段后，仍可输入超过定义的最大字符数。但当用户选择 HTML5 输入类型时，该功能可正常工作。（FORMS-12748）
* 由于标签 Arial® labelledby 与 Arial® label 相同，因此屏幕阅读器无法区分二者。为了解决这个问题，表单字段的标签“aria-labelledby”被替换为“aria-describedby”。（FORMS-12436）
* 作者使用“自适应表单 - 嵌入（v2）”组件将自适应表单嵌入到其 Sites 页面中。当嵌入的表单包含 CAPTCHA 组件（CAPTCHA 服务 > reCAPTCHA，设置 > reCAPTCHA-v2）时，网站页面无法渲染。当用户尝试在创作实例中使用“以已发布视图查看”功能查看该网站页面时，会出现以下错误：以下错误显示为（FORMS-11859）：
  `Failed to construct 'URL': Invalid base URL at Object.renderRecaptcha`

* 当用户尝试使用日期选择器组件选择日期时，值未更新并显示为 NULL。（FORMS-12742、FORMS-12736）

* 当用户升级至 AEM Form 服务包 6.5.19.0 后，向现有字典添加新语言时，该语言未与 “guideContainer” 行合并，因此无法为表单添加区域设置。（FORMS-12947）

* 在 AEM Forms 服务包 6.5.19.0 上，调用的 Java™ 11 网站服务操作失败，并出现以下错误（FORMS-12329）：
  `java.lang.NoClassDefFoundError message:sun/misc/BASE64Decoder`

* 当用户在 AEM Forms 服务包 6.5.18.0 上调用 “EmailService” 的 “receive” 操作时，会抛出异常（FORMS-12050）：
  `java.util.ServiceConfigurationError: javax.mail.Provider: Provider com.sun.mail.imap.IMAPProvider not a subtype`

* 当在 AEM Forms 服务包 6.5.18.0 上启用 FIPS 模式时，在默认 DOM 下创建用户失败，并出现以下错误（FORMS-11857）：
  `com.adobe.idp.cx.a: error seeding random number generator`

* 当用户在 ADMINUI 的路径 `Home>Services>PDF Generator>Adobe PDF Settings` 下选择字体时，所选字体未被应用。此外，在标准或个性化轮廓中，“可用字体”的列表框为空。因此，无法自定义&#x200B;**始终嵌入**&#x200B;或&#x200B;**从不嵌入**&#x200B;的子列表。用户无法使用 PDF Generator 为其 PDF 配置字体。日志中也未显示任何相关错误消息。（FORMS-12095）

* 在 AEM Forms 服务包 6.5.18.0 上，用户无法创建安全设置；无错误或服务器日志，但界面会弹出错误消息。（FORMS-12212）

* 在 AEM Forms 服务包 6.5.18.0 上，当用户在 JEE 工作流中提交自适应表单时，该表单中的附件不会发送到 JEE 进程，从而导致应用程序失败。（FORMS-12232、FORMS-12228）

* 当用户将 PDF 转化为 PDF/A-2b 或 PDF/A-3B 时，转化失败，错误如下所示：（FORMS-12790）

  ```
  OCCD contains Order key that does not reference all layers.
  -> Optional content configuration dictionary has no Name entry.
  -> Font not embedded (and text rendering mode not 3).
  obj(65, 0)
  Page: 1
  -> Font not embedded (and text rendering mode not 3).
  obj(67, 0)
  Page: 1
  -> PDF/A entry missing. 
  -> PDF/A entry missing.
  ```

* 在 AEM Forms 6.5.18.0 中，当发布自适应表单时，其所有依赖项（包括策略）都会被重新发布，即使这些依赖项并未修改也是如此。（FORMS-10454）

* 在 AEM Forms 6.5.19.1 with JBoss® 一体化环境中，用户在配置管理器中选择 “Microsoft® SharePoint” 时，LiveCycle JBoss® EAR 安装失败，并显示如下错误：（FORMS-12463）

  ` Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYEE0031: Unable to process modules in application.xml for EAR ["/C:/AEM/jboss/bin/content/ adobe-livecycle-jboss.ear "], module file adobe-connectorformssharepoint-config-ejb.jar not found.`

* 在 AEM Forms 服务包 6.5.19.0 中使用表单数据模型创建文档片段时，侧边面板中的变量名称显示为未定义。但是，将其拖放到表单面板或单击后，变量名称会显示出来。（FORMS-13238）


#### [!DNL Forms Designer] {#forms-designer-6520}


* 升级到 AEM Forms 服务包 6.5.18.0 后，由于缺少异常处理，启用标记 PDF 选项并通过输出服务处理的 XDP 会失败。（LC-3921757）

* 使用 AEM Forms Designer 生成 PDF 时，在无障碍树（accessibility tree）中，会同时对标题层级与图形元素（例如矩形框）进行标记。（LC-3921687）

* 通过工作台安装的 AEM Forms Designer，在 `Control Panel/Programs/Programs and Features` 中的版本信息不够明确。（LC-3921976）

<!--* When a user creates an XDP on AEM Forms Designer, the user is not able to add the custom Caption Tag. (LC-3921246)-->

* 在 AEM Forms Designer 上创建 XDP 时，导出的 PDF 中，按钮表单标记未嵌套在父段落标记（p-tag）内。（LC-3921719）

* 在 AEM Forms Designer 上创建 XDP 时，在导出的 PDF 中，当用户在表单标记间导航时，背景对象也会被标记。（LC-3921687）

### 基础 {#foundation-6520}

#### Communities {#communities-6520}

* 成功配置用户同步后，用户同步诊断失败。（NPR-41693）

<!-- #### Content distribution{#foundation-content-distribution-6520}

* text -->

#### 集成{#integrations-6520}

* 从 AEM 6.5 中移除所有 Adobe Search&amp;Promote 相关代码与依赖项。（NPR-40856）

#### 本地化{#localization-6520}

* 在&#x200B;**[!UICONTROL 资产]** > **[!UICONTROL 文件]**&#x200B;中选择文件夹后，然后在工具栏中选择&#x200B;**[!UICONTROL 属性]** > **[!UICONTROL 权限]**&#x200B;选项卡 > 成员名称时，aria-label “关闭”未本地化。（NPR-41705）
* 在 SSL 设置页面中，**[!UICONTROL 密钥库密码]**&#x200B;字段的工具提示被截断，影响区域设置 ENG、FRA、KOR、DEU 和 PTB。（NPR-41367）

#### 平台{#foundation-platform-6520}

* 由于 /api servlet 未在 href JSON 中返回正确的架构，导致 Campaign 与 AEM 集成出现问题。原因在于 AEM 未接收到 X-Forward-Proto 标头，这迫使请求使用 HTTP 而不是 HTTPS 进行响应。因此，应通过 OSGi 配置新增切换架构选择的能力。（GRANITE-48454）

#### Sling{#foundation-sling-6520}

* `org.apache.sling.resourceMerger` 捆绑包 1.4.2 自 AEM 6.5 服务包 17 起会抛出异常。应在服务包 20 中包含 Sling 资源合并器 1.4.4。（NPR-41630）

#### 翻译{#foundation-translation-6520}

* 部署 AEM 6.5 服务包 18 后，翻译规则编辑器中的“过滤器”选项卡出现问题。在选择上下文后点击“编辑”>“保存”，下次打开同一上下文时会出现 HTML 形式的双引号字符。实质上，翻译规则没有得到正确保存。（NPR-41624）
* 与内容片段翻译相关的问题：从翻译提供商返回 AEM 的翻译后的字符串停留在 `/content/projects` 层级，未更新到内容片段中。（NPR-41516）
* 创建语言副本时显示错误消息。该问题发生在页面属性中引用了使用内容片段模型的内容片段的页面上。（NPR-41441）
* 在语言复制期间，体验片段中的链接未调整为正确的语言。相反，体验片段会指向主区域设置。（NPR-41343）

#### 用户界面{#foundation-ui-6520}

* 升级至 AEM 6.5 服务包 18 后出现控制台错误。该错误位于 `coralUI3.js` 文件中，并且它会在 AEM 中选择任意下拉菜单时触发。具体发生在 `onOverlayToggle` 事件上。显示的错误为：`Uncaught TypeError: Cannot read properties of null (reading 'innerText')`。（NPR-41467）
* 在 AEM 中，路径&#x200B;**[!UICONTROL 工具]** > **[!UICONTROL 常规]** > **[!UICONTROL 标记]** > **[!UICONTROL 创建]** > **[!UICONTROL 创建标记]**&#x200B;下，如果在&#x200B;**标题**&#x200B;字段中输入非拉丁字符，则&#x200B;**名称**&#x200B;字段仅会用一个连字符（`-`）填充。（NPR-41623）
* `About Adobe Experience Manager` 对话框中的版权年份显示错误。（NPR-41526）
* 在编辑用户设置时，**[!UICONTROL 轮廓属性]**&#x200B;部分存在未翻译的字符串。此问题在所有区域设置下都会出现。（NPR-41365）

<!-- #### WCM{#wcm-6520}

* text

#### Workflow{#foundation-workflow-6520}

* text -->

## 安装 [!DNL Experience Manager] 6.5.20.0{#install}

<!-- Remaining content from here to bottom stays the same except for version updating as needed as per update team feedback. -->

* [!DNL Experience Manager] 6.5.20.0 需要依赖 [!DNL Experience Manager] 6.5。详细说明请参阅[升级文档](/help/sites-deploying/upgrade.md)。<!-- UPDATE FOR EACH NEW RELEASE -->
* 服务包可从 Adobe [软件分发](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/servicepack/aem-service-pkg-6.5.20.0.zip)下载。
* 在使用 MongoDB 且包含多个实例的部署中，请在其中一个作者实例上使用包管理器安装 [!DNL Experience Manager] 6.5.20.0。<!-- UPDATE FOR EACH NEW RELEASE -->

>[!IMPORTANT]
>
> Adobe 不建议移除或卸载 [!DNL Experience Manager] 6.5.20.0 包。因此，在安装该包之前，您应创建 `crx-repository` 的备份，以便在需要时进行回滚。<!-- UPDATE FOR EACH NEW RELEASE -->
<!-- For instructions to install Service Pack for Experience Manager Forms, see [Experience Manager Forms Service Pack installation instructions](/help/release-notes/aem-forms-current-service-pack-installation-instructions.md). -->


### 在 [!DNL Experience Manager] 6.5 上安装服务包{#install-service-pack}

1. 如果实例处于更新模式（即由早期版本升级而来），请在安装前先重启该实例。如果实例已长时间运行，Adobe 建议先重启。

1. 在安装之前，请为您的 [!DNL Experience Manager] 实例创建快照或执行一次全新的备份。

1. 从[软件分发](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/servicepack/aem-service-pkg-6.5.20.0.zip)下载服务包。<!-- UPDATE FOR EACH NEW RELEASE -->

1. 打开包管理器，然后选择&#x200B;**[!UICONTROL 上传包]**&#x200B;以上传该包。如需了解更多信息，请参阅[包管理器](/help/sites-administering/package-manager.md)。

1. 选择该包，然后选择&#x200B;**[!UICONTROL 安装]**。

1. 要更新 S3 连接器，请在安装服务包后停止实例，用安装文件夹中提供的新二进制文件替换现有连接器，然后重新启动实例。请参阅 [Amazon S3 数据存储](/help/sites-deploying/data-store-config.md#upgrading-to-a-new-version-of-the-s-connector)。

>[!NOTE]
>
>在安装服务包过程中，包管理器 UI 中的对话框有时会意外退出。Adobe 建议您在访问部署之前，先等待错误日志趋于稳定。在确认安装成功之前，请先等待与卸载更新程序包相关的特定日志出现。通常，该问题会在 [!DNL Safari] 浏览器中出现，但也可能会在其他浏览器中间歇出现。

**自动安装**

您可以使用以下两种方法来自动安装 [!DNL Experience Manager] 6.5.20.0。<!-- UPDATE FOR EACH NEW RELEASE -->

* 当服务器在线时，将软件包放入 `../crx-quickstart/install` 文件夹中。该包会自动安装。
* 使用[包管理器的 HTTP API](/help/sites-administering/package-manager.md#package-share)。请使用 `cmd=install&recursive=true` 以便安装嵌套的包。

>[!NOTE]
>
>Experience Manager 6.5.20.0 不支持 Bootstrap 安装。<!-- UPDATE FOR EACH NEW RELEASE -->

**验证安装**

要了解与此版本兼容的已经过认证的平台，请参阅[技术要求](/help/sites-deploying/technical-requirements.md)。

1. 在[!UICONTROL 已安装的产品]下，产品信息页面（`/system/console/productinfo`）会显示更新后的版本字符串 `Adobe Experience Manager (6.5.20.0)`。<!-- UPDATE FOR EACH NEW RELEASE -->

1. 在 OSGi 控制台中，所有 OSGi 捆绑包均应处于&#x200B;**[!UICONTROL 活跃]**&#x200B;或&#x200B;**[!UICONTROL 片段]**&#x200B;状态（使用网页控制台：`/system/console/bundles`）。

1. OSGi 捆绑包 `org.apache.jackrabbit.oak-core` 的版本应为 1.22.18 或更高版本（使用网页控制台：`/system/console/bundles`）。<!-- OAK Oak oak VERSION -MAY- NEED TO BE UPDATED FOR EACH NEW RELEASE -->

### 安装 [!DNL Experience Manager] Forms 的服务包{#install-aem-forms-add-on-package}

如需了解在 Experience Manager Forms 上安装服务包的操作说明，请参阅 [Experience Manager Forms 服务包安装说明](/help/release-notes/aem-forms-current-service-pack-installation-instructions.md)。

>[!NOTE]
>
>在 [AEM 6.5 快速入门](https://experienceleague.adobe.com/zh-hans/docs/experience-manager-65/content/implementing/deploying/deploying/deploy)中谈及的自适应表单功能旨在仅作探索和评估用途。由于自适应表单功能需要适当的许可，因此必须获得 AEM Forms 的有效许可证才能作生产用途。

### 为 Experience Manager 内容片段安装 GraphQL 索引包{#install-aem-graphql-index-add-on-package}

使用 GraphQL 的客户必须安装[带有 GraphQL 索引包 1.1.1 的 Experience Manager 内容片段](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/featurepack/cfm-graphql-index-def-1.1.1.zip)。

这样做可根据实际使用的功能添加所需的索引定义。

如果未安装该包，可能会导致 GraphQL 查询变慢或失败。

>[!NOTE]
>
>每个实例只需安装一次该包；无需在每次安装服务包时重新安装。

### UberJar{#uber-jar}

适用于 [!DNL Experience Manager] 6.5.20.0 的 UberJar 可在 [Maven Central 存储库](https://repo.maven.apache.org/maven2/com/adobe/aem/uber-jar/6.5.20/)获取。<!-- CHECK FOR UPDATE EACH NEW RELEASE -->

要在 Maven 项目中使用 UberJar，请参阅[如何使用 UberJar](/help/sites-developing/ht-projects-maven.md)，并在项目 POM 中包含以下依赖项：<!-- CHECK FOR UPDATE EACH NEW RELEASE -->

```shell
  <dependency>
  <groupId>com.adobe.aem</groupId>
  <artifactId>uber-jar</artifactId>
  <version>6.5.20</version>
  <scope>provided</scope>          
  </dependency>
```

>[!NOTE]
>
>UberJar 和其他相关工件现已发布在 Maven Central 存储库，而非 Adobe 公共 Maven 存储库（`repo.adobe.com`）。主 UberJar 文件已重命名为 `uber-jar-<version>.jar`。因此，在 `dependency` 标记中不再包含以 `apis` 为值的 `classifier`。


## 已弃用和已移除的功能{#removed-deprecated-features}

请参阅[已弃用和已移除的功能](/help/release-notes/deprecated-removed-features.md/)。

## 已知问题{#known-issues}

<!-- THESE KNOWN ISSUES CARRY OVER EACH RELEASE. THE "PRODUCT UPDATES TEAM" IS SUPPOSED TO VERIFY EACH ISSUE AND LET YOU KNOW IF ANYTHING NEEDS TO BE ADDED, DELETED, OR CHANGED IN THIS LIST.-->

<!-- * **Page publishing not working in Page Editor after upgrading to Service Pack 18 (6.5.18.0)** -->

<!-- https://jira.corp.adobe.com/browse/SITES-15856 REMOVE FOR 6.5.19.0 -->
<!-- After you upgrade an instance of AEM 6.5.0.0&mdash;6.5.17.0 to AEM 6.5.19.0, when you click **Publish Page** inside the Page Editor, you are redirected to a URL that does not exist.

  To work around this issue, do one of the following:

  * Remove the following "path" property.

       `/libs/wcm/core/content/editor/jcr:content/content/items/content/header/items/headerbar/items/pageinfopopover/items/list/items/publish/granite:data`

  * Paste the correct URL directly into the browser.

       `http://localhost:4504/editor.html/libs/wcm/core/content/sites/publishpagewizard.html?item=/content/we-retail/language-masters/en/about-us.html` -->


* **与 Oak 相关**
自服务包 13 起及更高版本中，开始出现以下错误日志，从而影响持久化缓存：

  ```shell
  org.h2.mvstore.MVStoreException: The write format 1 is smaller than the supported format 2 [2.0.202/5]
  at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:1004)
      at org.h2.mvstore.MVStore.getUnsupportedWriteFormatException(MVStore.java:1059)
      at org.h2.mvstore.MVStore.readStoreHeader(MVStore.java:878)
      at org.h2.mvstore.MVStore.<init>(MVStore.java:455)
      at org.h2.mvstore.MVStore$Builder.open(MVStore.java:4052)
      at org.h2.mvstore.db.Store.<init>(Store.java:129)
  ```

  或者

  ```shell
  org.h2.mvstore.MVStoreException: The write format 1 is smaller than the supported format 2 [2.1.214/5].
  ```

  要解决此异常，请执行以下操作：

   1. 从 `crx-quickstart/repository/` 中删除以下两个文件夹

      * `cache`
      * `diff-cache`

   1. 安装服务包，或重新启动 Experience Manager as a Cloud Service。
新的 `cache` 和 `diff-cache` 文件夹会自动创建，并且不会再在 `error.log` 中遇到与 `mvstore` 相关的异常。

* 请将可能使用了自定义 API 名称的 GraphQL 查询更新为使用内容模型的默认名称。

* GraphQL 查询可能会使用 `damAssetLucene` 索引，而不是 `fragments` 索引。此操作可能导致 GraphQL 查询失败或运行时间过长。

  要解决该问题，必须在 `/indexRules/dam:Asset/properties` 下配置 `damAssetLucene`，以添加以下两个属性：

   * `contentFragment`
      * `jcr:primaryType="nt:unstructured"`
      * `name="jcr:content/contentFragment"`
      * `propertyIndex="{Boolean}true"`
      * `type="Boolean"`
   * `model`
      * `jcr:primaryType="nt:unstructured"`
      * `name="jcr:content/data/cq:model"`
      * `ordered="{Boolean}true"`
      * `propertyIndex="{Boolean}true"`
      * `type="String"`

  在修改索引定义后，需要重新索引（`reindex` = `true`）。

  完成以上步骤后，GraphQL 查询的性能应会提升。

* 当尝试移动、删除或发布内容片段、网页或页面时，获取内容片段引用的后台查询会失败。也就是说，该功能无法正常工作。
为确保该功能正常运行，必须将以下属性添加到索引定义节点 `/oak:index/damAssetLucene`（无需重新索引）：

  ```xml
  "tags": [
      "visualSimilaritySearch"
    ]
  "refresh": true
  ```

* 如果您在 Java™ 11 上将 [!DNL Experience Manager] 实例从 6.5.0 – 6.5.4 升级到最新的服务包，可能会在 `error.log` 文件中看到 `RRD4JReporter` 异常。要停止这些异常，请重新启动 [!DNL Experience Manager] 实例。<!-- THIS BULLET POINT WAS UPDATED AS PER CQDOC-20021, JANUARY 23, 2023 -->

* 用户可以在 [!DNL Assets] 的层级中重命名文件夹，并将嵌套文件夹发布到 [!DNL Brand Portal]。但是，在 [!DNL Brand Portal] 中，文件夹标题不会更新，直到重新发布根文件夹。

* 在安装 [!DNL Experience Manager] 6.5.x.x 期间，可能会显示以下错误和警告消息：
   * 当在 [!DNL Experience Manager] 中使用 Target Standard API（IMS 身份验证）配置 Adobe Target 集成时，将体验片段导出到 Target 会导致创建错误的产品建议类型。在 Target 中，系统不会创建类型为“Experience Fragment”/来源为“Adobe Experience Manager”的产品建议，而是会创建多个类型为“HTML”/来源为“Adobe Target Classic”的产品建议。
   * `com.adobe.granite.maintenance.impl.TaskScheduler`：在 granite/operations/maintenance 中未找到维护窗口。
   * 当在自适应表单中使用 SUM、MAX 和 MIN 等聚合函数时，服务器端验证失败（CQ-4274424）。
   * `com.adobe.granite.maintenance.impl.TaskScheduler` - 在 granite/operations/maintenance 中未找到维护窗口。
   * 通过 Shoppable Banner 查看器预览资产时，Dynamic Media 交互式图像中的热点不可见。
   * `com.adobe.cq.social.cq-social-jcr-provider bundle com.adobe.cq.social.cq-social-jcr-provider:1.3.5 (395)[com.adobe.cq.social.provider.jcr.impl.SpiSocialJcrResourceProviderImpl(2302)]`：等待完成取消注册的注册变更时超时。

* 从 AEM 6.5.15 开始，由 ```org.apache.servicemix.bundles.rhino``` 捆绑包提供的 Rhino JavaScript 引擎引入了新的提升行为。使用严格模式（```use strict;```）的脚本必须正确声明变量，否则将无法运行并抛出运行时错误。

* 通过官方更新包（包括服务包、安全服务包、扩展功能包、累计功能包、补丁等）安装与标记相关的开箱即用内容时，会将 `/content/cq:tags` 节点的语言属性重置为默认值。因此，在安装之前必须从属性中手动添加该项。

### AEM Forms 已知问题 {#known-issues-aem-forms-6520}

* 在基于 XDP 的自适应表单中，如果复选框中嵌入了脚本，则不会执行复选框之后的元素脚本。（FORMS-14244）
* 在具有编辑/显示模式的字段中，日期选择器小组件在弹出窗口中切换月份时，行会被截断。（FORMS-13620）
* 在后端调用 DOR（记录文档）服务时，表单提交失败。出现的错误信息为：“提交操作无法完成，因为表单资源未正确分配。”（FORMS-13798）
* 当从 Adobe Experience Manager 发布实例将自适应表单提交到 Adobe Experience Manager 工作流时，该工作流无法保存附件。（FORMS-14209）
* 安装 AEM 6.5 Forms 服务包 20 包（AEM Forms SP20 附加包）后，AEM Sites 用户界面（UI）的性能显著下降。（FORMS-13791）
* 在交互式通信中，预填充服务因空指针异常而失败。（CQDOC-21355）
* 自适应表单允许您使用 ECMAScript 5 或更早版本的自定义函数。如果自定义函数使用 ECMAScript 6 或更高版本（如 “let”、“const” 或箭头函数），规则编辑器可能无法正常打开。
* 用户无法创建通信管理书信。当用户尝试创建书信时，会出现错误提示 “`Object Object`”，并且书信未创建。在书信创建界面上，布局缩略图同样无法加载。您可以安装[最新的 AEM 6.5 Forms 服务包 20（6.5.20.0）](https://experienceleague.adobe.com/zh-hans/docs/experience-manager-release-information/aem-release-updates/forms-updates/aem-forms-releases) 来解决此问题。（FORMS-13496）
* 交互式通信服务可以生成 PDF 文档，但用户数据不会自动填充到表单字段中。预填服务未按预期运行。您可以安装[最新的 AEM 6.5 Forms 服务包 20（6.5.20.0）](https://experienceleague.adobe.com/zh-hans/docs/experience-manager-release-information/aem-release-updates/forms-updates/aem-forms-releases) 来解决此问题。（FORMS-13413、FORMS-13493）
* 自动表单转化服务的“审核与修正（RnC）”编辑器无法加载。您可以安装[最新的 AEM 6.5 Forms 服务包 20（6.5.20.0）](https://experienceleague.adobe.com/zh-hans/docs/experience-manager-release-information/aem-release-updates/forms-updates/aem-forms-releases) 来解决此问题。（FORMS-13491）
* 从 AEM 6.5 Forms 服务包 18（6.5.18.0）或 AEM 6.5 Forms 服务包 19（6.5.19.0）更新至 AEM 6.5 Forms 服务包 20（6.5.20.0）后，用户会遇到 JSP 编译错误。此时无法打开或创建自适应表单，并且在其他 AEM 界面（如页面编辑器、AEM Forms UI 和 AEM 工作流编辑器）中也会出现错误。您可以安装[最新的 AEM 6.5 Forms 服务包 20（6.5.20.0）](https://experienceleague.adobe.com/zh-hans/docs/experience-manager-release-information/aem-release-updates/forms-updates/aem-forms-releases) 来解决此问题。（FORMS-13492）
* 在基于 XDP 的自适应表单中，如果复选框中嵌入了脚本，则不会执行复选框之后的元素脚本。（FORMS-14244）
* 在具有编辑/显示模式的字段中，日期选择器小组件在弹出窗口中切换月份时，行会被截断。（FORMS-13620）
* 在后端调用 DOR（记录文档）服务时，表单提交失败。出现的错误信息为：“提交操作无法完成，因为表单资源未正确分配。”（FORMS-13798）
* 当用户从 AEM 6.5 Forms 服务包 18（6.5.18.0）或 AEM 6.5 Forms 服务包 19（6.5.19.0）升级到 AEM 6.5 Forms 服务包 20（6.5.20.0）或 AEM 6.5 Forms 服务包 21（6.5.21.0）时，会遇到 JSP 编译错误。该错误会阻止用户打开或创建自适应表单，并导致其他 AEM 界面（如页面编辑器、AEM Forms UI 以及 AEM 工作流编辑器）也出现错误。（FORMS-15256）

  如果遇到此类问题，请执行以下步骤进行解决：
   1. 进入 CRXDE 中的目录 `/libs/fd/aemforms/install/`。
   1. 删除名为 `com.adobe.granite.ui.commons-5.10.26.jar` 的捆绑包。
   1. 重新启动 AEM 服务器。
* 在交互式通信代理 UI 的打印预览中，货币符号（如美元符号 $）在各字段值中的显示不一致。对于不超过 999 的数值会显示符号，但对于 1000 及以上的数值则缺少符号。（FORMS-16557）
* 在交互式通信中，对嵌套布局片段的 XDP 所做的任何修改都不会反映在 IC 编辑器中。（FORMS-16575）
* 在交互式通信代理 UI 的打印预览中，部分计算值未正确显示。（FORMS-16603）
* 在打印预览中查看信件时，内容会发生变化。部分空格会消失，某些字母会被替换为 “x”。（FORMS-15681）

<!--Customers can install the  latest AEM 6.5 Forms Service Pack to resolve the aforementioned issues.  Here are the direct links for the supported operating systems:
* [AEM 6.5 Forms Service Pack 20 for Apple macOS](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/servicepack/fd/ADOBE-AEMFD-OSX-PKG-6.0.1192.zip)
* [AEM 6.5 Forms Service Pack 20 for Microsoft Windows](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/servicepack/fd/ADOBE-AEMFD-WIN-PKG-6.0.1192.zip)
* [AEM 6.5 Forms Service Pack 20 for Linux](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/servicepack/fd/ADOBE-AEMFD-LINUX-PKG-6.0.1192.zip)
-->

<!--Known issues in [!DNL Experience Manager] Forms are delivered through a separate add-on package one week after the scheduled [!DNL Experience Manager] Service Pack release date. In this case, the AEM 6.5.20.0 Forms add-on package release is scheduled for Thursday, February 29, 2024. A list of known issues for forms is added to this section post the release.-->

<!--
#### Install the servlet fragment (AEM Service Pack 6.5.14.0 or earlier)

* If you are upgrading to AEM Service Pack 6.5.15.0 or higher, and your AEM instance is operating on Tomcat 8.5.88, it is mandatory that you install the servlet fragment *before* you proceed with the installation of Service Pack 6.5.15.0 or higher.
* It is mandatory that you install the servlet fragment for all application servers except those running on JBoss&reg; EAP 7.4.0.

**To install the servlet fragment:**

1. Download the servlet fragment from [Software Distribution](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/featurepack/org.apache.felix.http.servlet-api-1.2.0_fragment_full.jar).
1. Start the application server. 
1. Wait for the logs to stabilize and check the bundle state.
1. Open Web Console Bundles. The default URL is `http://[Server]:[Port]/system/console/bundles`.
1. Select **[!UICONTROL Install]** or **[!UICONTROL Update]**. 
1. Select the downloaded fragment 
`org.apache.felix.http.servlet-api-1.2.0_fragment_full.jar` 
1. Select **[!UICONTROL Install]** or **[!UICONTROL Update]**. 
1. Wait for the application server to stabilize.
1. Stop the application server.

-->

## 包含的 OSGi 捆绑包和内容包{#osgi-bundles-and-content-packages-included}

以下文本文档列出了此 [!DNL Experience Manager] 6.5 服务包版本中包含的 OSGi 捆绑包和内容包：

* [Experience Manager 6.5.20.0](/help/release-notes/assets/65200-bundles.txt) 中包含的 OSGi 捆绑包列表 <!-- UPDATE FOR EACH NEW RELEASE -->
* [Experience Manager 6.5.20.0](/help/release-notes/assets/65200-packages.txt) 中包含的内容包列表 <!-- UPDATE FOR EACH NEW RELEASE -->

## 受限网站{#restricted-sites}

这些网站仅向客户开放。如果您已是客户并需要访问权限，请联系您的 Adobe 客户经理。

* [在 licensing.adobe.com 下载产品](https://licensing.adobe.com/)
* [联系 Adobe 客户支持部门](https://experienceleague.adobe.com/zh-hans/docs/customer-one/using/home)。

>[!MORELIKETHIS]
>
>* [[!DNL Experience Manager] 产品页面](https://business.adobe.com/products/experience-manager/adobe-experience-manager.html)
>* [[!DNL Experience Manager] 6.5 文档](https://experienceleague.adobe.com/zh-hans/docs/experience-manager-65)
>* [订阅 Adobe 产品更新早知道](https://www.adobe.com/subscription/priority-product-update.html)
