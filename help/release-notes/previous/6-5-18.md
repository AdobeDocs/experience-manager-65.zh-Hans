---
title: ' [!DNL Adobe Experience Manager] 6.5 发行说明'
description: 查找  [!DNL Adobe Experience Manager] 6.5 的版本信息、新增功能、安装指南和详细变更列表。
mini-toc-levels: 4
exl-id: d0dc5dfb-25a3-4388-a1d4-abba70081cc3
solution: Experience Manager
feature: Release Information
role: User,Admin,Architect,Developer
source-git-commit: 984f07b134473ef80038bee68520b2a8e4fd495f
workflow-type: ht
source-wordcount: '4872'
ht-degree: 100%

---

# [!DNL Adobe Experience Manager] 6.5.18.0  {#aem-service-pack-release-notes}

<!-- For an itemized list of all issues found in these release notes, see the following spreadsheet: https://adobe-my.sharepoint.com/:x:/r/personal/anujkapo_adobe_com/Documents/issue_tracker_sp_cfp_updates.xlsx?d=w3ea81ae4e6054153b132f2698c86f84e&csf=1&web=1&e=7yhrWb&nav=MTVfe0U0RjdDQUM3LTZCQ0EtNDk1Qy04Mjc1LTM2MUJEMzE1OEVGN30 -->

<!-- DO NOT DELETE THIS HIDDEN NOTE      DO NOT DELETE THIS HIDDEN NOTE
>[!NOTE]
>
>Fixes in [!DNL Experience Manager] Forms are delivered through a separate add-on package one week after the scheduled [!DNL Experience Manager] Service Pack release date. In this case, the add-on packages release Thursday, June 1, 2023. In addition, a list of Forms fixes and enhancements is added to this section. -->

## 发行版本信息 {#release-information}

| 产品 | [!DNL Adobe Experience Manager] 6.5 |
| -------- | ---------------------------- |
| 版本号 | 6.5.18.0 <!-- UPDATE FOR EACH NEW RELEASE --> |
| 类型 | 服务包发行 |
| 日期 | 2023 年 8 月 24 日星期四 <!-- UPDATE FOR EACH NEW RELEASE --> |
| 下载 URL | [软件分发](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/servicepack/aem-service-pkg-6.5.18.0.zip) <!-- UPDATE FOR EACH NEW RELEASE --> |

## [!DNL Experience Manager] 6.5.18.0 的内容 {#what-is-included-in-aem-6518}

自 2019 年 4 月 6.5 首次发布以来，[!DNL Experience Manager] 6.5.18.0 陆续发布了新增功能、客户重点请求的增强功能、错误修复，以及在性能、稳定性与安全性方面的改进。[在 [!DNL Experience Manager] 6.5 上安装此服务包](#install)。

<!-- UPDATE FOR EACH NEW RELEASE -->

<!-- Some of the key features and improvements are the following:

* _REVIEWERS: WHAT ARE THE KEY FEATURES AND ENHANCEMENTS YOU WANT TO HIGHLIGHT IN THIS RELEASE?_ -->

本次版本中的部分主要功能和增强功能包括：

**主要功能**

* Assets, Dynamic Media - [为 Dynamic Media 视频提供多字幕和多音轨支持](/help/assets/video.md#about-msma)——现在您可以轻松为主视频添加多个字幕和多条音轨。此功能意味着全球观众都能观看您的视频。您可以用多种语言为全球观众自定单一的、已发布的主视频，并遵守不同地区的可访问性指南。此外，作者从用户界面中的一个选项卡即可管理字幕和音轨。

* Assets - 在搜索结果中，您现在可以直接导航到包含该资产的文件夹位置，以便执行各种资产管理任务。（ASSETS-23182）

**主要增强功能**

* 内容片段中的 Sites Polaris 选择器性能已得到提升。（SITES-14092）

* 在 Sites 页面编辑器/图像组件中，用户现已可以引用来自远程 Assets 云服务的资产。（SITES-13448、SITES-13433）

* 为了在系统中包含大量项目时能够快速在列表视图中找到项目，Adobe 现已支持服务器端排序。项目节点会在后台根据用户选择的列进行排序，然后才会在用户界面中呈现。（NPR-41027）

* AEM 6.5.18.0 支持 MongoDB 5.0 到 6.0。

**已弃用的功能**

* AEM 中的 ActiveMQ 已弃用。ActiveMQ 曾用于两个 AEM 发布实例之间的通信。Adobe 建议客户现在改为使用负载均衡器。

**Forms**

* **[通过规则编辑器中的自定义错误处理程序增强错误处理能力](https://experienceleague.adobe.com/docs/experience-manager-65/forms/adaptive-forms-advanced-authoring/standard-validation-error-messages-adaptive-forms.html?lang=zh-Hans)**——您现在可以在外部服务返回错误时调用自定义函数（使用客户端库）。并且，您可以向终端用户提供定制化响应。或者，您可以针对服务返回的错误采取特定操作。例如，您可以在后台针对特定错误代码调用自定义工作流，或告知用户该服务当前不可用。

* **[增强的 Adobe Sign 工作流步骤](https://experienceleague.adobe.com/docs/experience-manager-65/forms/workflows/aem-forms-workflow-step-reference.html?lang=zh-Hans#sign-document-step)**——AEM 工作流中的 Adobe Sign 工作流步骤现已提供以下增强功能。

   * **基于政府身份证件的 Adobe Sign 身份验证增强安全性**——Adobe Acrobat Sign 的政府身份证件验证功能提供了额外的安全保障。用户可通过政府签发的身份证件（如驾驶证、国家身份证、护照）来验证其身份。通过利用可信身份证明文件，此增强将签名过程的可信度提高一级，使其成为需要更高的安全性、合规性和用户验证的场景的理想之选。

   * **通过审核记录提升 Adobe Sign 文档透明度**——借助审核记录功能，您可以深入了解 Adobe Sign 文档的完整生命周期。利用审核记录功能，您现在可保留与文档相关的所有操作和交互的全面记录。其中包括查看者、编辑者或签署文档者以及每个事件的时间戳等详细信息。此增强对于保持合规性、解决争议和确保数字协议的完整性至关重要。


   * **扩展协议接收人的角色设置，不再局限于签署人**——Adobe Acrobat Sign 现已支持将协议接收人的角色扩展到签署人之外，以更好地满足不同的工作流需求。启用此选项后，协议中的每个接收者均可单独配置其角色，其中签名者为默认角色。


* **[EE 上的 AEM Forms 完整安装程序](https://experienceleague.adobe.com/docs/experience-manager-65/forms/install-aem-forms/jee-installation/aem-forms-jee-supported-platforms.html?lang=zh-Hans)**——此服务包提供 EE 上的 AEM Forms 的完整安装程序，并支持多种全新的软件组合，其中包括：
   * Microsoft® Windows Server 2022
   * Microsoft® Active Directory 2022
   * Oracle WebLogic 14C（适用于 Windows Server 2022）
   * Red Hat® JBoss® 7.4.10
   * MongoDB 6.0 <!-- it was previously MongoDB 4.4 -->
   * MySQL JDBC Connector 8

如果您正在安装或计划在 JEE 环境中使用 AEM 6.5 Forms 的最新软件，Adobe 建议使用 JEE 上的 AEM 6.5.18.0 Forms 完整安装程序。有关新增和弃用软件的完整列表，请参阅 JEE 上的 AEM Forms 或 OSGi 上的 AEM Forms 的相关文档。

<!-- UPDATE BELOW FOR EACH NEW RELEASE -->

## 服务包 18 中已修复的问题 {#fixed-issues}

### [!DNL Sites]{#sites-6518}

* 使用批量编辑器下载 `tsv` 导出文件，离线修改后再将 `tsv` 上传回 Experience Manager，以更新多个页面的属性。尽管页面已更新，但 JCR 属性 `cq:lastModified` 没有被更新，因此在时间线中也未反映出来。（SITES-14072）
* 在创建体验片段的 Live Copy 或执行转出时，体验片段中的链接引用不会更新。（SITES-14759）
* 在 Experience Manager 开箱即用的标准转出配置中，从父页面添加了一个工作流同步操作“转出页面及子页面”，但异步作业会因 NullPointer 异常而失败。源位置页面（en-us）在父页面中不存在，但在目标位置（Live Copy）（en）中存在。（SITES-12207）
* 您有一个包含 `jcr:description` 的 “en” 页面，并发送该页面以供翻译。`jcr:description` 会被翻译，并且该属性会出现在发布项中。然而，当发布项被推广时，页面中的 `jcr:description` 并未更新。（SITES-13146）
* 在 Blueprint 转出后，Live Copy 上的本地化内容会丢失。（SITES-12602）

#### 管理用户界面{#sites-adminui-6518}

* 如果通过用户 Admin Console 移除了用户的删除权限，该用户在 sites.html 控制台中（选择页面时）将不会再看到“属性”按钮。然而，如果用户打开页面编辑器，该选项仍然可见。（SITES-14341）
* 当一个文件夹包含大量页面且每个页面有多个版本时，使用版本比较功能会导致实例负载过高。如果同时有多个用户使用该功能，实例可能会崩溃。（SITES-13026）

#### [!DNL Content Fragments]{#sites-contentfragments-6518}

* 在 `RemoteAssetClientImpl` 中发现进行异常处理时存在问题。当在查询元数据时发生 IOException 或 RuntimeException 时，当前线程会尝试关闭并重新创建共享的 httpClient，这可能会导致线程中出现一系列其他错误。（SITES-14092）
* 当作者在内容片段的富文本编辑器字段中填写内容，并在链接中插入图像时，如果通过 GraphQL API 查询该内容片段，则会返回错误信息：`Exception while fetching data (/genericContentByPath) : null`。该错误仅在链接中包含图像时出现。如果从链接中移除图像，错误信息则会消失。（SITES-13988）
* Experience Manager 6.5 的 GraphQL 实施未与主分支保持一致，并且缺少若干重要修复。（SITES-13096）
* 在访问元数据服务端点时，需要一个必填的 HTTP 标头。（SITES-13068）

#### 核心组件{#sites-core-components-6518}

* 资产选择器在关闭并重新打开时不会获取最新的资产列表。如果在存储库中上传了新资产，这些资产不会在资产选择器中显示，除非刷新包含资产选择器的页面。（SITES-14828）
* 集成在 Sites 编辑器（CS）中的资产选择器用户界面在窗口缩小时无响应。（SITES-14127）
* 资产选择器集成的 Adobe IMS（身份管理系统）配置接受了错误的值。（SITES-13962）
* 当资产选择器集成在 Sites 图像组件中时，不应允许选择非图像资产。（SITES-13879）
* 成功登录后，用户会被重定向到页面编辑器。此时用户必须重新打开资产选择器才能选择远程资产。（SITES-13851）
* 远程资产选择器总是重定向到 Adobe IMS（身份管理系统）的暂存环境。（SITES-13448、SITES-13433）

<!-- #### [!DNL Experience Fragments]{#sites-experiencefragments-6518}

* A -->

#### 页面编辑器{#sites-pageeditor-6518}

* 当作者打开页面属性时，对话框的显示不正确。也就是说，会出现额外的水平滚动条和多余的边距。（SITES-14502）
* 在 Experience Manager 6.5 服务包 17 中为锚点和正文标记新增的样式导致出现 CSS 问题。在“作者”中，锚点标记未显示下划线。（SITES-14261）

### [!DNL Assets]{#assets-6518}

* 在编辑资产时，屏幕阅读器不会朗读[!UICONTROL 开始裁剪]选项的展开或折叠状态。（NPR-40593）
* 在 AEM 6.5.17.0 实例上上传资产时，Experience Manager 会显示错误和警告消息。（ASSETS-26232）
* 当您将一个来自具有完全访问权限文件夹的资产关联到一个来自只读文件夹的资产时，Experience Manager 会显示错误消息，但仍会在两个资产之间创建部分关联。（ASSETS-25832）
* 在 AMS 实例与云服务实例之间，连接的资产无法正常工作。（ASSETS-24930）
* 在编辑元数据架构表单时，[!UICONTROL 开始时间]和[!UICONTROL 结束时间]字段的值无法正确保存。（ASSETS-24871）
* 在生成已训练标记的智能标记报告时，置信度较低的标记不会被列出。（ASSETS-24109）
* 在列视图中编辑和批注图像时，Experience Manager 会显示空白屏幕。（ASSETS-24108）
* 在创建收藏集时，屏幕阅读器不会朗读“添加用户”字段的用途。（ASSETS-21736）
* 在收藏集属性页面上，**收藏集**&#x200B;标签未进行本地化。（ASSETS-21102）
* 当您使用默认的元数据架构表单添加规则或编辑现有规则时，下拉列表中的语言未进行本地化。（ASSETS-21026）
* 在元数据架构中添加 JSON 路径时，Experience Manager 会显示未本地化的错误消息。（ASSETS-21025）
* 左侧导航中的时间线选项未显示合适的对比度。（ASSETS-17348）
* 日程表元素未使用所需的 ARIA 属性。（ASSETS-17282）
* 左侧导航文本未显示合适的对比度。（ASSETS-17268）
* Lightbox 图像未对屏幕阅读器用户隐藏。（ASSETS-17263、ASSETS-17242）
* 活动用户界面的状态在背景对比度方面未达到合适的比例。（ASSETS-17260）
* 在为资产添加批注时，使用键盘的箭头键导航时，屏幕阅读器无法识别[!UICONTROL 另存为版本]或[!UICONTROL 启动工作流]按钮。（ASSETS-17253）
* 在资产主页上，某些 ARIA 角色未包含适当的子角色。（ASSETS-17248）
* 当您使用键盘导航到图像类型资产的编辑选项时，[!UICONTROL 启动映射]选项无法得到识别，并且键盘焦点会跳转到“取消”按钮。（ASSETS-17238）

#### [!DNL Dynamic Media]{#assets-dm-6518}

* 当 VTT 下载失败时，视频不可见。界面显示空白屏幕，但视频进度条仍在向前移动。（ASSETS-21909）
* 在使用键盘 Tab 键导航时，焦点不会移动到视频下方的多个控件。因此无法访问这些控件。改进了交互式视频的键盘导航。（ASSETS-25749）
* 修复了在 Dynamic Media 组件中仍显示已禁用的查看器预设的问题。（ASSETS-22922）
* 已从常规设置的“安全”选项卡中移除“图像服务”。（ASSETS-24618）
* 修复了资产上传到 Dynamic Media 失败以及出现 StringIndexOutOfBoundsException 的问题。（ASSETS-25787）
* 在“基本”选项卡中，为必填的“宽度”编辑字段添加了可视化星号标识。（ASSETS-25741）
* 修复了下载带水印的 Dynamic Media 演绎版失败的问题。（ASSETS-26173）
* 重新启用了非视频资产名称的 127 个字符限制。（ASSETS-26074）

### [!DNL Forms]{#forms-6518}

<!-- Fixes in [!DNL Experience Manager] Forms are delivered through a separate add-on package one week after the scheduled [!DNL Experience Manager] Service Pack release date. In this case, the AEM 6.5.18.0 Forms add-on packages release is scheduled for Thursday, August 31, 2023. A list of Forms fixes and enhancements would be added to this section post the release. -->

* **文档服务**
   * 当用户使用 transformPDF 服务时，会因异常而失败：`java.lang.ClassNotFoundException: default task-158Class name com.adobe.internal.afml.AFMLExceptionInvalidParameter from package com.adobe.internal.afml`（FORMS-9957）
   * 如果在生成 PDF 文档过程中关闭服务器，服务器重启后会抛出作业处理错误。在服务器启动时必须添加参数 -Dcom.adobe.livecycle.dsc.deferServiceStart=true。（FORMS-9836）
   * 当用户尝试使用 AssemblerService.Invoke 方法合并 PDF 时，组装器无法执行该任务。（FORMS-9550）
   * 在 OSGI 和 JEE 环境中升级至 AEM 6.5.15.0 服务包后，使用特定模板的组装服务将停止工作。（FORMS-9355、FORMS-9445、FORMS-9408）
   * 由于 XMLFormService 的全局超时未配置为合适的值，AEM Forms OSGi 服务器上的 Java™ 垃圾回收无法清理老年代堆内存。（FORMS-9384、FORMS-9035）
   * 在渲染自适应表单的 PDF 预览时，不必要的 Java™ 堆栈转储会出现在错误日志中。（FORMS-8865）
   * 当用户在文档详细信息部分查看文档状态时，状态未正确显示。（FORMS-8946、FORMS-10424）
   * 当用户升级到 AEM Forms 并使用 sendToPrinter 服务时，堆内存使用率会持续增加。（FORMS-10148）
   * 在 JBoss® 7.4 EAP 服务器上，电子邮件功能会因 `java.io.IOException` 而失败。（FORMS-10138）
   * 当用户使用 transformPDF 服务时，会因出现错误而失败：`java.lang.ClassNotFoundException: default task-158Class name com.adobe.internal.afml.AFMLExceptionInvalidParameter from package com.adobe.internal.afml`（FORMS-9957）
   * 升级至 AEM 服务包 6.5.14.0 后，在使用特定模板时，组装服务会出现问题。（FORMS-9445、FORMS-9408）
  <!-- *  When a user configures the watched folder endpoint for PDF Generator, it fails to pick documents on JDK 11. (FORMS-10152) -->
* **自适应表单**
   * 当用户尝试调用自定义函数而未修改某个字段（例如设置另一个字段的值）时，操作会失败。（FORMS-9921）
   * 在自适应表单中使用规则编辑器的自定义错误函数时，会出现以下问题：
      * 当用户尝试在函数中使用 @param{boolean} 时，规则编辑器不允许将布尔值传递给函数。
      * 当用户尝试在函数中使用 @param{string} 时，规则编辑器无法传递可选值，并提示规则不完整。（FORMS-9816、FORMS-9815）
   * 在自适应表单中，forms-user 组无法连续两次调用规则编辑器。（FORMS-9051）
   * 在可视化编辑器中，当用户选择一个表单对象时，整个字段实例对象会传递给自定义函数，而不仅仅是字段的值。（FORMS-10015）
   * 当用户创建基于核心组件的自适应表单并添加文本输入组件时，在规则编辑器中，`Is Empty` 和 `Is Not Empty` 无法正常工作。（FORMS-10098）
   * 在基于核心组件的自适应表单中，如果某个字段被标记为无效，该字段会触发一个更改事件。（FORMS-10087）
   * 当用户尝试使用复杂的 JSON 架构创建自适应表单时，操作会失败。错误表现如下：
     `GET /content/forms/af/katezeroone/testaf1.html HTTP/1.1] com.adobe.aemds.guide.service.impl.JsonObjectCreatorImpl Could not emit JSON with context java.lang.ArrayIndexOutOfBoundsException:0`。（FORMS-9639）
   * 在自适应表单中，当用户禁用“我同意条款与条件”复选框时，向下滚动页面后该复选框会再次被启用。（FORMS-9458）
   * 当用户在 Android™ 设备上使用 Google Chrome 或 Firefox 打开自适应表单，并在文本框中输入最大允许字符数时，文本框中的值无法清除。（FORMS-9354）
   * 当复选框的标签中包含特殊字符（如“,”、“/”或“.”）时，点击文本/标签不会选中相应的复选框。（FORMS-9313）
   * 当用户尝试验证“条款与条件”组件时，如果该组件未处于焦点状态，则验证会失败，而其他组件能够正常验证。（FORMS-8725、FORMS-8913）
   * 在升级到 AEM 6.5.16.0 服务包后，如果重新加载自适应表单，文件附件的检索会失败。（FORMS-8906）
   * 在基于 XDP 的自适应表单中，如果复选框组件包含分配了数值的文本标题，该文本标题会被截断，且与分配的值不匹配。（FORMS-8743）
   * 当用户在创作环境中的自适应表单里为嵌入的片段实施延迟加载时，该片段定义的规则/逻辑不会在表单中生效。（FORMS-8554、FORMS-9182）
   * 在 AEM 6.5.16.0 服务包中尝试打开任何 Coral 对话框时，会生成 `error.log: cannot render resource` 异常。（FORMS-8942）
   * 当用户尝试翻译自适应表单中的单选复选框时，操作会失败。（FORMS-10181）
   * 所有记录文档（DoR）模板均无法发布。只有基于英语区域设置的 DoR 模板及其关联的基于 Forms 的 DoR 模板能够发布。（FORMS-10535）

* **辅助功能**
   * 在自适应表单中使用手写签名组件时，会出现以下问题：
      * 在手写签名组件之后还有其他组件时，按 Tab 键不会跳转到签名对话框，而是会直接跳到下一个组件。只有在遍历所有组件后，才会跳转到签名对话框。
      * 当用户在签名对话框中使用画笔或键盘签名时，按输入键不会关闭对话框。
      * 无法通过键盘访问确认清除签名的对话框。
      * 屏幕阅读器无法读取输入到对话框中的信息。
      * 无法在不使用鼠标的情况下清除签名。（FORMS-9317）
   * 当用户提交自适应表单时，屏幕阅读器无法读取必填字段的错误消息（FORMS-9316）
   * 当屏幕阅读器读取 HTML 表单时，在读取带字距（间距）的文本时会出现问题。（FORMS-9258）
   * 在自适应表单中，文本所链接的引用/脚注无法由屏幕阅读器识别。（FORMS-8920）
   * 在最新版本的 Designer 中，无法正确识别辅助功能标记。（FORMS-10139）
* **交互式通信**
   * 在通信管理中，本地化未生效。（FORMS-8926）
   * 使用 publishAll 服务时，草稿信件无法打开。（FORMS-8589）
   * 在服务器上安装 Experience Manager 服务包 16 后，所有交互式通信信件在尝试编辑时都会卡住。如果提供示例负载进行预览或查看/编辑属性页面，则可以正常使用。但用户无法编辑这些信件。（FORMS-9067）


<!-- ### [!DNL Commerce]{#commerce-6518}

* A -->

### 基础{#foundation-6518}

#### 内容分发{#foundation-content-distribution-6518}

* 资产删除队列不应受到阻塞，且日志文件中不应出现错误。（NPR-40570）

<!-- #### Integrations{#integrations-6518}

* A -->

<!-- #### Oak{#oak-6518}

* A -->

#### 平台{#foundation-platform-6518}

* 在全新安装 Experience Manager 服务包 17 后，`stderr.log` 中会出现错误。全新安装本不应产生错误。（CQ-4353637）
* 在标记界面中，“创建”按钮未遵循 ACL（访问控制列表）权限。（NPR-40973）
* 在 Experience Manager 中无法创建、访问或同时创建和访问 ContextHub 的缓存节点。（NPR-40515）

#### 复制{#foundation-replication-6518}

* 复制刷新操作会删除所请求路径的所有子项。（NPR-40569）

#### Sling{#foundation-sling-6518}

* 生成链接共享报告时，“链接”列不包含正确的值。（NPR-40798）
* 在 AEM 6.5.15.0 中，AEM 重启后，所有虚名 URL、Sling 别名和 Sling 映射均失效。（NPR-40420）

#### 翻译项目{#foundation-translation-6518}

* 当从翻译配置用户界面添加规则时，翻译 `rules.xml` 的排序方式不合理。（NPR-40431）
* 在翻译过程中支持带查询参数的链接。（NPR-40339）
* 在更新了额外的上下文根后，客户词典用户界面无法加载。（NPR-40650）
* 当某个资产是包含 ReferenceFragment 或 ContentFragment 类型多字段的内容片段时，创建语言副本会报错。（NPR-40892）

#### 用户界面{#foundation-ui-6518}

* 如[配置浏览器文档](https://experienceleague.adobe.com/docs/experience-manager-65/administering/introduction/configurations.html?lang=zh-Hans#using-configuration-browser)所述，_名称会成为存储库中的节点名称_。但是，在配置浏览器中，CRXDE Lite 中的路径使用的是配置标题，而配置名称会被忽略。（NPR-40607）

<!-- #### WCM{#wcm-6518}

* A -->

#### 工作流{#foundation-workflow-6518}

* 还原资产版本后，资产状态会一直停留在“处理中”。（NPR-41029）
* 在资产和项目用户界面上存在排序问题。部分客户根据业务需求在资产和项目界面上叠加了自定义列。他们使用开箱即用的属性 `sortable=true` 实施排序。但当项目或资产用户界面中存在大量条目时，排序结果会出现不一致。（NPR-41027）
* 日志中不断充斥着 `EMailNotificationService` 的 `NullPointerException`，并且原本应由工作流发送的电子邮件未能发送。（NPR-40898）
<!-- REMOVED BY ENGINEERING FROM TOTAL RELEASE CANDIDATE LIST  * The timeline is not providing references to the selected content. (NPR-40806) -->

## 安装 [!DNL Experience Manager] 6.5.18.0{#install}

<!-- Remaining content from here to bottom stays the same except for version updating as needed as per update team feedback. -->

* [!DNL Experience Manager] 6.5.18.0 需要依赖 [!DNL Experience Manager] 6.5。详细说明请参阅[升级文档](/help/sites-deploying/upgrade.md)。<!-- UPDATE FOR EACH NEW RELEASE -->
* 服务包可从 Adobe [软件分发](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/servicepack/aem-service-pkg-6.5.18.0.zip)下载。
* 在使用 MongoDB 且包含多个实例的部署中，请在其中一个作者实例上使用包管理器安装 [!DNL Experience Manager] 6.5.18.0。<!-- UPDATE FOR EACH NEW RELEASE -->

>[!IMPORTANT]
>
> Adobe 不建议移除或卸载 [!DNL Experience Manager] 6.5.18.0 包。因此，在安装该包之前，您应创建 `crx-repository` 的备份，以便在需要时进行回滚。<!-- UPDATE FOR EACH NEW RELEASE -->
<!-- For instructions to install Service Pack for Experience Manager Forms, see [Experience Manager Forms Service Pack installation instructions](/help/release-notes/aem-forms-current-service-pack-installation-instructions.md). -->


### 在 [!DNL Experience Manager] 6.5 上安装服务包{#install-service-pack}

1. 如果实例处于更新模式（即由早期版本升级而来），请在安装前先重启该实例。如果实例已长时间运行，Adobe 建议先重启。

1. 在安装之前，请为您的 [!DNL Experience Manager] 实例创建快照或执行一次全新的备份。

1. 从[软件分发](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/servicepack/aem-service-pkg-6.5.18.0.zip)下载服务包。<!-- UPDATE FOR EACH NEW RELEASE -->

1. 打开包管理器，然后选择&#x200B;**[!UICONTROL 上传包]**&#x200B;以上传该包。如需了解更多信息，请参阅[包管理器](/help/sites-administering/package-manager.md)。

1. 选择该包，然后选择&#x200B;**[!UICONTROL 安装]**。

1. 要更新 S3 连接器，请在安装服务包后停止实例，用安装文件夹中提供的新二进制文件替换现有连接器，然后重新启动实例。请参阅 [Amazon S3 数据存储](/help/sites-deploying/data-store-config.md#upgrading-to-a-new-version-of-the-s-connector)。

>[!NOTE]
>
>在安装服务包过程中，包管理器 UI 中的对话框有时会意外退出。Adobe 建议您在访问部署之前，先等待错误日志趋于稳定。在确认安装成功之前，请先等待与卸载更新程序包相关的特定日志出现。通常，该问题会在 [!DNL Safari] 浏览器中出现，但也可能会在其他浏览器中间歇出现。

**自动安装**

您可以使用以下两种方法来自动安装 [!DNL Experience Manager] 6.5.18.0。<!-- UPDATE FOR EACH NEW RELEASE -->

* 当服务器在线时，将包放入 `../crx-quickstart/install` 文件夹中。该包会自动安装。
* 使用[包管理器的 HTTP API](/help/sites-administering/package-manager.md#package-share)。请使用 `cmd=install&recursive=true` 以便安装嵌套的包。

>[!NOTE]
>
>Experience Manager 6.5.18.0 不支持 Bootstrap 安装。<!-- UPDATE FOR EACH NEW RELEASE -->

**验证安装**

要了解与此版本兼容的已经过认证的平台，请参阅[技术要求](/help/sites-deploying/technical-requirements.md)。

1. 在[!UICONTROL 已安装的产品]下，产品信息页面（`/system/console/productinfo`）会显示更新后的版本字符串 `Adobe Experience Manager (6.5.18.0)`。<!-- UPDATE FOR EACH NEW RELEASE -->

1. 在 OSGi 控制台中，所有 OSGi 捆绑包均应处于&#x200B;**[!UICONTROL 活跃]**&#x200B;或&#x200B;**[!UICONTROL 片段]**&#x200B;状态（使用网页控制台：`/system/console/bundles`）。

1. OSGi 捆绑包 `org.apache.jackrabbit.oak-core` 的版本应为 1.22.16 或更高版本（使用网页控制台：`/system/console/bundles`）。<!-- NPR-41010 for 6.5.18.0 --> <!-- OAK Oak oak VERSION -MAY- NEED TO BE UPDATED FOR EACH NEW RELEASE -->

### 安装 [!DNL Experience Manager] Forms 的服务包{#install-aem-forms-add-on-package}

如需了解在 Experience Manager Forms 上安装服务包的操作说明，请参阅 [Experience Manager Forms 服务包安装说明](/help/release-notes/aem-forms-current-service-pack-installation-instructions.md)。

### 为 Experience Manager 内容片段安装 GraphQL 索引包{#install-aem-graphql-index-add-on-package}

使用 GraphQL 的客户必须安装[带有 GraphQL 索引包 1.1.1 的 Experience Manager 内容片段](https://experience.adobe.com/#/downloads/content/software-distribution/en/aem.html?package=/content/software-distribution/en/details.html/content/dam/aem/public/adobe/packages/cq650/featurepack/cfm-graphql-index-def-1.1.1.zip)。

这样做可根据实际使用的功能添加所需的索引定义。

如果未安装该包，可能会导致 GraphQL 查询变慢或失败。

>[!NOTE]
>
>每个实例只需安装一次该包；无需在每次安装服务包时重新安装。

### UberJar{#uber-jar}

适用于 [!DNL Experience Manager] 6.5.18.0 的 UberJar 可在 [Maven Central 存储库](https://repo.maven.apache.org/maven2/com/adobe/aem/uber-jar/6.5.18/)获取。<!-- CHECK FOR UPDATE EACH NEW RELEASE -->

要在 Maven 项目中使用 UberJar，请参阅[如何使用 UberJar](/help/sites-developing/ht-projects-maven.md)，并在项目 POM 中包含以下依赖项：<!-- CHECK FOR UPDATE EACH NEW RELEASE -->

```shell
<dependency>
     <groupId>com.adobe.aem</groupId>
     <artifactId>uber-jar</artifactId>
     <version>6.5.18</version>
     <scope>provided</scope>
</dependency>
```

>[!NOTE]
>
>UberJar 和其他相关工件现已发布在 Maven Central 存储库，而非 Adobe 公共 Maven 存储库（`repo.adobe.com`）。主 UberJar 文件已重命名为 `uber-jar-<version>.jar`。因此，在 `dependency` 标记中不再包含以 `apis` 为值的 `classifier`。

## 已弃用和已移除的功能{#removed-deprecated-features}

请参阅[已弃用和已移除的功能](/help/release-notes/deprecated-removed-features.md/)。

## 已知问题{#known-issues}

<!-- THESE KNOWN ISSUES CARRY OVER EACH RELEASE. THE "PRODUCT UPDATES TEAM" IS SUPPOSED TO VERIFY EACH ISSUE AND LET YOU KNOW IF ANYTHING NEEDS TO BE ADDED, DELETED, OR CHANGED IN THIS LIST.
 -->
<!-- REMOVED AS PER CQDOC-20022, JANUARY 23, 2023 * If you install [!DNL Experience Manager] 6.5 Service Pack 10 or a previous service pack on [!DNL Experience Manager] 6.5, the runtime copy of your assets custom workflow model (created in `/var/workflow/models/dam`) is deleted.
To retrieve your runtime copy, Adobe recommends to synchronize the design-time copy of the custom workflow model with its runtime copy using the HTTP API:
`<designModelPath>/jcr:content.generate.json`. -->

* **升级至服务包 18（6.5.18.0）后，页面编辑器中的页面发布功能不可用**

  <!-- https://jira.corp.adobe.com/browse/SITES-15856 REMOVE FOR 6.5.19.0-->

  将 AEM 6.5.0.0—6.5.17.0 实例升级到 AEM 6.5.18.0 后，在页面编辑器中点击&#x200B;**发布页面**&#x200B;会被重定向到一个不存在的 URL。

  要规避此问题，请执行以下任一操作：

   * 移除以下“路径”属性。

     `/libs/wcm/core/content/editor/jcr:content/content/items/content/header/items/headerbar/items/pageinfopopover/items/list/items/publish/granite:data`

   * 将正确的 URL 直接粘贴到浏览器中。

     `http://localhost:4504/editor.html/libs/wcm/core/content/sites/publishpagewizard.html?item=/content/we-retail/language-masters/en/about-us.html`



* **与 Oak 相关**
自服务包 13 起及更高版本中，开始出现以下错误日志，从而影响持久化缓存：

  ```shell
  org.h2.mvstore.MVStoreException: The write format 1 is smaller than the supported format 2 [2.0.202/5]
  at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:1004)
      at org.h2.mvstore.MVStore.getUnsupportedWriteFormatException(MVStore.java:1059)
      at org.h2.mvstore.MVStore.readStoreHeader(MVStore.java:878)
      at org.h2.mvstore.MVStore.<init>(MVStore.java:455)
      at org.h2.mvstore.MVStore$Builder.open(MVStore.java:4052)
      at org.h2.mvstore.db.Store.<init>(Store.java:129)
  ```

  或者

  ```shell
  org.h2.mvstore.MVStoreException: The write format 1 is smaller than the supported format 2 [2.1.214/5].
  ```

  要解决此异常，请执行以下操作：

   1. 从 `crx-quickstart/repository/` 中删除以下两个文件夹

      * `cache`
      * `diff-cache`

   1. 安装服务包，或重新启动 Experience Manager as a Cloud Service。
新的 `cache` 和 `diff-cache` 文件夹会自动创建，并且不会再在 `error.log` 中遇到与 `mvstore` 相关的异常。

* 请将可能使用了自定义 API 名称的 GraphQL 查询更新为使用内容模型的默认名称。

* GraphQL 查询可能会使用 `damAssetLucene` 索引，而不是 `fragments` 索引。此操作可能导致 GraphQL 查询失败或运行时间过长。

  为解决该问题，需将以下两个属性添加到 `damAssetLucene` 配置中：

   * `contentFragment`
   * `model`

  在修改索引定义后，需要重新索引（`reindex` = `true`）。

  完成以上步骤后，GraphQL 查询的性能应会提升。

* 当尝试移动、删除或发布内容片段、网站或页面时，获取内容片段引用的后台查询会失败。也就是说，该功能无法正常工作。
为确保该功能正常运行，必须将以下属性添加到索引定义节点 `/oak:index/damAssetLucene`（无需重新索引）：

  ```xml
  "tags": [
      "visualSimilaritySearch"
    ]
  "refresh": true
  ```

* 如果您在 Java™ 11 上将 [!DNL Experience Manager] 实例从 6.5.0 – 6.5.4 升级到最新的服务包，可能会在 `error.log` 文件中看到 `RRD4JReporter` 异常。要停止这些异常，请重新启动 [!DNL Experience Manager] 实例。<!-- THIS BULLET POINT WAS UPDATED AS PER CQDOC-20021, JANUARY 23, 2023 -->

* 用户可以在 [!DNL Assets] 的层级中重命名文件夹，并将嵌套文件夹发布到 [!DNL Brand Portal]。但是，在 [!DNL Brand Portal] 中，文件夹标题不会更新，直到重新发布根文件夹。

* 在安装 [!DNL Experience Manager] 6.5.x.x 期间，可能会显示以下错误和警告消息：
   * 当在 [!DNL Experience Manager] 中使用 Target Standard API（IMS 身份验证）配置 Adobe Target 集成时，将体验片段导出到 Target 会导致创建错误的产品建议类型。在 Target 中，系统不会创建类型为“Experience Fragment”/来源为“Adobe Experience Manager”的产品建议，而是会创建多个类型为“HTML”/来源为“Adobe Target Classic”的产品建议。
   * `com.adobe.granite.maintenance.impl.TaskScheduler`：在 granite/operations/maintenance 中未找到维护窗口。
   * 当在自适应表单中使用 SUM、MAX 和 MIN 等聚合函数时，服务器端验证失败（CQ-4274424）。
   * `com.adobe.granite.maintenance.impl.TaskScheduler` - 在 granite/operations/maintenance 中未找到维护窗口。
   * 通过 Shoppable Banner 查看器预览资产时，Dynamic Media 交互式图像中的热点不可见。
   * `com.adobe.cq.social.cq-social-jcr-provider bundle com.adobe.cq.social.cq-social-jcr-provider:1.3.5 (395)[com.adobe.cq.social.provider.jcr.impl.SpiSocialJcrResourceProviderImpl(2302)]`：等待完成取消注册的注册变更时超时。

* 从 AEM 6.5.15 开始，由 ```org.apache.servicemix.bundles.rhino``` 捆绑包提供的 Rhino JavaScript 引擎引入了新的提升行为。使用严格模式（```use strict;```）的脚本必须正确声明变量，否则将无法运行并抛出运行时错误。

### AEM Forms 已知问题

#### 支持的平台

* WebLogic JEE 服务器不支持高于 1.8.0_281 的 JDK 版本。（FORMS-8498、CQDOC-20383）
* 由于 [!DNL Microsoft® Windows Server 2019] 不支持 [!DNL MySQL 5.7] 和 [!DNL JBoss® EAP 7.1]，因此 [!DNL Microsoft® Windows Server 2019] 不支持 [!DNL Experience Manager Forms 6.5.10.0] 的一键安装。（CQDOC-18312）
* JEE 上的 AEM Forms 安装程序不支持使用 JDK 11.0.20 进行安装。仅支持 JDK 11.0.19 或更早版本用于安装 JEE 上的 AEM Forms 安装程序。（FORMS-10659）
  <!--* When a form is signed using the out-of-the-box Scribble Signature component, it appears in the image dialogue but does not preview and appears blank when you click on it. (FORMS-12073)-->

#### 安装

* 在 JBoss® 7.1.4 平台上，当用户安装 Experience Manager 6.5.16.0 或更高版本的服务包时，`adobe-livecycle-jboss.ear` 部署会失败。（CQ-4351522、CQDOC-20159）
* 在 Windows Server 2022 上升级至 AEM Forms 6.5.18.0 JBoss Turnkey 完整安装程序环境后，使用 Java 11 编译输出客户端应用程序代码时，可能会出现以下编译错误：

  ```
  error: error reading [AEM_Forms_Installation_dir]\sdk\client-libs\common\adobe-output-client.jar; java.net.URISyntaxException: 
  Illegal character in path at index 70: file:/[AEM_Forms_Installation_dir]/sdk/client-libs/common/${clover.jar.name} 1 error
  ```

  要解决此问题，请执行以下步骤：
   1. 导航至 `[AEM_Forms_Installation_dir]\sdk\client-libs\common\`，解压 `adobe-output-client.jar` 文件并提取其中的 `Manifest.mf` 文件。
   1. 通过移除 class-path 属性中的 `${clover.jar.name}` 条目来更新 `Manifest.mf` 文件。

      >[!NOTE]
      >
      > 您也可以使用就地编辑工具（例如 7-zip）来更新 `Manifest.mf` 文件。

   1. 将更新后的 `Manifest.mf` 保存在 `adobe-output-client.jar` 档案中。
   1. 保存修改后的 `adobe-output-client.jar` 文件并重新运行安装。（CQDOC-20878）
* 安装 AEM 服务包 6.5.18.0 的完整安装程序后，在 JEE 上使用 JBoss® Turnkey 部署 EAR 失败。
要解决该问题，请在运行配置管理器之前，定位到 `<AEM_Forms_Installation_dir>\jboss\bin\standalone.bat` 文件，并将其中所有的 `Adobe_Adobe_JAVA_HOME` 更新为 `Adobe_JAVA_HOME`。（CQDOC-20803）

#### 自适应表单

* 当发布自适应表单时，其所有依赖项（包括策略）都会被重新发布，即使这些依赖项并未修改也是如此。（FORMS-10454）
* 当用户首次选择在自适应表单中配置某个字段时，属性浏览器中不会显示保存配置的选项。在同一编辑器中选择配置自适应表单的其他字段即可解决该问题。
* 当在自适应表单的引导容器中设置了重定向 URL 时，内嵌签署功能会停止工作。（FORMS-10493）。针对该问题，现已提供热修复补丁。要下载并安装热修复补丁，请参阅 [Adobe Experience Manager Forms 热修复补丁](/help/release-notes/aem-forms-hotfix.md)
* 所有记录文档（DoR）模板均无法发布。只有基于英语区域设置的 DoR 模板及其关联的基于 Forms 的 DoR 模板能够发布。（FORMS-10535）。针对该问题，现已提供热修复补丁。要下载并安装热修复补丁，请参阅 [Adobe Experience Manager Forms 热修复补丁](/help/release-notes/aem-forms-hotfix.md)
* 在 AEM 6.5 Forms 服务包 18 中，Scribble 签名组件的弹出式预览不可用。（FORMS-12073）。针对该问题，现已提供热修复补丁。要下载并安装此热修复补丁，请参阅 [Adobe Experience Manager Forms 热修复补丁](/help/release-notes/aem-forms-hotfix.md)。
* 提交自适应表单时，复选框会存储错误的值。它会在每个逗号（“,”）前多加一个斜杠（“/”）。（FORMS-12093）

#### 交互式通信

* 升级到 AEM 服务包 18 后，无法编辑交互式通信信件。（FORMS-10578）。针对该问题，现已提供热修复补丁。要下载并安装热修复补丁，请参阅 [Adobe Experience Manager Forms 热修复补丁](/help/release-notes/aem-forms-hotfix.md)
* 在交互式通信代理 UI 的打印预览中，货币符号（如美元符号 $）在各字段值中的显示不一致。对于不超过 999 的数值会显示符号，但对于 1000 及以上的数值则缺少符号。（FORMS-16557）
* 在交互式通信中，对嵌套布局片段的 XDP 所做的任何修改都不会反映在 IC 编辑器中。（FORMS-16575）
* 在交互式通信代理 UI 的打印预览中，部分计算值未正确显示。（FORMS-16603）
* 在打印预览中查看信件时，内容会发生变化。部分空格会消失，某些字母会被替换为 “x”。（FORMS-15681）

#### JEE 上的 AEM Forms

* PDF Generator 服务无法枚举服务器上可用的字体。因此，在 PDFG 管理 UI 的 Adobe PDF 设置页面上，字体选择面板为空，从而无法嵌入或取消嵌入所选字体。（FORMS-12095）


## 包含的 OSGi 捆绑包和内容包{#osgi-bundles-and-content-packages-included}

以下文本文档列出了 [!DNL Experience Manager] 6.5.18.0 中包含的 OSGi 捆绑包与内容包：<!-- UPDATE FOR EACH NEW RELEASE -->

* [Experience Manager 6.5.18.0](/help/release-notes/assets/65180_bundles.txt) 中包含的 OSGi 捆绑包列表 <!-- UPDATE FOR EACH NEW RELEASE -->
* [Experience Manager 6.5.18.0](/help/release-notes/assets/65180_packages.txt) 中包含的内容包列表 <!-- UPDATE FOR EACH NEW RELEASE -->

## 受限网站{#restricted-sites}

这些网站仅向客户开放。如果您已是客户并需要访问权限，请联系您的 Adobe 客户经理。

* [在 licensing.adobe.com 下载产品](https://licensing.adobe.com/)
* [联系 Adobe 客户支持部门](https://experienceleague.adobe.com/docs/customer-one/using/home.html?lang=zh-Hans)。

>[!MORELIKETHIS]
>
>* [[!DNL Experience Manager] 产品页面](https://business.adobe.com/products/experience-manager/adobe-experience-manager.html)
>* [[!DNL Experience Manager] 6.5 文档](https://experienceleague.adobe.com/docs/experience-manager-65.html?lang=zh-Hans)
>* [订阅 Adobe 产品更新早知道](https://www.adobe.com/subscription/priority-product-update.html)
